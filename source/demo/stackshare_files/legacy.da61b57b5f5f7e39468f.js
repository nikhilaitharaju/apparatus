(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/notifications/notifications.js":function(e,t){var n=document.querySelector("#notifications_header"),o=!1,r=0;"/notifications"===location.pathname&&window.addEventListener("scroll",function(){if(!(o||n.offsetTop+n.scrollHeight>scrollY+innerHeight)){r++,o=!0;var e=document.createElement("div");e.innerHTML='Loading... <img src="https://img.stackshare.io/fe/spinner.svg"/>',e.classList.add("loading"),n.appendChild(e),CSRFFetch("/api/v1/notifications/index?page=".concat(r)).then(function(e){if(200===e.status)return e.text()}).then(function(e){var t=!0,r=!1,a=void 0;try{for(var i,c=document.querySelectorAll(".loading")[Symbol.iterator]();!(t=(i=c.next()).done);t=!0)i.value.remove()}catch(e){r=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw a}}if(!(e.length<=1)){var s=document.createElement("div");s.innerHTML=e,n.appendChild(s),o=!1}})}})},"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/shared/util/util.js":function(e,t,n){"use strict";n.r(t);var o=n("/home/circleci/frontend/node_modules/parse-github-url/index.js"),r=n.n(o),a=!0,i=!1,c=void 0;try{for(var s,l=document.querySelectorAll("[data-click-toggle-class]")[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){s.value.addEventListener("click",u)}}catch(e){i=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw c}}function u(e){var t=e.target.getAttribute("data-click-toggle-class");t?e.target.classList.toggle(t):u({target:e.target.parentElement})}window.stopEvent=function(e){try{e.preventDefault(),e.stopPropagation(),e.nativeEvent.preventDefault(),e.nativeEvent.stopPropagation()}catch(e){}},window.simpleDomainFromUrl=function(e){if(void 0===e||""===e)return"";var t=r()(e);if(e.includes("github.com")&&!e.includes("github.com/blog")&&t&&t.repo)return"https://github.com/".concat(t.repo);for(var n,o="",a=0,i=0,c=e.length;i<c;i++)if(n=e[i],0===a)i>5?(i=-1,a=1):":"===n&&(i+=2,a=1);else if(1===a)"w"===n&&"w"===e[i+1]&&"w"===e[i+2]&&"."===e[i+3]&&(i+=4),o+=e[i],a=2;else if(2===a){if("/"===n||"?"===n||"#"===n)break;o+=n}return o}},"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/track/track.js":function(e,t){$("[data-track]").each(function(e,t){var n=$(t);n.click(function(){trackEvent(n.data("track"),n.data("track-props"))})})},"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/clientRegister.jsx 2eb462433a16a245a5b6a5cd9eba1f5f":function(e,t,n){"use strict";n.r(t);var o=n("/home/circleci/frontend/node_modules/react-on-rails/node_package/lib/ReactOnRails.js"),r=n.n(o),a=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/maharo/index.js 7be06c25e3e2779f459622d6837b9632"),i=n("/home/circleci/frontend/node_modules/react/index.js"),c=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},d=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,m(t).call(this,e))).repoFormatResult=function(e){return f(e.id)?e.name:'<span class="label label-important">New</span> '.concat(n.escapeHtml(e.name))},n.repoFormatSelection=function(e){return e.name},n.repoNewCompany=function(e,t){if(0===$(t).filter(function(){return 0===this.name.toLowerCase().localeCompare(e.toLowerCase())}).length)return{id:e,text:e,name:e}},n.handleServiceChange=function(e){n.setState({selectedService:parseInt(e.target.value,10)})},n.handleEmailChange=function(e){n.setState({selectedEmail:e.target.value})},n.handleEmailPartOneChange=function(e){n.setState({selectedEmailPartOne:e.target.value})},n.handleCompanyNameChange=function(e){n.setState({selectedCompanyId:null,selectedEmail:null,selectedCompanyName:null,selectedEmailPartOne:null,selectedEmailPartTwo:null});var t=e.val;if(f(t)){var o=n.parseUri(e.choice.website_url);n.setState({existingCompany:!0,multipartEmail:!0,selectedCompanyId:t,selectedEmailPartOne:"",selectedEmailPartTwo:o})}else n.setState({existingCompany:!1,multipartEmail:!1,selectedCompanyName:t})},n.addCustomer=function(e){if(e.preventDefault(),n.props.onCustomerCreated){n.setState({processingSubmit:!0,submitState:"Adding customer..."});var t={};t["company_customer[service_id]"]=n.state.selectedService,t.company_name=n.state.selectedCompanyId||n.state.selectedCompanyName,n.state.multipartEmail?t["company_customer[email]"]=n.state.selectedEmailPartOne+n.state.selectedEmailPartTwo:t["company_customer[email]"]=n.state.selectedEmail,t.existing_company=n.state.existingCompany,$.ajax({method:"POST",url:"/company_customers",data:t}).done(function(e){n.props.onCustomerCreated(e),n.resetComponent(),$("html, body").animate({scrollTop:$("table").offset().top},300)}).fail(function(e){"already has service"===e.responseJSON.message?sweetAlert("Oops...","This customer has already listed you as part of their stack.","error"):sweetAlert("Oops...","Sorry you've already added a customer with that email address.","error"),n.setState({submitState:"Add Customer Below",validCustomer:!1,processingSubmit:!1})})}if(n.props.onCustomerEdited){n.setState({processingSubmit:!0,submitState:"Updating customer..."});var o={};o["company_customer[service_id]"]=n.state.selectedService,o.company_name=n.state.selectedCompanyId||n.state.selectedCompanyName,n.state.multipartEmail?o["company_customer[email]"]=n.state.selectedEmailPartOne+n.state.selectedEmailPartTwo:o["company_customer[email]"]=n.state.selectedEmail,o.existing_company=n.state.existingCompany,o.customerId=n.props.customerId,$.ajax({method:"PATCH",url:"/company_customers/"+o.customerId,data:o}).done(function(e){n.props.onCustomerEdited(e),n.resetComponent(),$("#editCompanyCustomerModal").modal("hide"),$("html, body").animate({scrollTop:$("table").offset().top},300)}).fail(function(e){"already has service"===e.responseJSON.message?sweetAlert("Oops...","This customer has already listed you as part of their stack.","error"):sweetAlert("Oops...","Sorry you've already added a customer with that email address.","error"),n.setState({submitState:"Add Customer Below",validCustomer:!1,processingSubmit:!1})})}},n.state={submitState:"Add Customer Below",manualInviteState:"I'll invite them myself",validCustomer:!1,selectedService:e.services[0].id,selectedCompanyId:null,selectedCompanyName:null,selectedEmail:null,selectedEmailPartOne:null,selectedEmailPartTwo:null,multipartEmail:!1,processingSubmit:!1,editing:!1,customerId:null,customerName:null,showEmailTextarea:!1,emailText:""},n.companySelect=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$(this.companySelect).select2({placeholder:"Search for a company",minimumInputLength:1,ajax:{url:"/companies/search",dataType:"json",quietMillis:250,data:function(e){return{name:e}},results:function(e){return{results:e}},cache:!0},escapeMarkup:function(e){return e},dropdownCssClass:"bigdrop",formatResult:this.repoFormatResult,formatSelection:this.repoFormatSelection,createSearchChoice:this.repoNewCompany}),$(this.companySelect).on("select2-selecting",this.handleCompanyNameChange)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.customerName;!0===this.props.editing&&this.setState({customerName:t})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.customerName;!0===this.props.editing&&e.customerName!==n&&setTimeout(function(){$(t.companySelect).select2("search",n)},400)}},{key:"escapeHtml",value:function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return h[e]})}},{key:"parseUri",value:function(e){for(var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),o={},r=14;r--;)o[t.key[r]]=n[r]||"";o[t.q.name]={},o[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(o[t.q.name][n]=r)});var a=o.host;return"www."===a.substring(0,4)&&(a=a.substring(4)),a.substring(0,4),"@"+a}},{key:"validateEmail",value:function(e){return d.test(e)}},{key:"enableSubmit",value:function(){var e=!0,t=!0,n=!0;return null!=this.state.selectedCompanyId||""!==this.state.selectedCompanyName&&null!=this.state.selectedCompanyName||(e=!1),null==this.state.selectedService&&(t=!1),n=!1===this.state.multipartEmail?this.validateEmail(this.state.selectedEmail):this.validateEmail(this.state.selectedEmailPartOne+this.state.selectedEmailPartTwo),!!(e&&t&&n)&&!this.state.processingSubmit}},{key:"multiPartEmailInput",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"input-group split-email",style:{marginBottom:"10px",width:"270px"}},c.a.createElement("input",{onChange:this.handleEmailPartOneChange,value:this.state.selectedEmailPartOne||"",type:"text",name:"first-part-email",className:"form-control",id:"email",style:{textAlign:"right"}}),c.a.createElement("div",{className:"input-group-addon second-part-email",style:{paddingLeft:"5px"}},this.state.selectedEmailPartTwo)),c.a.createElement("div",{style:{fontStyle:"italic",color:"grey"}},"Domain for email address is prefilled, please dont enter the full email address"))}},{key:"emailInput",value:function(){return c.a.createElement("input",{onChange:this.handleEmailChange,value:this.state.selectedEmail||"",type:"text",ref:"email",style:{marginBottom:"10px"},className:"form-control singlepart-email",placeholder:"Email address"})}},{key:"resetComponent",value:function(){this.setState({submitState:"Add Customer Below",manualInviteState:"I'll invite them myself",validCustomer:!1,selectedCompanyId:null,selectedCompanyName:null,selectedEmail:null,selectedEmailPartOne:null,selectedEmailPartTwo:null,multipartEmail:!1,processingSubmit:!1}),$(this.companySelect).select2("val","")}},{key:"render",value:function(){var e=this;return c.a.createElement("form",{className:"company-customer",onSubmit:this.addCustomer},c.a.createElement("input",{type:"hidden",value:this.props.customerId||"",name:"company_customer[id]"}),c.a.createElement("label",null,"Service you'd like to list this customer under:"),c.a.createElement("select",{onChange:this.handleServiceChange,ref:"service_id",className:"form-control",style:{marginBottom:"10px"}},this.props.services.map(function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})),c.a.createElement("br",null),c.a.createElement("label",null,"Customer's Company Name"),c.a.createElement("div",{className:"select-company-ajax"},c.a.createElement("input",{type:"hidden",ref:function(t){return e.companySelect=t},name:"company_name",className:"select2-company-ajax"})),c.a.createElement("br",null),c.a.createElement("label",null,"Employee's Email Address"),c.a.createElement("span",{className:"no-email"},"No email will be sent"),this.state.multipartEmail?this.multiPartEmailInput():this.emailInput(),c.a.createElement("br",null),c.a.createElement("button",{type:"submit",value:this.state.submitState,className:"btn btn-ss-alt btn-lg add-customer",disabled:!this.enableSubmit(),style:{float:"left",marginBottom:"40px",width:"auto !important",padding:"11px 16px !important"}},this.state.submitState,this.state.processingSubmit&&c.a.createElement("i",{className:"fa fa-spinner fa-spin",style:{marginLeft:"8px"}})),this.state.processingSubmit&&c.a.createElement("span",{style:{marginTop:"13px",display:"inline-block",marginLeft:"10px"}},"This may take a minute."),c.a.createElement("div",{className:"clearfix"}))}}])&&l(n.prototype,o),r&&l(n,r),t}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,w(t).call(this,e))).state={customerId:e.customerId,customerName:e.customerName,company_services:e.company_services},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{id:"editCompanyCustomerModal",className:"modal fade",role:"dialog",tabIndex:"-1",style:{outline:"none",zIndex:1e4}},c.a.createElement("div",{className:"modal-dialog"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{className:"close","data-dismiss":"modal",type:"button"},c.a.createElement("span",null,"×")),c.a.createElement("h4",{id:"myModalLabel"},"Add Email for Company Customer")),c.a.createElement("div",{className:"modal-body",style:{paddingTop:0,textAlign:"inherit"}},c.a.createElement(b,{editing:!0,customerId:this.props.customerId,customerName:this.props.customerName,onCustomerEdited:this.props.onCustomerEdited,services:this.state.company_services}),c.a.createElement("div",{className:"clearfix"})))))}}])&&v(n.prototype,o),r&&v(n,r),t}(),S=n("/home/circleci/frontend/node_modules/moment/moment.js"),O=n.n(S);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=j(this,x(t).call(this))).handleChange=function(t){e.setState({copyValue:t.target.value})},e.state={copyValue:""},e._copyButton=null,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this._copyButton&&new Clipboard(this._copyButton)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.copyValue!==this.props.copyValue&&this.setState({copyValue:e.copyValue})}},{key:"confirmButton",value:function(){return c.a.createElement("button",{className:"btn btn-ss",onClick:this.props.onConfirmClick,style:{marginBottom:"10px",marginLeft:"10px"}},"Done")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{style:{overflow:"hidden"}},c.a.createElement("textarea",{value:this.state.copyValue,onChange:this.handleChange,style:{width:"100% !important"},id:"copy-textarea",className:"form-control",rows:"5"}),c.a.createElement("button",{style:{marginBottom:"10px",marginTop:"10px"},type:"button",ref:function(t){return e._copyButton=t},className:"btn clipboard-btn btn-ss-alt","data-clipboard-target":"#copy-textarea"},c.a.createElement("span",{style:{paddingRight:"5px"}},"Click to copy"),c.a.createElement("span",{className:"octicon octicon-clippy"})),this.props.confirmButton&&this.confirmButton())}}])&&C(n.prototype,o),r&&C(n,r),t}();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R(this,M(t).call(this,e))).state={customers:e.customers},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,i["Component"]),n=t,(o=[{key:"addEmailButton",value:function(e,t){var n=this;return c.a.createElement("button",{onClick:function(){n.props.onAddEmailClick(e,t)},className:"btn btn-ss-alt btn-sm edit-company-customer"},"Add Email")}},{key:"customerLink",value:function(e){return c.a.createElement("a",{href:e.company_canonical_url},e.company_name)}},{key:"formatDate",value:function(e){return e?O()(e).fromNow():"N/A"}},{key:"updateCopiedAtTimeForCustomer",value:function(e){$.ajax({method:"POST",url:"/company-customers/update-copied-at",data:{id:e.id}})}},{key:"showCopyableTextareaModal",value:function(e){this.updateCopiedAtTimeForCustomer(e),this.setState({emailContent:e.email_content}),$(this.refs.copyableTextareaModal).modal({show:!0})}},{key:"sendEmail",value:function(e){var t=this;$.ajax({method:"POST",url:"/send-invite",data:{id:e.id}}).done(function(e){t.props.onCustomerEmailSent(e),sweetAlert("Great!","We’ve sent an email to your customer asking them to verify.","success")}).fail(function(){return sweetAlert("Oops...","Something went wrong sending this email.","error")})}},{key:"actionButtons",value:function(e){return e.needs_email&&"Added"!==e.status?this.addEmailButton(e.id,e.company_name):null==e.sent_at?c.a.createElement("div",null,c.a.createElement("button",{onClick:this.showCopyableTextareaModal.bind(null,e),className:"btn btn-ss btn-sm"},"Copy Email"),c.a.createElement("button",{onClick:this.sendEmail.bind(null,e),style:{marginLeft:5},className:"btn btn-ss btn-sm"},"Send Email")):c.a.createElement("div",null,c.a.createElement("button",{onClick:this.showCopyableTextareaModal.bind(null,e),className:"btn btn-ss btn-sm"},"Copy Email"))}},{key:"statusColorCodeStyle",value:function(e){return"Customer Not Listed"===e.status?"customer-not-listed":"Email Sent"===e.status||"Email Copied"===e.status?"customer-pending":"customer-listed"}},{key:"render",value:function(){var e=this,t=this.state.customers;return t.sort(firstBy("id").thenBy("created_at")),t.reverse(),c.a.createElement("div",null,c.a.createElement("table",{className:"company-customers-list table table-hover table-bordered",style:{marginBottom:"200px"}},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Service"),c.a.createElement("th",null,"Customer"),c.a.createElement("th",null,"Verified"," ",c.a.createElement("div",{"data-hint":"Profile has been claimed by this company",className:"hint--right"},c.a.createElement("span",{className:"octicon octicon-info"}))),c.a.createElement("th",null,"Invite Email"),c.a.createElement("th",null,"Sent At"),c.a.createElement("th",null,"Status"),c.a.createElement("th",{className:"customer-table-header"},"Actions"))),c.a.createElement("tbody",null,t.map(function(t,n){return c.a.createElement("tr",{key:n},c.a.createElement("td",null,t.service),c.a.createElement("td",null,t.company_verified?e.customerLink(t):t.company_name),c.a.createElement("td",null,t.company_verified?"Yes":"No"),c.a.createElement("td",null,t.email),c.a.createElement("td",null,e.formatDate(t.sent_at)),c.a.createElement("td",{className:e.statusColorCodeStyle(t)},t.status),c.a.createElement("td",null,e.actionButtons(t)))}))),c.a.createElement("div",{className:"modal fade",ref:"copyableTextareaModal",tabIndex:"-1",role:"dialog"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title",id:"gridSystemModalLabel"},"Copy your email invite text here")),c.a.createElement("div",{className:"modal-body"},c.a.createElement(P,{copyValue:this.state.emailContent}))))))}}])&&F(n.prototype,o),r&&F(n,r),t}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=U(this,B(t).call(this,e))).handleCustomerCreated=function(e){var t={id:e.id,company_name:e.company_name,email:e.email,needs_email:!1,sent_at:e.sent_at,service:e.service,company_verified:e.company_verified,company_canonical_url:e.company_canonical_url,status:e.status,email_content:e.email_content},o=n.state.customers;o.unshift(t),n.setState({customers:o})},n.handleCustomerEdited=function(e){for(var t=n.state.customers.length,o=n.state.customers,r=0;r<t-1;r++)o[r].id===e.id&&(o[r].email=e.email,o[r].sent_at=null,o[r].needs_email=!1,o[r].email_content=e.email_content);n.setState({customers:o})},n.handleCustomerEmailSent=function(e){for(var t=n.state.customers.length,o=n.state.customers,r=0;r<t;r++)o[r].id===e.id&&(o[r].sent_at=e.sent_at,o[r].needs_email=!1);n.setState({customers:o})},n.handleAddEmailClick=function(e,t){n.setState({editingCustomerId:e,editingCustomerName:t}),$("#editCompanyCustomerModal").modal()},n.state={company_services:e.company_services,customers:e.customers,editingCustomerId:null},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$("#comparison-loading").remove()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(b,{services:this.state.company_services,onCustomerCreated:this.handleCustomerCreated}),c.a.createElement("div",{className:"clearfix"}),c.a.createElement("hr",null),c.a.createElement(k,{company_services:this.state.company_services,onCustomerEdited:this.handleCustomerEdited,customerName:this.state.editingCustomerName,customerId:this.state.editingCustomerId}),c.a.createElement(A,{customers:this.state.customers,onCustomerEmailSent:this.handleCustomerEmailSent,onAddEmailClick:this.handleAddEmailClick}))}}])&&D(n.prototype,o),r&&D(n,r),t}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J(this,G(t).call(this,e))).handleChange=function(e){e.target.value===n.state.confirmText?n.setState({buttonEnabled:!0,inputText:e.target.value}):n.setState({buttonEnabled:!1,inputText:e.target.value})},n.handleConfirm=function(){n.props.onConfirmClick(),n.setState({buttonEnabled:!1,inputEnabled:!1})},n.state={inputText:"",confirmText:e.confirmText,buttonEnabled:!1,inputEnabled:!0},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",null,this.props.warning),c.a.createElement("br",null),c.a.createElement("input",{onChange:this.handleChange,disabled:!this.state.inputEnabled,type:"text",ref:"text",placeholder:this.state.confirmText,className:"form-control delete-modal-in"}),c.a.createElement("button",{onClick:this.handleConfirm,disabled:!this.state.buttonEnabled,className:"btn btn-danger btn-block"},this.props.buttonText))}}])&&H(n.prototype,o),r&&H(n,r),t}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Q(this,(e=ee(t)).call.apply(e,[this].concat(r)))).onConfirmClick=function(){$.ajax({url:"/companies/delete",type:"POST",data:{companyId:n.props.companyId},success:function(){return window.location="/"}})},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,i["Component"]),n=t,(o=[{key:"renderStacks",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-sh"},"Stacks to be deleted"),c.a.createElement("ul",null,this.props.stacks.map(function(e,t){return c.a.createElement("li",{key:t},e)})))}},{key:"renderServices",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-sh"},"Tools to be deleted"),c.a.createElement("ul",null,this.props.services.map(function(e,t){return c.a.createElement("li",{key:t},e)})))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-h"},"This action cannot be undone. This will ",c.a.createElement("b",null,"permanently delete")," your company's account and all associated data including stack comments, favorites, jobs, and posts."),c.a.createElement("br",null),this.props.stacks.length>0&&this.renderStacks(),this.props.services.length>0&&this.renderServices(),c.a.createElement("hr",null),c.a.createElement(Y,{buttonText:"Delete My Company",confirmText:this.props.companyName,onConfirmClick:this.onConfirmClick,warning:"To permanently delete your company and associated data, please type in your company name to confirm."}))}}])&&X(n.prototype,o),r&&X(n,r),t}(),oe=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/library/buttons/base/simple.jsx");function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ie(this,ce(t).call(this,e))).handleClick=function(e){e.preventDefault(),n.props.currentUser?trackEvent("i_use_this.clicked",{service:n.props.serviceId}):signupModal()},n.state={stacks:null,serviceId:null},n._iUseThisButton=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,i["Component"]),n=t,(o=[{key:"downloadStacks",value:function(){var e=this;this.serverRequest=$.get("/stacks/i_use_this/"+this.props.serviceId,function(t){e.setState({stacks:t,serviceId:e.props.serviceId}),e.initializeDrop()})}},{key:"popupContent",value:function(){var e="";if(e+="<div class='i-use-this-content'><div style='padding: 15px 5px 15px 5px;'><div style='color: white;'> Add this tool to your stack<hr style='border-color: rgb(90,90,90);' />",this.state.stacks&&this.state.stacks.companyStacks){e+=this.state.stacks.companyStacks.length>0?"<h4>Company Stacks</h4>":"",0===this.state.stacks.companyStacks.length&&(e+=this.renderDefaultMyCompanyStack());for(var t="",n=0;n<this.state.stacks.companyStacks.length;n++)t+=this.renderStack(this.state.stacks.companyStacks[n]);e+=t}if(e+="<br><h4>Personal Stacks</h4>",this.state.stacks&&this.state.stacks.personalStacks){0===this.state.stacks.personalStacks.length&&(e+=this.renderDefaultMyStack());for(var o="",r=0;r<this.state.stacks.personalStacks.length;r++)o+=this.renderStack(this.state.stacks.personalStacks[r]);e+=o,e+="</div></div></div>"}return e}},{key:"renderDefaultMyStack",value:function(){return"<div style='margin: 6px 0; overflow: hidden;'><button style='float: left;margin-right:7px' data-service-id='"+this.state.serviceId+"' class='btn btn-sm btn-ss-alt add-service-to-default-stack'>Add</button><span style='float: left;margin-top:2px;margin-left: 4px;'><div id='pop-stack'><div style='font-weight: bold;font-size:14px'>My Stack</div></div></span></div>"}},{key:"renderDefaultMyCompanyStack",value:function(){return"<div style='margin: 6px 0; overflow: hidden;'><div class='btn btn-sm btn-ss-alt' style='margin-right:4px;font-style:italics'><a href='/create-stack/scan' style='color:white' target='_blank'>Add New Company</a></div></div>"}},{key:"renderStack",value:function(e){return"<div style='margin: 6px 0; overflow: hidden;'><button style='float: left;margin-right:7px' data-service-id='"+this.state.serviceId+"' data-stack-id='"+e.id+"' class='btn btn-sm btn-ss-alt add-service-to-stack "+(e.added?"disabled":"")+"'>"+(e.added?"Added":"Add")+"</button><span style='float: left;margin-top:2px;margin-left: 4px;'><div id='pop-stack'><a href='"+e.canonical_url+"' target='_blank'>"+e.name+"</a></div></span></div>"}},{key:"componentDidMount",value:function(){this.downloadStacks(),$(".iUseThisButtonPlaceholder").remove()}},{key:"componentWillUnmount",value:function(){this.serverRequest.abort()}},{key:"initializeDrop",value:function(){var e=this;this.props.currentUser&&new Drop({target:this._iUseThisButton,openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToWindow:!1,constrainToScrollParent:!1,position:"bottom center",content:function(){return e.popupContent()}}).on("close",function(){return e.downloadStacks()})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(t){return e._iUseThisButton=t},style:{display:"flex",justifyContent:"center",marginBottom:10}},c.a.createElement(oe.a,{width:125,onClick:this.handleClick},c.a.createElement("span",null,"I Use This")))}}])&&ae(n.prototype,o),r&&ae(n,r),t}();function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,fe(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,i["Component"]),n=t,(o=[{key:"onConfirmClick",value:function(){$.ajax({url:"/users/delete",type:"POST",success:function(){return window.location="/"}})}},{key:"renderStacks",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-sh"},"Stacks to be deleted"),c.a.createElement("ul",null,this.props.stacks.map(function(e,t){return c.a.createElement("li",{key:t},e)})))}},{key:"renderCompanies",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-sh"},"Companies to be deleted"),c.a.createElement("ul",null,this.props.companies.map(function(e,t){return c.a.createElement("li",{key:t},e)})))}},{key:"renderServices",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-sh"},"Tools to be deleted"),c.a.createElement("ul",null,this.props.services.map(function(e,t){return c.a.createElement("li",{key:t},e)})))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"delete-modal-h"},"This action cannot be undone. This will ",c.a.createElement("b",null,"permanently delete")," your account and all associated data including any and all of your comments, one-liners, votes, reviews, stacks, companies, or tools."),c.a.createElement("br",null),this.props.stacks.length>0&&this.renderStacks(),this.props.companies.length>0&&this.renderCompanies(),this.props.services.length>0&&this.renderServices(),c.a.createElement("hr",null),c.a.createElement(Y,{buttonText:"Delete My Account",confirmText:this.props.username,onConfirmClick:this.onConfirmClick,warning:"To permanently delete your account and associated data, please type in your username to confirm."}))}}])&&me(n.prototype,o),r&&me(n,r),t}(),be=n("/home/circleci/frontend/node_modules/prop-types/index.js"),ye=n.n(be),ve=n("/home/circleci/frontend/node_modules/react-router/es/index.js 193c08104338a14c7dd1990a54f19a8d"),_e=n("/home/circleci/frontend/node_modules/mobx/lib/mobx.module.js"),ge="https://img.stackshare.io",we="".concat(ge,"/fe/no-img.svg"),Ee="".concat(ge,"/fe/onboarding/add-company.png"),ke="".concat(ge,"/fe/spinner.svg"),Se="".concat(ge,"/fe/onboarding/pending_approval.png"),Oe="".concat(ge,"/fe/onboarding/back-arrow.svg"),Ne=("".concat(ge,"/fe/onboarding/right-arrow.svg"),"".concat(ge,"/fe/ss-logo-textless.png")),Ce="Save",je="Saving...",xe="Saved";function Te(e){return""!==e&&e?e:we}var Pe,Ie,Fe,Re,Me,ze,Ae,Le="/create-stack";function De(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $e(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Be,qe,We,Ve=(Ie=$e((Pe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),De(this,"scanned",Ie,this),De(this,"selectedTools",Fe,this),De(this,"companies",Re,this),De(this,"stackOwner",Me,this),De(this,"stackInfo",ze,this),De(this,"newCompany",Ae,this),this.userId=t.routerProps.userId,this.routerProps=t.routerProps,Object(_e.l)(this.selectedTools,function(){setTimeout(function(){$(document).trigger("onboarding.calcSlideHeights")})}),Object(_e.f)(this.selectedTools,function(e){if("splice"===e.type&&1===e.added.length){var t=e.object.find(function(t){return t.id===e.added[0].id});if(t)return e.object[e.object.indexOf(t)]=e.added[0],null}return e})}var t,n,o;return t=e,(n=[{key:"saveToLocalStorage",value:function(){localStorage.setItem("".concat(this.userId,"-onboarding-globalStore"),JSON.stringify(this))}},{key:"addSelectedTool",value:function(e){e.reasons||(e.reasons=[]);var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1===t?this.selectedTools[this.selectedTools.length]=e:this.selectedTools[t]=Object.assign(this.selectedTools[t],e)}},{key:"removeSelectedTool",value:function(e){var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&this.selectedTools.splice(t,1)}},{key:"addCompany",value:function(e){var t=this.companies.findIndex(function(t){return t.id===e.id});-1===t?this.companies[this.companies.length]=e:this.companies[t]=Object.assign(this.companies[t],e)}},{key:"toolImage",value:function(e){return e&&e.image_url?e.image_url:Se}},{key:"saveStack",value:function(){var e=this,t={id:0};"newcompany"===this.stackOwner?t.id=this.newCompany.id:Number.isInteger(this.stackOwner)&&(t=this.companies.find(function(t){return t.id===e.stackOwner})),this.stackInfo.name&&""!==this.stackInfo.name||(ve.e.push("".concat(Le,"/stack-info")),$(document).trigger("errorMsg","Your stack needs a name before submitting.")),$.post("/api/v1/stacks/create",{stack:{name:this.stackInfo.name,website_url:this.stackInfo.website_url,description:this.stackInfo.description,image_url:this.stackInfo.image_url,services:this.selectedTools.map(function(e){return e.id}),owner:{type:t.id?"Company":"User",id:t.id}}},function(e){ve.e.push("".concat(Le,"/scan")),window.location=e.redirect}).fail(function(){$(document).trigger("errorMsg","An error occurred saving your stack.")})}},{key:"ownerImage",get:function(){var e=this;if("personal"===this.stackOwner)return this.routerProps.userImg;if("newcompany"===this.stackOwner)return this.newCompany.image_url;if(Number.isInteger(this.stackOwner)){var t=this.companies.find(function(t){return t.id===e.stackOwner});if(t)return t.image_url||we}return we}},{key:"ownerName",get:function(){var e=this;if("personal"===this.stackOwner)return this.routerProps.userName;if("newcompany"===this.stackOwner)return this.newCompany.name;if(Number.isInteger(this.stackOwner)){var t=this.companies.find(function(t){return t.id===e.stackOwner});if(t)return t.name}return""}}])&&Ue(t.prototype,n),o&&Ue(t,o),e}()).prototype,"scanned",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=$e(Pe.prototype,"selectedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=$e(Pe.prototype,"companies",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=$e(Pe.prototype,"stackOwner",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ze=$e(Pe.prototype,"stackInfo",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:"",description:"",url:"",image_url:""}}}),Ae=$e(Pe.prototype,"newCompany",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:void 0,name:"",website_url:"",description:"",angellist_url:"",email_address:"",twitter_username:"",image_url:""}}}),$e(Pe.prototype,"ownerImage",[_e.d],Object.getOwnPropertyDescriptor(Pe.prototype,"ownerImage"),Pe.prototype),$e(Pe.prototype,"ownerName",[_e.d],Object.getOwnPropertyDescriptor(Pe.prototype,"ownerName"),Pe.prototype),Pe);function He(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Je(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ge,Ke=(qe=Je((Be=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,"backRoute",qe,this),He(this,"forwardRoute",We,this)}).prototype,"backRoute",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=Je(Be.prototype,"forwardRoute",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be),Ye=n("/home/circleci/frontend/node_modules/mobx-react/index.module.js");function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt,ot=Object(Ye.a)(Ge=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Qe(t).call(this,e))||"object"!==Ze(r)&&"function"!=typeof r?et(o):r).state={step:0},n.h1=n.h1.bind(et(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;ve.e.listen(function(t){var n=t.pathname.replace(/\//g,"").toLowerCase();e.setState({step:{"create-stackstack-info":0,"create-stacktool-selection":1,"create-stacktool-details":2}[n]||0})})}},{key:"h1",value:function(){try{switch(this.context.globalStore.stackOwner.type){case"personal":return"Creating Your Stack";case"company":return"Creating ".concat(this.context.globalStore.stackOwner.name,"'s Stack");case"newcompany":return"Creating Your Company's Stack";default:return"Creating a New Stack"}}catch(e){return"Creating a New Stack"}}},{key:"timelineClass",value:function(){return"onboarding__header__timeline step-".concat(this.state.step)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__header__container"},c.a.createElement("h1",null,this.h1()),c.a.createElement("p",null,"A stack is a set of tools & services you use to build apps and infrastructure."),c.a.createElement("ul",{className:this.timelineClass()},c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Stack Info"}),c.a.createElement("li",{className:"onboarding__header__timeline__spacer"}),c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Tools Selection"}),c.a.createElement("li",{className:"onboarding__header__timeline__spacer"}),c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Tools Details"})),0===this.state.step&&!0===this.context.globalStore.scanned&&c.a.createElement("div",{className:"onboarding__header__container__results"},this.context.globalStore.selectedTools.map(function(t){return c.a.createElement("img",{key:"header3-".concat(t.id),src:e.context.globalStore.toolImage(t)})})))}}])&&Xe(n.prototype,o),r&&Xe(n,r),t}())||Ge;function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ot.contextTypes={globalStore:ye.a.object};var lt=Object(Ye.a)(nt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=it(t).call(this,e))||"object"!==rt(r)&&"function"!=typeof r?ct(o):r).state={slideMap:{"create-stack":0,"create-stackscan":0,"create-stackstack-type":1,"create-stacknew-company":2,"create-stackstack-info":3,"create-stacktool-selection":3,"create-stacktool-details":3},activeSlide:0,slideHeights:[]},n.goBack=n.goBack.bind(ct(n)),n.calcSlideHeights=n.calcSlideHeights.bind(ct(n)),$(document).on("onboarding.calcSlideHeights",n.calcSlideHeights),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,i["Component"]),n=t,(o=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;ve.e.listen(function(t){var n=t.pathname.replace(/\//g,"").toLowerCase();e.setState({activeSlide:e.state.slideMap[n]}),setTimeout(function(){e.calcSlideHeights()})})}},{key:"componentDidMount",value:function(){var e=this;this.calcSlideHeights(),Object(_e.l)(this.context.globalStore.selectedTools,function(){setTimeout(function(){e.calcSlideHeights()})})}},{key:"calcSlideHeights",value:function(){var e=[];$(".onboarding__header__container").each(function(t,n){e.push($(n).outerHeight())}),this.setState({slideHeights:e})}},{key:"goBack",value:function(){trackEvent("stack.create.nav",{value:"back"}),this.context.navStore.backRoute&&""!==this.context.navStore.backRoute&&ve.e.push(this.context.navStore.backRoute)}},{key:"reset",value:function(){trackEvent("stack.create.nav",{value:"reset"}),confirm("Are you sure that you'd like to reset your stack creation?\nAll stack creation progress will be lost.")&&$(document).trigger("onboarding.reset")}},{key:"activeSlideHeight",value:function(){return this.state.slideHeights[this.state.activeSlide]||0}},{key:"activeSlidePosition",value:function(){for(var e=0,t=0;t<this.state.activeSlide;t++)e+=this.state.slideHeights[t];return-e||0}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__header",style:{height:this.activeSlideHeight()}},this.context.navStore.backRoute&&c.a.createElement("div",{className:"onboarding__nav"},c.a.createElement("div",{className:"onboarding__nav__back",onClick:this.goBack},c.a.createElement("img",{src:Oe}),"Back"),c.a.createElement("div",{className:"onboarding__nav__reset",onClick:this.reset},"Reset")),c.a.createElement("div",{className:"onboarding__header__slider",style:{top:this.activeSlidePosition()}},c.a.createElement("div",{className:"onboarding__header__container"},c.a.createElement("h1",null,"Build Your Stack"),c.a.createElement("p",null,"Enter a URL & we'll guess your stack before you create your stack page.")),c.a.createElement("div",{className:"onboarding__header__container"},c.a.createElement("h1",null,"What type of stack is this?"),c.a.createElement("p",null,"Select the ownership of this stack"),c.a.createElement("div",{className:"onboarding__header__container__results"},this.context.globalStore.scanned&&this.context.globalStore.selectedTools.map(function(t){return c.a.createElement("img",{key:"header1-".concat(t.id),src:e.context.globalStore.toolImage(t)})}))),c.a.createElement("div",{className:"onboarding__header__container"},c.a.createElement("h1",null,"Creating a New Company"),c.a.createElement("p",null,"This company will be the owner of your new stack."),c.a.createElement("div",{className:"onboarding__header__container__results"},this.context.globalStore.scanned&&this.context.globalStore.selectedTools.map(function(t){return c.a.createElement("img",{key:"header2-".concat(t.id),src:e.context.globalStore.toolImage(t)})}))),c.a.createElement(ot,null)))}}])&&at(n.prototype,o),r&&at(n,r),t}())||nt;lt.contextTypes={globalStore:ye.a.object,navStore:ye.a.object};var ut=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/library/modals/signin/index.jsx f6e8a37ff02cce1afa26bc581c23d53a");function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt,yt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=ft(t).call(this,e))||"object"!==mt(r)&&"function"!=typeof r?dt(o):r).state={errorMsg:null},n.reportErrorMsg=n.reportErrorMsg.bind(dt(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$(document).on("errorMsg",this.reportErrorMsg)}},{key:"componentWillUnmount",value:function(){$(document).off("errorMsg",this.reportErrorMsg)}},{key:"reportErrorMsg",value:function(e,t){var n=this;clearTimeout(this.errorTimeout),this.setState({errorMsg:t}),this.errorTimeout=setTimeout(function(){n.setState({errorMsg:null})},5e3)}},{key:"render",value:function(){return c.a.createElement("div",{className:"error-banner",style:{height:this.state.errorMsg?"50px":0}},this.state.errorMsg)}}])&&pt(n.prototype,o),r&&pt(n,r),t}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kt,St=Object(Ye.a)(bt=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(o=gt(t).call(this))||"object"!==vt(o)&&"function"!=typeof o?wt(n):o).state={signIn:!1},e.goBack=e.goBack.bind(wt(e)),e.closeSignInModal=e.closeSignInModal.bind(wt(e)),e.bindEvents(),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,i["Component"]),n=t,(o=[{key:"bindEvents",value:function(){var e=this;$(document).on("onboarding.sign-in",function(){trackEvent("login",{value:"onboarding"}),e.setState({signIn:!0})}),$(document).on("onboarding.set.stackInfo.image_url",function(t,n){e.context.globalStore.stackInfo.image_url=n})}},{key:"goBack",value:function(){ve.e.push(this.context.navStore.backRoute)}},{key:"closeSignInModal",value:function(){this.setState({signIn:!1})}},{key:"render",value:function(){return c.a.createElement("div",{className:"onboarding"},c.a.createElement(lt,null),c.a.createElement("div",{className:"onboarding__content"},c.a.createElement(yt,null),c.a.createElement("div",{className:"fluid-container"},this.props.children)),this.state.signIn&&c.a.createElement(ut.b,{onDismiss:this.closeSignInModal,redirect:"".concat(Le,"/stack-type")}))}}])&&_t(n.prototype,o),r&&_t(n,r),t}())||bt;function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}St.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var Tt,Pt=Object(Ye.a)(kt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=Ct(t).call(this,e),(n=!r||"object"!==Ot(r)&&"function"!=typeof r?jt(o):r).progressNotesArray=["URL looks good!","Initializing import...","Firing up analysis engine...","Performing super sophisticated analysis..."],n.state={scanUrl:"",scanState:0,urlTaken:!1,takenUrlPath:"",timeouts:{importInterval:0,importTimeout:0},progressBarVerb:"Scanning"},$(document).on("onboarding.clear-scanUrl",function(){n.setState({scanUrl:""})}),n.onChange=n.onChange.bind(jt(n)),n.onBlur=n.onBlur.bind(jt(n)),n.onKeyDown=n.onKeyDown.bind(jt(n)),n.onContinue=n.onContinue.bind(jt(n)),n.onSkip=n.onSkip.bind(jt(n)),n.scanUrl=n.scanUrl.bind(jt(n)),n.serverImportTimeout=n.serverImportTimeout.bind(jt(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$(document).trigger("onboarding.soft-reset"),this.context.navStore.backRoute=void 0}},{key:"componentWillUnmount",value:function(){this.clearIntervals()}},{key:"progressNotes",value:function(){return c.a.createElement("ul",null,this.progressNotesArray.map(function(e,t){return c.a.createElement("li",{key:"progress-note-".concat(t)},e)}))}},{key:"initiateImport",value:function(){var e=this;this.context.globalStore.selectedTools=[],this.setState({scanState:1}),this.setState({timeouts:Object.assign(this.state.timeouts,{importInterval:setInterval(function(){e.checkServerImport()},2e3),importTimeout:setTimeout(function(){e.serverImportTimeout()},3e4)})})}},{key:"serverImportTimeout",value:function(){this.resetScanState(),this.setState({scanState:0}),0===this.context.globalStore.selectedTools.length&&($(document).trigger("errorMsg","We can't find anything, type in another URL or click 'Skip'"),trackEvent("stack.create.scan.siteScan",{value:"empty"}))}},{key:"checkServerImport",value:function(){var e=this,t=this;$.get("/api/v1/analyze",{url:this.state.scanUrl},function(n){n instanceof Array&&0===n.length?e.serverImportTimeout():n instanceof Array&&(trackEvent("stack.create.scan.siteScan",{value:"valid"}),n=n.map(function(e){return e.name}).join(","),$.get("/services/find_all_by_slug",{slugs:n,url:e.state.scanUrl},function(n){var o=!0,r=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;t.context.globalStore.addSelectedTool(s)}}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}t.finished(),t.context.globalStore.scanned=!0;var l=e.state.scanUrl;/^http:|^https:/.test(l)||(l="http://".concat(l)),t.context.globalStore.stackInfo.website_url=l,t.context.globalStore.newCompany.website_url=l}))})}},{key:"finished",value:function(){this.clearIntervals(),this.setState({scanState:2,progressBarVerb:"Done!"})}},{key:"onChange",value:function(e){var t,n,o;this.setState((t={},n=e.target.name,o=e.target.value,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))}},{key:"onBlur",value:function(){this.checkUrl()}},{key:"checkUrl",value:function(e){var t=this;/github\.com\/.+/.test(this.state.scanUrl)?e&&e():$.get("/stacks/url_exists",{url:this.state.scanUrl},function(n){n.claimed?(t.setState({urlTaken:!0,takenUrlPath:n.path}),trackEvent("stack.create.scan.siteScan",{value:"claimed"})):e&&e()})}},{key:"onContinue",value:function(){trackEvent("stack.create.scan.submit",{value:"imported"}),this.context.routerProps.userId?ve.e.push("".concat(Le,"/stack-type")):$(document).trigger("onboarding.sign-in")}},{key:"onSkip",value:function(){trackEvent("stack.create.scan.submit",{value:"skip"}),this.context.routerProps.userId?ve.e.push("".concat(Le,"/stack-type")):$(document).trigger("onboarding.sign-in")}},{key:"onKeyDown",value:function(e){this.setState({urlTaken:!1}),"Enter"===e.key&&this.checkUrl(this.scanUrl.bind(this))}},{key:"clearIntervals",value:function(){clearInterval(this.state.timeouts.importInterval),clearTimeout(this.state.timeouts.importTimeout)}},{key:"resetScanState",value:function(){this.clearIntervals(),this.setState({progressBarVerb:"Scanning"})}},{key:"scanButtonClasses",value:function(){return"button-full ".concat(1===this.state.scanState?"disabled":"")}},{key:"scanUrl",value:function(){this.resetScanState();var e=this,t=new RegExp(/[-a-zA-Z0-9@:%_+.~#?&\/\/=]{2,256}\.[a-z]{2,14}\b(\/[-a-zA-Z0-9@:%_+.~#?&\/\/=]*)?/);this.state.scanUrl.match(t)?(e.setState({scanState:1}),$.ajax({type:"GET",url:"/api/v1/analyze?url=".concat(e.state.scanUrl),contentType:"appication/json",success:function(){e.initiateImport()}})):($(document).trigger("errorMsg","Url format is invalid."),e.setState({scanState:0}),trackEvent("stack.create.scan.siteScan",{value:"invalid"}))}},{key:"doneClass",value:function(){return 2===this.state.scanState?"done":""}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__scan-stack"},c.a.createElement("h3",null,"Scan Your Stack ",c.a.createElement("span",{className:"onboarding__scan-stack--optional"},"(optional)")),c.a.createElement("div",null,c.a.createElement("div",null,"Enter a URL for your company's",c.a.createElement("b",null," website, "),"or the URL for one of your",c.a.createElement("b",null," public GitHub repositories. "),"We'll guess your stack before you create your stack page.")),c.a.createElement("div",{className:"onboarding__scan-stack__container"},c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("input",{type:"text",value:this.state.scanUrl,name:"scanUrl",placeholder:"https://yoursiteurl.com",onBlur:this.onBlur,onChange:this.onChange,onSubmit:this.scanUrl,onKeyPress:this.onKeyDown,onPaste:function(){trackEvent("stack.create.scan.scanUrl",{value:"pasted"})},pattern:"https?://.+\\..+",required:!0}),c.a.createElement("button",{className:this.scanButtonClasses(),onClick:function(){e.checkUrl(e.scanUrl)}},"Scan"),c.a.createElement("button",{className:"button-empty",onClick:this.onSkip},"Skip")),this.state.urlTaken&&c.a.createElement("div",{id:"view-stackexist",className:"onboarding__scan-stack__url-taken"},"This stack already exists."," ",c.a.createElement("a",{href:this.state.takenUrlPath},"Click here to view it.")),this.state.scanState>0&&c.a.createElement("div",null,c.a.createElement("div",{id:"view-stackprogress",className:"onboarding__scan-stack__progress"},c.a.createElement("div",{className:this.doneClass()},this.state.progressBarVerb)),c.a.createElement("div",{className:"onboarding__scan-stack__status ".concat(this.doneClass())},this.progressNotes())),this.context.globalStore.selectedTools.length>0&&2===this.state.scanState&&c.a.createElement("div",{className:"onboarding__scan-stack__tools"},c.a.createElement("h3",null,"Tools we've found"),this.context.globalStore.selectedTools.map(function(e){return c.a.createElement("div",{key:e.id,className:"onboarding__scan-stack__tool hint--top","data-hint":e.name},c.a.createElement("img",{src:e.image_url}))}),c.a.createElement("div",{className:"onboarding__scan-stack__continue"},c.a.createElement("button",{onClick:this.onContinue},"Edit & Save Your Stack")))))}}])&&Nt(n.prototype,o),r&&Nt(n,r),t}())||kt;function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Pt.contextTypes={globalStore:ye.a.object,routerProps:ye.a.object,navStore:ye.a.object};var At=Object(Ye.a)(Tt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rt(this,Mt(t).call(this,e))).state={companiesFetched:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,i["Component"]),n=t,(o=[{key:"setStackOwner",value:function(e){trackEvent("stack.create.stackType.submit",{value:"personal"===e?"personal":"business"}),this.context.globalStore.stackOwner=e,ve.e.push("".concat(Le,"/stack-info"))}},{key:"componentDidMount",value:function(){var e=this;$.get("/api/v1/companies/index",function(t){e.context.globalStore.companies=[],t.forEach(function(t){t.type="company",e.context.globalStore.addCompany(t)}),e.setState({companiesFetched:!0})}),this.context.navStore.backRoute="".concat(Le,"/scan")}},{key:"companyImgPath",value:function(e){return e.image_url||we}},{key:"toNewCompanyPage",value:function(){trackEvent("stack.create.stackType.submit",{value:"newCompany"}),ve.e.push("".concat(Le,"/new-company"))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__stack-type"},c.a.createElement("div",{className:"onboarding__stack-type__tile new-company",onClick:this.toNewCompanyPage},c.a.createElement("div",{className:"onboarding__stack-type__tile--horiz"},c.a.createElement("img",{src:Ee}),c.a.createElement("h3",null,"New Company"))),c.a.createElement("div",{className:"onboarding__stack-type__tile",onClick:function(){return e.setStackOwner("personal")}},c.a.createElement("div",{className:"onboarding__stack-type__tile--horiz personal"},c.a.createElement("img",{src:this.context.routerProps.userImg}),c.a.createElement("h3",null,"Personal"))),!this.state.companiesFetched&&c.a.createElement("div",{className:"onboarding__stack-type__tile"},c.a.createElement("div",{className:"onboarding__stack-type__tile--horiz loading"},c.a.createElement("h3",null,"Fetching Companies"))),this.context.globalStore.companies.map(function(t){return c.a.createElement("div",{key:t.id,className:"onboarding__stack-type__tile",onClick:function(){return e.setStackOwner(t.id)}},c.a.createElement("div",{className:"onboarding__stack-type__tile--horiz"},c.a.createElement("img",{src:e.companyImgPath(t)}),c.a.createElement("h3",null,"Company"),c.a.createElement("p",null,t.name)))}))}}])&&Ft(n.prototype,o),r&&Ft(n,r),t}())||Tt;At.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var Lt,Dt={validate:function(e){var t={required:[],invalid:[]};if(e.each(function(e,n){(n=$(n)).attr("required")&&""===n.val()?(t.required.push(n.prev().text()),n.addClass("error")):n.attr("required")&&!n.val().match(new RegExp(n.attr("pattern")))&&(t.invalid.push(n.prev().text()),n.addClass("error"))}),t.required.length>0||t.invalid.length>0){var n="";return t.required.length>0&&(n="".concat(t.required.join(", ")," ").concat(1===t.required.length?"is":"are"," required. ")),t.invalid.length>0&&(n="".concat(n,"Please input a valid ").concat(t.invalid.join(", "),".")),$(document).trigger("errorMsg",n),!1}return!0},parseErrors:function(e){var t="";for(var n in e){$("input[name=".concat(n,"]")).addClass("error");var o="".concat(n[0].toUpperCase()).concat(n.substr(1));t+="".concat(o," ").concat(e[n].join(", "),".")}$(document).trigger("errorMsg",t)}},Ut=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/library/uploadcare/uploader.jsx"),$t=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/library/uploadcare/styles.jsx");function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jt,Gt=Object(Ye.a)(Lt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Wt(t).call(this,e))||"object"!==Bt(r)&&"function"!=typeof r?Vt(o):r).state={nameCollision:!1,clearImage:!1},n.submitForm=n.submitForm.bind(Vt(n)),n.onChange=n.onChange.bind(Vt(n)),n.validateName=n.validateName.bind(Vt(n)),n._el=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.context.globalStore.stackOwner?(this.validateName(),this.context.navStore.backRoute="".concat(Le,"/stack-type")):ve.e.push("".concat(Le,"/stack-type"))}},{key:"onChange",value:function(e){this.context.globalStore.stackInfo.image_url=$("input[name=image_url]").val(),this.context.globalStore.stackInfo[e.target.name]=e.target.value,$(e.target).removeClass("error").parent().removeClass("name-collision")}},{key:"validateName",value:function(e,t){var n=this,o="newcompany"===this.context.globalStore.stackOwner?this.context.globalStore.newCompany.id:this.context.globalStore.stackOwner;$.get("/api/v1/stacks/name_is_available",{owner:o,name:this.context.globalStore.stackInfo.name},function(e){t&&e?ve.e.push("".concat(Le,"/tool-selection")):t&&!e&&$(document).trigger("errorMsg","Stack name is already taken."),e||$(n.refs.stackInfoName).addClass("error").parent().addClass("name-collision")})}},{key:"onFocus",value:function(e){trackEvent("stack.create.stackDetails.edit",{value:e.target.name})}},{key:"submitForm",value:function(){this.context.globalStore.stackInfo.image_url=$("input[name=image_url]").val(),Dt.validate($(this._el).find("input[type=text]"))?(trackEvent("stack.create.stackDetails.submit"),this.validateName(null,!0)):trackEvent("stack.create.stackDetails.submitErr"),this.setState({clearImage:!0})}},{key:"ownerPictureClass",value:function(){return"personal"===this.context.globalStore.stackOwner?"personal":"company"}},{key:"render",value:function(){var e=this;return this.context.globalStore.stackOwner?c.a.createElement("div",{className:"onboarding__stack-info",ref:function(t){return e._el=t}},c.a.createElement("div",{className:"onboarding__form-wrapper"},c.a.createElement("div",{className:"onboarding__input-container nowrap"},c.a.createElement("div",{className:"onboarding__input-container inline"},c.a.createElement("h5",null,"Stack Owner"),c.a.createElement("div",{className:"onboarding__input-container--owner"},c.a.createElement("input",{value:this.context.globalStore.ownerName,name:"owner",readOnly:!0}),c.a.createElement("img",{className:this.ownerPictureClass(),src:Te(this.context.globalStore.ownerImage)}))),c.a.createElement("div",{className:"react__input-owner-divider"},"/"),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Stack Name"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.name,name:"name",placeholder:"Name",onChange:this.onChange,onFocus:this.onFocus,onBlur:function(t){return e.validateName(t)},ref:"stackInfoName",type:"text",pattern:".{3,}",required:!0}))),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Description"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.description,name:"description",placeholder:"Stack Description",onChange:this.onChange,onFocus:this.onFocus,type:"text",pattern:".{3,}"})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Website or GitHub Repo URL"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.website_url,name:"website_url",placeholder:"Website or GitHub URL",onChange:this.onChange,onClick:this.onFocus,type:"text",pattern:".{3,}\\..{2,}"})),c.a.createElement($t.b,null,c.a.createElement($t.a,null,"Stack Logo or Image"),c.a.createElement(Ut.a,{clearImage:this.state.clearImage,onChange:this.onChange,onFocus:this.onFocus,id:"file",name:"image_url","data-crop":"1:1",value:this.context.globalStore.stackInfo.image_url})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("button",{className:"onboarding__form-wrapper__button",onClick:this.submitForm},"Continue")))):null}}])&&qt(n.prototype,o),r&&qt(n,r),t}())||Lt;function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Gt.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var en=Object(Ye.a)(Jt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Zt(t).call(this,e))||"object"!==Kt(r)&&"function"!=typeof r?Xt(o):r).state={needsValidation:!1,alreadyExists:!1,saving:!1,clearImage:!1},n.onChange=n.onChange.bind(Xt(n)),n.validateCompanyName=n.validateCompanyName.bind(Xt(n)),n.parseEmail=n.parseEmail.bind(Xt(n)),n.updateCompany=n.updateCompany.bind(Xt(n)),n.toStackInfo=n.toStackInfo.bind(Xt(n)),n._el=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.context.navStore.backRoute="".concat(Le,"/stack-type"),this.parseEmail(),uploadcare.initialize()}},{key:"onChange",value:function(e){this.context.globalStore.newCompany.image_url=$("input[name=image_url]").val(),this.context.globalStore.newCompany[e.target.name]=e.target.value,$(e.target).removeClass("error").parent().removeClass("name-collision")}},{key:"validateCompanyName",value:function(e){var t=e.target;$.get("/companies/exists",{company_name:this.context.globalStore.newCompany.name},function(e){e.exists&&($(t).addClass("error").parent().addClass("name-collision"),trackEvent("tack.create.stackType.newCompany.editErr",{value:"name-collision"}))})}},{key:"parseEmail",value:function(){if(this.context.globalStore.newCompany.email_address.match(/.+@.+\..+/)){var e,t,n=/[a-zA-Z0-9]+\..+$/;try{e=this.context.globalStore.newCompany.website_url.match(n)[0].toLowerCase()}catch(t){e=""}try{t=this.context.globalStore.newCompany.email_address.match(n)[0].toLowerCase()}catch(e){t=""}e!==t?this.setState({needsValidation:!0}):this.setState({needsValidation:!1})}}},{key:"toStackInfo",value:function(){this.setState({saving:!1}),ve.e.push("".concat(Le,"/stack-info"))}},{key:"submitForm",value:function(){this.context.globalStore.newCompany.image_url=$("input[name=image_url]").val(),Dt.validate($(this._el).find("input[type=text]"))&&(this.context.globalStore.stackOwner="newcompany",this.context.globalStore.newCompany.id?this.setState({alreadyExists:!0}):this.saveCompany()),this.setState({clearImage:!0})}},{key:"saveCompany",value:function(){var e=this;this.setState({saving:!0}),$.post("/api/v1/companies/create",{company:Object(_e.n)(this.context.globalStore.newCompany)},function(t){trackEvent("stack.create.stackType.newCompany.submit"),e.context.globalStore.stackInfo.name=e.context.globalStore.newCompany.name,e.context.globalStore.stackInfo.image_url=e.context.globalStore.newCompany.image_url,e.context.globalStore.stackInfo.website_url=e.context.globalStore.newCompany.website_url,e.context.globalStore.newCompany.id=t,e.toStackInfo()}).fail(function(e){trackEvent("stack.create.stackType.newCompany.submitErr"),Dt.parseErrors(e.responseJSON)})}},{key:"updateCompany",value:function(){var e=this;$.post("/api/v1/onboarding/update_company",{company:Object(_e.n)(this.context.globalStore.newCompany)},function(){e.toStackInfo()}).fail(function(e){Dt.parseErrors(e.responseJSON)})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__new-company",ref:function(t){return e._el=t}},c.a.createElement("div",{className:"onboarding__form-wrapper"},c.a.createElement("h3",null,"New Company"),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Name"),c.a.createElement("input",{value:this.context.globalStore.newCompany.name,name:"name",placeholder:"Company Name",onChange:this.onChange,onBlur:this.validateCompanyName,type:"text",pattern:".{3,}",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Website"),c.a.createElement("input",{value:this.context.globalStore.newCompany.website_url,name:"website_url",placeholder:"Company Website",onChange:this.onChange,type:"text",pattern:".+\\..+",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Description"),c.a.createElement("input",{value:this.context.globalStore.newCompany.description,name:"description",placeholder:"Company description",onChange:this.onChange,type:"text",pattern:".{3,}",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"AngelList Profile URL"),c.a.createElement("input",{value:this.context.globalStore.newCompany.angellist_url,name:"angellist_url",placeholder:'e.g. "http://angel.co/stackshare"',onChange:this.onChange,type:"text",pattern:".+\\..+"})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Email Address"),c.a.createElement("input",{value:this.context.globalStore.newCompany.email_address,name:"email_address",placeholder:"Company email",onChange:this.onChange,onBlur:this.parseEmail,type:"text",pattern:".+@.+\\..+",required:!0}),this.state.needsValidation&&c.a.createElement("p",{className:"onboarding__input-container__domain-match"},"Your email address doesn't match the domain address you entered for your company website. We'll need to manually verify that you work for the company in order to get a 'Verified' badge on your stack. We'll send you an email once you've been verified.")),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Twitter Username"),c.a.createElement("input",{value:this.context.globalStore.newCompany.twitter_username,name:"twitter_username",placeholder:"@username",onChange:this.onChange,type:"text",pattern:".{2,}"})),c.a.createElement($t.b,null,c.a.createElement($t.a,null,"Company Logo or Image"),c.a.createElement(Ut.a,{clearImage:this.state.clearImage,id:"file",name:"image_url","data-crop":"1:1",value:this.context.globalStore.newCompany.image_url})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("button",{className:"onboarding__form-wrapper__button",onClick:function(){e.submitForm()}},"Continue"))),this.state.alreadyExists&&c.a.createElement("div",null,c.a.createElement("div",{className:"react-overlay",onClick:function(){return e.setState({alreadyExists:!1})}}),c.a.createElement("div",{className:"react-overlay__modal"},c.a.createElement("div",{className:"x-corner-close-button",onClick:function(){return e.setState({alreadyExists:!1})}}),c.a.createElement("h3",null,"This company already exists"),c.a.createElement("p",null,"Would you like to update ",this.context.globalStore.newCompany.name," or continue with the stack creation of the existing company?"),c.a.createElement("button",{className:"onboarding__edit-btn",onClick:this.updateCompany},"Update Company"),c.a.createElement("button",{className:"onboarding__continue-btn",onClick:this.toStackInfo},"Continue"))))}}])&&Yt(n.prototype,o),r&&Yt(n,r),t}())||Jt;function tn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}en.contextTypes={globalStore:ye.a.object,navStore:ye.a.object};var nn,on=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=n,this.globalStore=t,t.popularTools instanceof Array||(this.globalStore.popularTools=[],this.popularTools=[],$(document).trigger("builder.popularTools.loaded"))}var t,n,o;return t=e,(n=[{key:"addDefaultTools",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var n=new RegExp(t,"i"),o=e.popularTools.find(function(e){return n.test(e.name)});o&&e.addSelectedTool(o)}),$(document).trigger("builder.tool.added")}},{key:"searchPopularTools",value:function(e){if(""===e)return[];var t=this.globalStore.popularTools||this.popularTools,n=new RegExp(e.replace(" ",".*\\s.*"),"i");return t.filter(function(e){return n.test(e.name)})}}])&&tn(t.prototype,n),o&&tn(t,o),e}();function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un,mn,pn=Object(Ye.a)(nn=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=cn(t).call(this,e))||"object"!==rn(r)&&"function"!=typeof r?sn(o):r).state={name:n.props.name,url:"",saving:!1},n.createTool=n.createTool.bind(sn(n)),n.refocus=n.refocus.bind(sn(n)),n.onChange=n.onChange.bind(sn(n)),n.onKeyDown=n.onKeyDown.bind(sn(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.refs.urlInput.focus()}},{key:"refocus",value:function(){this.props.resetToolName()}},{key:"onChange",value:function(e){var t,n,o;this.setState((t={},n=e.target.name,o=e.target.value,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&this.createTool(),"Escape"===e.key&&this.refocus()}},{key:"createTool",value:function(){var e=this,t=$(this.refs.urlInput);if(!t.val().match(/.+\..+/))return t.addClass("error").focus(),void $(document).trigger("errorMsg","Invalid URL");this.setState({saving:!0}),$.ajax({type:"POST",url:"/api/v1/services/create",data:{service:{name:this.state.name,website_url:this.state.url}},success:function(t){e.setState({saving:!1}),e.context.globalStore.addSelectedTool(t),e.props.resetToolName()},dataType:"json"}).fail(function(t){e.setState({saving:!1}),Dt.parseErrors(t.responseJSON)})}},{key:"render",value:function(){return c.a.createElement("li",{className:"builder-wrap__incomplete-tool builder-wrap__builder__tool-selection"},this.state.saving&&c.a.createElement("span",null,"Saving..."),!this.state.saving&&c.a.createElement("div",null,c.a.createElement("span",null,this.state.name),c.a.createElement("div",{className:"onboarding-overlay",onClick:this.refocus}),c.a.createElement("div",{className:"builder-wrap__incomplete-tool__popup"},c.a.createElement("span",null,"New Tool"),c.a.createElement("input",{className:"builder-wrap__incomplete-tool__discrete-input",placeholder:"New tool name",name:"name",value:this.state.name,onChange:this.onChange,onKeyDown:this.onKeyDown}),c.a.createElement("input",{className:"builder-wrap__incomplete-tool__url-input",name:"url",ref:"urlInput",placeholder:"Website URL",onChange:this.onChange,pattern:".+\\..+",onKeyDown:this.onKeyDown,required:!0}),c.a.createElement("button",{onClick:this.createTool},"Add New Tool"),c.a.createElement("div",{className:"x-corner-close-button",onClick:this.refocus}))))}}])&&an(n.prototype,o),r&&an(n,r),t}())||nn;function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pn.contextTypes={globalStore:ye.a.object};var vn,_n=Object(Ye.a)(un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hn(this,bn(t).call(this,e))).getElementClassName=function(e){var t=n.props.baseClassName;return t?"".concat(t,"__").concat(e):""},n.onToolsMouseUp=function(){n.toolsMouseDown=!1},n.updateDimensions=function(){if(!0!==n.props.multiline){var e=innerWidth<700;n.state.multiline!==e&&n.setState({multiline:e})}},n.eventSetMultiline=function(e,t){n.setState({multiline:t.state})},n.handleKeydown=function(e){"m"===e.key&&e.ctrlKey&&(n.setState({multiline:!n.state.multiline}),n.updateToolBar())},n.onToolsMouseDown=function(e){n.toolsMouseDown=!0,n.toolsMouseDownX=e.pageX-parseInt(n.refs.builder.style.left)||0},n.onToolsMouseMove=function(e){var t=-(n.refs.builder.offsetWidth-n.refs.sliderWrap.clientWidth);n.toolsMouseDown&&(n.refs.builder.style.left=Math.max(Math.min(e.pageX-n.toolsMouseDownX,0),t)+"px",e.preventDefault())},n.resetToolName=function(){n.setState({newToolName:null})},n.setMouseActive=function(){n.setState({resultsSelector:"mouse"})},n.toggleToolRequired=function(e){e.required=!e.required,n.forceUpdate(),n.context.globalStore.saveSelectedTools()},n.selectedToolsSaved=function(){n.context.globalStore.saveState&&(n.context.globalStore.saveState=xe)},n.clearSearchResults=function(){clearTimeout(n.state.timeouts.searchTimeout),n.setState({searchResults:[],searchInput:"",querying:!1,selectedIndex:-1}),n.refs.searchInput.focus()},n.addSearchResult=function(e){-1===n.state.searchResults.findIndex(function(t){return t.id===e.id})&&""!==n.state.searchInput&&n.state.searchResults.push(e)},n.searchChange=function(e){clearTimeout(n.state.timeouts.searchTimeout),""!==e.target.value?(n.setState({searchInput:e.target.value}),n.search(e.target.value)):n.clearSearchResults()},n.search=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.searchInput;e&&""!==e&&(n.setState({searchResults:mn.searchPopularTools(e),querying:!0}),n.setState({timeouts:Object.assign(n.state.timeouts,{searchTimeout:setTimeout(function(){n.client=algoliasearch(window._ALGOLIA_ID,window._ALGOLIA_API_KEY),n.index=n.client.initIndex(window._SERVICES_INDEX),n.index.setSettings({searchableAttributes:["name","slug","name_aliases"]}),n.index.search(n.state.searchInput,{facets:"*",attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:20},function(e,t){if(0!==t.nbHits){var o=!0,r=!1,a=void 0;try{for(var i,c=t.hits[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;n.addSearchResult(s)}}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}}n.setState({querying:!1})})},500)})}))},n.searchKeyDown=function(e){var t,o,r=function(){n.state.selectedIndex>=n.state.searchResults.length-1||(n.setState({selectedIndex:n.state.selectedIndex+1}),t=$(".match__builder-wrap__search-results"),(o=$(".match__builder-wrap__search-results li").eq(0).outerHeight())*(n.state.selectedIndex+2)>t.outerHeight()&&t.scrollTop(o*(n.state.selectedIndex+2)-t.outerHeight()),n.setState({resultsSelector:"keyboard"}))},a=function(){n.state.selectedIndex<=-1||(n.setState({selectedIndex:n.state.selectedIndex-1}),t=$(".match__builder-wrap__search-results"),(o=$(".match__builder-wrap__search-results li").eq(0).outerHeight())*(n.state.selectedIndex-1)<t.scrollTop()&&t.scrollTop(o*(n.state.selectedIndex-1)),n.setState({resultsSelector:"keyboard"}))};switch(e.key){case"ArrowDown":e.preventDefault(),r();break;case"ArrowUp":e.preventDefault(),a();break;case"p":e.ctrlKey&&(e.preventDefault(),a());break;case"n":e.ctrlKey&&(e.preventDefault(),r());break;case"Enter":-1!==n.state.selectedIndex&&n.addSelectedTool(n.state.searchResults[n.state.selectedIndex]);break;case"Backspace":n.context.globalStore[n.opts.selectedToolsField].length>0&&0===n.state.searchInput.length&&n.removeSelectedTool(n.context.globalStore[n.opts.selectedToolsField][n.context.globalStore[n.opts.selectedToolsField].length-1]);break;case"Escape":n.clearSearchResults()}},n.addSelectedTool=function(e){n.opts.addFunction(e),n.clearSearchResults(),setTimeout(function(){n.updateToolBar(),n.context.globalStore.saveState=Ce,n.slide(-n.refs.builder.offsetWidth-1e3)}),setTimeout(function(){$(document).trigger("builder.tool.added")},300)},n.removeSelectedTool=function(e){n.opts.removeFunction(e),setTimeout(function(){n.updateToolBar(),n.context.globalStore.saveState=Ce,n.setState({saveState:Ce})}),setTimeout(function(){$(document).trigger("builder.tool.removed")},300)},n.focusInput=function(e){$(e.target).hasClass("builder-wrap__tool")||$("input[name='servicesSearchInput']").focus()},n.opts=Object.assign({selectedToolsField:"selectedTools",appendedChild:null},e),n.state={searchResults:[],searchInput:"",querying:!1,selectedIndex:-1,timeouts:{},resultsSelector:"mouse",multiline:!!n.props.multiline,newToolName:null,left:"",removeUnapproved:n.props.removeUnapproved||!1},n.toolsMouseDown=!1,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;mn=new on(this.context.globalStore,{defaultTools:this.opts.defaultTools,selectedToolsField:this.opts.selectedToolsField}),this.opts.addFunction=(this.props.addFunction||this.context.globalStore.addSelectedTool).bind(this.context.globalStore),this.opts.removeFunction=(this.props.removeFunction||this.context.globalStore.removeSelectedTool).bind(this.context.globalStore),document.addEventListener("resize",this.updateDimensions),document.addEventListener("keydown",this.handleKeydown),document.addEventListener("match.selected-tools-saved",this.selectedToolsSaved),document.addEventListener("mouseup",this.onToolsMouseUp),document.addEventListener("mousemove",function(t){e.toolsMouseDown&&e.onToolsMouseMove(t)}),document.addEventListener("builder.popularTools.loaded",function(){e.search()}),document.addEventListener("builder.multiline.set",this.eventSetMultiline),this.refs.builder.addEventListener("transitionend",function(){$(e.refs.builder).removeClass("sliding")},!1),this.updateDimensions(),this.updateToolBar(),this.slide(-this.refs.builder.offsetWidth-1e3)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("mouseup",this.onToolsMouseUp),document.removeEventListener("builder.multiline.set",this.eventSetMultiline),document.removeEventListener("resize",this.updateDimensions)}},{key:"componentWillReact",value:function(){this.updateToolBar()}},{key:"updateToolBar",value:function(){this.refs.sliderWrap.clientWidth<this.refs.builder.offsetWidth?$(this.refs.sliderWrap).addClass("overflowed"):$(this.refs.sliderWrap).removeClass("overflowed")}},{key:"slide",value:function(e){var t=this.refs.builder.offsetWidth-this.refs.sliderWrap.clientWidth,n=Math.min(Math.max(e,-t),0);$(this.refs.builder).addClass("sliding"),this.setState({left:"".concat(n,"px")})}},{key:"render",value:function(){var e=this,t=this.state.searchResults.map(function(t,n){if(t.is_approved||!e.state.removeUnapproved)return c.a.createElement("li",{key:"search-result-".concat(t.id),onClick:function(){return e.addSelectedTool(t)},onMouseEnter:e.setMouseActive,className:e.state.selectedIndex===n?"selected":void 0},c.a.createElement("img",{src:Te(t.image_url)}),t.name,0===t.is_approved&&c.a.createElement("span",{style:{marginLeft:"15px",padding:"2px 11px",color:"white",borderRadius:".25em",backgroundColor:"rgb(206, 206, 206)",fontSize:"10px"}},"Unapproved"))});this.props.canCreateTools&&!this.state.querying&&this.state.searchInput&&!this.state.searchResults.find(function(t){return t.name.toLowerCase()===e.state.searchInput.toLowerCase()})&&t.unshift(c.a.createElement("li",{className:"new-wrapper",key:"search-result-new",onClick:function(){e.setState({newToolName:e.state.searchInput}),e.clearSearchResults()}},c.a.createElement("span",{className:"new"},"New"),this.state.searchInput));var n=c.a.createElement("input",{placeholder:this.props.placeholder,onChange:this.searchChange,onKeyDown:this.searchKeyDown,name:this.props.selectedToolsField||"servicesSearchInput",value:this.state.searchInput,ref:"searchInput",className:this.getElementClassName("input")});return c.a.createElement("div",{onClick:this.focusInput,className:["builder-wrap".concat(this.state.multiline?" multiline":""),this.getElementClassName("list")].join(" ")},c.a.createElement("div",{className:"builder-wrap__slider-wrap",ref:"sliderWrap"},c.a.createElement("ul",{className:"builder-wrap__builder",onMouseDown:this.onToolsMouseDown,ref:"builder",style:{left:this.state.left}},this.context.globalStore[this.opts.selectedToolsField].map(function(t){return c.a.createElement("li",{key:"builder-tool-".concat(t.id),className:e.getElementClassName("list__item")},c.a.createElement("img",{src:t.image_url}),c.a.createElement("span",null,t.name),c.a.createElement("div",{className:"builder-wrap__tool",onClick:function(){return e.removeSelectedTool(t)}}),c.a.createElement("div",{className:"hint--right--hide","data-hint":"Required"},c.a.createElement("div",{className:"pulse pulse-animation".concat(t.required?"":" not-required"),onClick:function(){return e.toggleToolRequired(t)}}),c.a.createElement("span",{className:"after-required"})))})),this.state.multiline&&n,this.state.multiline&&this.props.appendedChild),null!==this.state.newToolName&&c.a.createElement(pn,{name:this.state.newToolName,resetToolName:this.resetToolName}),c.a.createElement("div",{className:"builder-wrap__slider-arrows"},c.a.createElement("div",{className:"slider-back",onClick:function(){return e.slide((parseInt(e.refs.builder.style.left)||0)+200)}}),c.a.createElement("div",{className:"slider-forward",onClick:function(){return e.slide((parseInt(e.refs.builder.style.left)||0)-200)}})),!this.state.multiline&&n,!this.state.multiline&&this.props.appendedChild,(t.length>0||this.state.querying)&&c.a.createElement("div",null,c.a.createElement("div",{className:"react-invisible-overlay",onClick:this.clearSearchResults}),c.a.createElement("ul",{className:"builder-wrap__search-results ".concat(this.state.resultsSelector)},t,this.state.querying&&c.a.createElement("div",{className:"loading"},c.a.createElement("span",null,"Searching..."),c.a.createElement("img",{src:"https://img.stackshare.io/fe/spinner.svg"})))))}}])&&dn(n.prototype,o),r&&dn(n,r),t}())||un;function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_n.contextTypes={globalStore:ye.a.object},_n.propTypes={baseClassName:ye.a.string,multiline:ye.a.bool,removeUnapproved:ye.a.bool,addFunction:ye.a.func,removeFunction:ye.a.func,canCreateTools:ye.a.bool,placeholder:ye.a.string,selectedToolsField:ye.a.string};var On=Object(Ye.a)(vn=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=En(t).call(this,e))||"object"!==gn(r)&&"function"!=typeof r?kn(o):r).state={popularTools:[],searchedTools:[],lastRequest:0,requestTimeout:void 0,searchResults:[],showResults:!1,searchResultIndex:-1,newToolName:null,toolSearchInputText:""},n.onChange=n.onChange.bind(kn(n)),n.onKeyPress=n.onKeyPress.bind(kn(n)),n.dropDownSelectTool=n.dropDownSelectTool.bind(kn(n)),n.getOptions=n.getOptions.bind(kn(n)),n.removeTool=n.removeTool.bind(kn(n)),n.isToolSelected=n.isToolSelected.bind(kn(n)),n.searchResultClass=n.searchResultClass.bind(kn(n)),n.resetToolName=n.resetToolName.bind(kn(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;$.get("/api/v1/services/popular_services",function(t){e.setState({popularTools:t})}),this.context.navStore.backRoute="".concat(Le,"/stack-info")}},{key:"resetToolName",value:function(){this.setState({newToolName:null})}},{key:"addTool",value:function(e){this.context.globalStore.addSelectedTool(e),this.setState({searchResults:[],toolSearchInputText:""})}},{key:"removeTool",value:function(e){this.context.globalStore.removeTool(e),this.forceUpdate(),this.refs.toolSearchInput.focus()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._blurTimeout)}},{key:"dropDownSelectTool",value:function(e){this.addSelectedTool(e.value)}},{key:"getOptions",value:function(e){return fetch("/api/v1/services/search?q="+e).then(function(e){return e.json()}).then(function(e){var t=[];for(var n in e){var o=e[n];t.push({value:o,label:o.name})}return{options:t}})}},{key:"shouldSendRequest",value:function(){return(new Date).getTime()-this.state.lastRequest>2e3}},{key:"onChange",value:function(e){var t,n,o,r=this;e=e.nativeEvent,this.setState((t={},n=e.target.name,o=e.target.value,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),clearTimeout(this.state.requestTimeout),""!==e.target.value?this.setState({requestTimeout:setTimeout(function(){$.get("/api/v1/services/search",{q:e.target.value},function(e){e=e||[],r.setState({searchResults:e,requestTimeout:void 0,searchResultIndex:-1})})},1e3),searchResults:[]}):this.setState({requestTimeout:void 0,searchResults:[],searchResultIndex:-1})}},{key:"onContinue",value:function(){trackEvent("stack.create.toolsList.submit"),ve.e.push("".concat(Le,"/tool-details"))}},{key:"onKeyPress",value:function(e){"ArrowDown"===(e=e.nativeEvent).key?this.setState({searchResultIndex:Math.min(this.state.searchResultIndex+1,this.state.searchResults.length)}):"ArrowUp"===e.key?this.setState({searchResultIndex:Math.max(this.state.searchResultIndex-1,0)}):"Enter"===e.key&&this.state.searchResultIndex>-1?this.addTool(this.state.searchResults[this.state.searchResultIndex]):"Escape"===e.key&&this.setState({searchResultIndex:-1})}},{key:"searchResultClass",value:function(e){return this.state.searchResultIndex===this.state.searchResults.indexOf(e)?"active":""}},{key:"isToolSelected",value:function(e){return-1!==this.context.globalStore.selectedTools.findIndex(function(t){return t.id===e.id})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__tool-selection"},c.a.createElement("h1",null,"Build Your Stack"),c.a.createElement("p",{className:"subheader"},"Search for or select the tools & services you use in this stack"),c.a.createElement("br",null),c.a.createElement(_n,{canCreateTools:!0,multiline:!1,placeholder:"Search & add tools"}),c.a.createElement("div",{className:"submit-links-container tools-selection-continue-container"},c.a.createElement("div",{className:"submit-links"},this.context.globalStore.selectedTools.length>0&&c.a.createElement("button",{className:"btn btn-ss-alt btn-lg",onClick:this.onContinue},"Continue"))),c.a.createElement("div",{className:"onboarding__tool-selection__popular-tools"},c.a.createElement("h3",null,"Popular Tools"),this.state.popularTools.map(function(t){return-1===e.context.globalStore.selectedTools.findIndex(function(e){return e.id===t.id})?c.a.createElement("div",{key:"toolselection-tool-".concat(t.id),className:"onboarding__tool-selection__tool hint--top","data-hint":t.name,onClick:function(){return e.addTool(t)}},c.a.createElement("img",{src:t.image_url})):c.a.createElement("div",{key:"toolselection-tool-".concat(t.id),className:"onboarding__tool-selection__tool remove hint--top","data-hint":t.name,onClick:function(){return e.removeTool(t)}},c.a.createElement("img",{src:t.image_url}))}),0===this.state.popularTools.length&&c.a.createElement("img",{src:ke,className:"onboarding__tool-selection__loading"})))}}])&&wn(n.prototype,o),r&&wn(n,r),t}())||vn;function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}On.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var Pn,In=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=jn(t).call(this,e))||"object"!==Nn(r)&&"function"!=typeof r?xn(o):r).state={active:!1,votes:e.reason.cached_votes_total,user_voted:e.reason.user_voted},n.voteToggle=n.voteToggle.bind(xn(n)),n.upvoteClass=n.upvoteClass.bind(xn(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,i["Component"]),n=t,(o=[{key:"upvoteClass",value:function(){return this.state.user_voted?"active":""}},{key:"voteToggle",value:function(){var e=this.state.votes+(this.state.user_voted?-1:1);this.setState({user_voted:!this.state.user_voted,votes:e});var t=this.state.user_voted?"-1":"1";$.post("/api/v1/reasons/toggle_vote",{id:this.props.reason.id,vote:t})}},{key:"render",value:function(){return c.a.createElement("div",{className:"one-liner"},c.a.createElement("div",{onClick:this.voteToggle,className:this.upvoteClass()},c.a.createElement("i",{className:"fa fa-arrow-circle-up","aria-hidden":"true"})," ",this.state.votes),c.a.createElement("span",{className:"onboarding-reason-text"},this.props.reason.text))}}])&&Cn(n.prototype,o),r&&Cn(n,r),t}();function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ln,Dn=Object(Ye.a)(Pn=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Mn(t).call(this,e))||"object"!==Fn(r)&&"function"!=typeof r?zn(o):r).state={toolsWidth:"auto",sliderLeft:0},n.handleResize=n.handleResize.bind(zn(n)),n.nextTools=n.nextTools.bind(zn(n)),n.prevTools=n.prevTools.bind(zn(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){addEventListener("resize",this.handleResize),this.calculateToolWidth()}},{key:"componentWillUnmount",value:function(){removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.calculateToolWidth()}},{key:"calculateToolWidth",value:function(){var e=$(".onboarding__details").width(),t=Math.max(320*Math.floor(e/320),320);this.setState({toolsWidth:t})}},{key:"nextTools",value:function(){var e=-320*this.context.globalStore.selectedTools.filter(function(e){return e.reasons.length>0}).length+this.state.toolsWidth;this.setState({sliderLeft:Math.max(this.state.sliderLeft-this.state.toolsWidth,e)})}},{key:"prevTools",value:function(){this.setState({sliderLeft:Math.min(this.state.sliderLeft+this.state.toolsWidth,0)})}},{key:"render",value:function(){var e=this.context.globalStore.selectedTools.map(function(e){return e.reasons.length>0?c.a.createElement("div",{key:"details-tool-".concat(e.id),className:"onboarding__details__tool"},c.a.createElement("div",{className:"step-cont service-logo"},c.a.createElement("img",{src:e.image_url,width:50,height:50}),c.a.createElement("h3",null,e.name),e.reasons.slice(0,5).map(function(e){return c.a.createElement(In,{key:"toolreason-".concat(e.id),reason:e})}))):null}).filter(function(e){return e});return c.a.createElement("div",{className:"onboarding__details"},c.a.createElement("h1",null,"Vote For Tools"),c.a.createElement("p",{className:"subheader"},"Vote for why you use the tools in your stack"),c.a.createElement("br",null),c.a.createElement("div",{className:"onboarding__details__arrow onboarding__details__arrow--left",onClick:this.prevTools}),c.a.createElement("div",{className:"onboarding__details__arrow onboarding__details__arrow--right",onClick:this.nextTools}),c.a.createElement("div",{className:"onboarding__details__tools",style:{width:this.state.toolsWidth}},c.a.createElement("div",{className:"onboarding__details__tool-slider",style:{left:this.state.sliderLeft}},e),0===e.length&&c.a.createElement("img",{src:ke,className:"onboarding__details__loading"})))}}])&&Rn(n.prototype,o),r&&Rn(n,r),t}())||Pn;function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dn.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var Vn,Hn=Object(Ye.a)(Ln=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Bn(t).call(this,e))||"object"!==Un(r)&&"function"!=typeof r?qn(o):r).state={saving:!1},n.save=n.save.bind(qn(n)),n.saveBtnClass=n.saveBtnClass.bind(qn(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;if(0===this.context.globalStore.selectedTools.length)return ve.e.push("".concat(Le,"/tool-selection")),void $(document).trigger("errorMsg","You need to add tools to your stack before proceeding to this page.");var t=[],n=!0,o=!1,r=void 0;try{for(var a,i=this.context.globalStore.selectedTools[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.reasons instanceof Array&&0!==c.reasons.length||t.push(c)}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}$.get("/api/v1/services/reasons",{service_ids:t.map(function(e){return e.id})},function(t){var n,o=!0,r=!1,a=void 0;try{for(var i,c=function(){var t=i.value;-1!==(n=e.context.globalStore.selectedTools.findIndex(function(e){return e.id===t.id}))&&(e.context.globalStore.selectedTools[n].reasons=t.reasons)},s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0)c()}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}e.forceUpdate()}),this.context.navStore.backRoute="".concat(Le,"/tool-selection")}},{key:"save",value:function(){this.state.saving||(this.setState({saving:!0}),trackEvent("stack.create.toolDetails.submit"),this.context.globalStore.saveStack())}},{key:"saveBtnClass",value:function(){return"btn btn-ss-alt btn-lg ".concat(this.state.saving&&"disabled")}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Dn,null),c.a.createElement("div",{className:"submit-links-container"},c.a.createElement("div",{className:"submit-links"},c.a.createElement("button",{className:this.saveBtnClass(),onClick:this.save},this.state.saving?c.a.createElement("span",{className:"onboarding__button-saving"},"Saving... ",c.a.createElement("img",{src:ke})):"Save Stack"))))}}])&&$n(n.prototype,o),r&&$n(n,r),t}())||Ln;function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Hn.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var Xn,Qn=new Ke,eo=Object(Ye.a)(Vn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kn(this,Yn(t).call(this,e))).props.userId||n.props.path==="".concat(Le,"/scan")||ve.e.push("".concat(Le,"/scan")),Xn=new Ve({routerProps:n.props}),n.bindEvents(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,i["Component"]),n=t,(o=[{key:"bindEvents",value:function(){try{ve.e.listen(function(e){trackPage("onboarding",{url:e.pathname})})}catch(e){}}},{key:"getChildContext",value:function(){return{routerProps:this.props,globalStore:Xn,navStore:Qn}}},{key:"render",value:function(){return c.a.createElement(ve.d,{history:ve.e},c.a.createElement(ve.b,{from:"/create-stack",to:"/create-stack/scan"}),c.a.createElement(ve.c,{path:"/create-stack",component:St},c.a.createElement(ve.c,{path:"scan",component:Pt}),c.a.createElement(ve.c,{path:"stack-type",component:At}),c.a.createElement(ve.c,{path:"stack-info",component:Gt}),c.a.createElement(ve.c,{path:"new-company",component:en}),c.a.createElement(ve.c,{path:"tool-selection",component:On}),c.a.createElement(ve.c,{path:"tool-details",component:Hn})))}}])&&Gn(n.prototype,o),r&&Gn(n,r),t}())||Vn;eo.childContextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var to,no,oo,ro,ao,io,co,so,lo="/stack-edit";function uo(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function mo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function po(e,t,n){return t&&mo(e.prototype,t),n&&mo(e,n),e}function fo(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ho,bo=(no=fo((to=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uo(this,"stackInfo",no,this),uo(this,"newCompany",oo,this),uo(this,"selectedTools",ro,this),uo(this,"stackOwner",ao,this),uo(this,"possibleOwners",io,this),uo(this,"ownerIndex",co,this),uo(this,"saveState",so,this),this.possibleOwners.push({id:t.routerProps.userId,image_url:t.routerProps.userImg,name:t.routerProps.userName,type:"User"}),Object(_e.l)(this.newCompany,function(){n.saveState=Ce}),this.saveStack=this.saveStack.bind(this),get("/api/v1/companies/index").then(function(e){var t=!0,o=!1,r=void 0;try{for(var a,i=e.data[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;n.addPossibleOwner(c)}}catch(e){o=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}n.possibleOwners.push(n.newCompany)})}return po(e,[{key:"stackOwnerId",get:function(){return"newcompany"===this.stackOwner?this.newCompany.id:this.stackOwner}},{key:"owner",get:function(){return this.ownerIndex<this.possibleOwners.length&&this.ownerIndex>=0&&this.possibleOwners[this.ownerIndex]||{}}}]),po(e,[{key:"addSelectedTool",value:function(e){e.reasons?e.reasons=e.reasons.slice(0,5):e.reasons=[];var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1===t?this.selectedTools[this.selectedTools.length]=e:this.selectedTools[t]=Object.assign(this.selectedTools[t],e),this.saveState=Ce}},{key:"removeSelectedTool",value:function(e){var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&this.selectedTools.splice(t,1),this.saveState=Ce}},{key:"addPossibleOwner",value:function(e){var t=this.possibleOwners.findIndex(function(t){return t.id===e.id&&t.type===e.type});return-1===t&&(this.possibleOwners.push(e),t=this.possibleOwners.length-1),t}},{key:"setOwner",value:function(e){return this.ownerIndex=this.possibleOwners.findIndex(function(t){return t.id===e.id&&t.type===e.type})}},{key:"toolImage",value:function(e){return e&&e.image_url?e.image_url:Se}},{key:"setSlugs",value:function(e,t){var n=this;this.ownerSlug=e,this.stackSlug=t,$.get("/api/v1/stacks/edit",{stack:{slug:t,owner:{slug:e}}},function(e){n.stackInfo={id:e.id||"",slug:e.slug||"",name:e.name||"",description:e.description||"",website_url:e.website_url||"",path:e.path||"",current_user_admin:!!e.current_user_admin,image_url:""},n.selectedTools=[];var t=!0,o=!1,r=void 0;try{for(var a,i=e.services[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;n.addSelectedTool(c)}}catch(e){o=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}n.ownerIndex=n.addPossibleOwner(e.owner),$(document).trigger("stack-edit.stack.loaded"),n.saveState=xe}).fail(function(e){404===e.status&&(n.stackInfo.id="Not Found")})}},{key:"saveNewCompany",value:function(e){var t=this;this.saveState=je;var n={company:{name:this.newCompany.name,website_url:this.newCompany.website_url,description:this.newCompany.description,angellist_url:this.newCompany.angellist_url,email_address:this.newCompany.email_address,twitter_username:this.newCompany.twitter_username,image_url:this.newCompany.image_url}};0===this.newCompany.id||null===this.newCompany.id?$.post("/api/v1/companies/create",n,function(n){t.newCompany.id=n,t.saveState=xe,e&&e()}):(n.company.id=this.newCompany.id,$.post("/api/v1/companies/update",n,function(n){t.newCompany.id=n,t.saveState=xe,e&&e()}))}},{key:"saveStack",value:function(e){var t=this;this.saveState=je;var n={id:this.stackInfo.id,name:this.stackInfo.name,description:this.stackInfo.description,website_url:this.stackInfo.website_url,owner:this.possibleOwners[this.ownerIndex],services:this.selectedTools.map(function(e){return e.id})};this.stackInfo.image_url&&(n.image_url=this.stackInfo.image_url),$.post("/api/v1/stacks/update",{stack:n},function(n){t.selectedTools=[];var o=!0,r=!1,a=void 0;try{for(var i,c=n.services[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;t.addSelectedTool(s)}}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}ve.e.replace("".concat(lo,"/").concat(n.owner.slug,"/").concat(n.slug,"/").concat(location.pathname.split("/").slice(-1)[0])),t.ownerSlug=n.owner.slug,t.stackSlug=n.slug,t.saveState=xe,e&&e()})}},{key:"save",value:function(){this.saveState!==je&&(this.owner===this.newCompany?this.saveNewCompany(this.saveStack):this.saveStack())}}]),e}()).prototype,"stackInfo",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:null,slug:null,name:"",description:"",website_url:"",image_url:"",path:""}}}),oo=fo(to.prototype,"newCompany",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:null,name:"",website_url:"",description:"",angellist_url:"",email_address:"",twitter_username:"",image_url:"",type:"Company"}}}),ro=fo(to.prototype,"selectedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ao=fo(to.prototype,"stackOwner",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),io=fo(to.prototype,"possibleOwners",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),co=fo(to.prototype,"ownerIndex",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),so=fo(to.prototype,"saveState",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xe}}),fo(to.prototype,"stackOwnerId",[_e.d],Object.getOwnPropertyDescriptor(to.prototype,"stackOwnerId"),to.prototype),fo(to.prototype,"owner",[_e.d],Object.getOwnPropertyDescriptor(to.prototype,"owner"),to.prototype),to);function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Eo=Object(Ye.a)(ho=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=_o(t).call(this,e),(n=!r||"object"!==yo(r)&&"function"!=typeof r?go(o):r).headerBarStep=function(){var e=n.props.location.split("/"),t="info"===(e=e[e.length-1].replace(/\//g,"").toLowerCase())?0:"tool-selection"===e?1:2;n.state.step!==t&&n.setState({step:t})},n.state={step:null},n.goTo=n.goTo.bind(go(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.headerBarStep()}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.headerBarStep()}},{key:"goTo",value:function(e){var t=this;if("info"===location.pathname.split("/").pop()){return $(document).on("stack-edit.stack.valid",function n(o,r){$(document).off("stack-edit.stack.valid",n),r.valid&&ve.e.push("".concat(lo,"/").concat(t.context.slugs.ownerSlug,"/").concat(t.context.slugs.stackSlug).concat(e))}),void $(document).trigger("stack-edit.stack.validate")}ve.e.push("".concat(lo,"/").concat(this.context.slugs.ownerSlug,"/").concat(this.context.slugs.stackSlug).concat(e))}},{key:"timelineClass",value:function(){return"onboarding__header__timeline step-".concat(this.state.step)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__header auto-height navable"},c.a.createElement("div",{className:"onboarding__header__container"},c.a.createElement("h1",null,"Editing Your Stack"),c.a.createElement("ul",{className:this.timelineClass()},c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Stack Info",onClick:function(){return e.goTo("/info")}}),c.a.createElement("li",{className:"onboarding__header__timeline__spacer"}),c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Tools Selection",onClick:function(){return e.goTo("/tool-selection")}}),c.a.createElement("li",{className:"onboarding__header__timeline__spacer"}),c.a.createElement("li",{className:"onboarding__header__timeline__item","data-label":"Tools Details",onClick:function(){return e.goTo("/tool-details")}})),c.a.createElement("div",{className:"onboarding__header__container__results",onClick:function(){return e.goTo("/tool-selection")}},this.context.globalStore.selectedTools.map(function(t){return c.a.createElement("img",{key:"header3-".concat(t.id),src:e.context.globalStore.toolImage(t)})}))))}}])&&vo(n.prototype,o),r&&vo(n,r),t}())||ho;function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oo(e,t){return!t||"object"!==ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Eo.contextTypes={globalStore:ye.a.object,slugs:ye.a.object};var jo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oo(this,No(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"landing-container"},c.a.createElement("div",{id:"stack-name",style:{textAlign:"center",paddingTop:"150px"}},"Sorry, we couldn't find that page :(",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"div-center"},c.a.createElement("a",{href:"/"},c.a.createElement("img",{style:{maxWidth:"70px"},alt:"StackShare",src:Ne})))))}}])&&So(n.prototype,o),r&&So(n,r),t}();function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ro,Mo=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Po(t).call(this,e))||"object"!==xo(r)&&"function"!=typeof r?Io(o):r).state={notificationMsg:null},n.reportNotificationMsg=n.reportNotificationMsg.bind(Io(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$(document).on("notification",this.reportNotificationMsg)}},{key:"componentWillUnmount",value:function(){$(document).off("notification",this.reportNotificationMsg)}},{key:"reportNotificationMsg",value:function(e,t){var n=this;clearTimeout(this.notificationTimeout),this.setState({notificationMsg:t}),this.notificationTimeout=setTimeout(function(){n.setState({notificationMsg:null})},5e3)}},{key:"render",value:function(){return c.a.createElement("div",{className:"notification-banner",style:{height:this.state.notificationMsg?"50px":0}},this.state.notificationMsg)}}])&&To(n.prototype,o),r&&To(n,r),t}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Lo(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uo(e,t){return(Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $o,Bo=Object(Ye.a)(Ro=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lo(this,Do(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.context.globalStore.setSlugs(this.props.routeParams.ownerSlug,this.props.routeParams.stackSlug)}},{key:"getChildContext",value:function(){return{globalStore:this.context.globalStore,slugs:{ownerSlug:this.props.routeParams.ownerSlug,stackSlug:this.props.routeParams.stackSlug}}}},{key:"render",value:function(){if("Not Found"===this.context.globalStore.stackInfo.id)return c.a.createElement(jo,null);var e=this.props.location.pathname;return c.a.createElement("div",{className:"stack-edit"},c.a.createElement(Eo,{location:e}),c.a.createElement(yt,null),c.a.createElement(Mo,null),c.a.createElement("div",{className:"fluid-container"},this.props.children))}}])&&Ao(n.prototype,o),r&&Ao(n,r),t}())||Ro;function qo(e){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Bo.contextTypes={globalStore:ye.a.object},Bo.childContextTypes={globalStore:ye.a.object,slugs:ye.a.object};var Go,Ko=Object(Ye.a)($o=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Vo(t).call(this,e))||"object"!==qo(r)&&"function"!=typeof r?Ho(o):r).onSaveContinue=n.onSaveContinue.bind(Ho(n)),n.save=n.save.bind(Ho(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(t,i["Component"]),n=t,(o=[{key:"onSaveContinue",value:function(){this.props.saveContinueCallback?this.props.saveContinueCallback():(this.context.globalStore.saveState!==xe&&this.context.globalStore.save(),ve.e.push("".concat(lo,"/").concat(this.context.slugs.ownerSlug,"/").concat(this.context.slugs.stackSlug).concat(this.props.continuePath)))}},{key:"save",value:function(){this.props.saveCallback?this.props.saveCallback():this.context.globalStore.save()}},{key:"saveButtonClass",value:function(){return this.context.globalStore.saveState===je||this.context.globalStore.saveState===xe?" disabled":""}},{key:"saveAndContinueButtonText",value:function(){return this.context.globalStore.saveState===je||this.context.globalStore.saveState===xe?this.props.continueText:"Save & ".concat(this.props.continueText)}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"react__input-container"},this.context.globalStore.stackInfo.path&&c.a.createElement("div",{className:"react__input-container"},c.a.createElement("a",{className:"react__form-wrapper__button white view-stack",href:this.context.globalStore.stackInfo.path},"View Stack")),c.a.createElement("button",{className:"react__form-wrapper__button spaced".concat(this.saveButtonClass()),onClick:this.save},this.context.globalStore.saveState),!this.props.noContinueButton&&c.a.createElement("button",{className:"react__form-wrapper__button white",onClick:this.onSaveContinue},this.saveAndContinueButtonText())))}}])&&Wo(n.prototype,o),r&&Wo(n,r),t}())||$o;function Yo(e){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ko.contextTypes={globalStore:ye.a.object,slugs:ye.a.object};var tr,nr=Object(Ye.a)(Go=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Xo(t).call(this,e))||"object"!==Yo(r)&&"function"!=typeof r?Qo(o):r).state={needsValidation:!1,alreadyExists:!1,saving:!1,clearImage:!1},n.onChange=n.onChange.bind(Qo(n)),n.validateCompanyName=n.validateCompanyName.bind(Qo(n)),n.parseEmail=n.parseEmail.bind(Qo(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.parseEmail()}},{key:"onChange",value:function(e){this.context.globalStore.newCompany.image_url=$("input[name=image_url]").val(),this.context.globalStore.newCompany[e.target.name]=e.target.value,$(e.target).removeClass("error").parent().removeClass("name-collision")}},{key:"validateCompanyName",value:function(e){var t=e.target;$.get("/companies/exists",{company_name:this.context.globalStore.newCompany.name},function(e){e.exists&&($(t).addClass("error").parent().addClass("name-collision"),trackEvent("tack.create.stackType.newCompany.editErr",{value:"name-collision"}))})}},{key:"parseEmail",value:function(){if(this.context.globalStore.newCompany.email_address.match(/.+@.+\..+/)){var e,t,n=/[a-zA-Z0-9]+\..+$/;try{e=this.context.globalStore.newCompany.website_url.match(n)[0].toLowerCase()}catch(t){e=""}try{t=this.context.globalStore.newCompany.email_address.match(n)[0].toLowerCase()}catch(e){t=""}e!==t?this.setState({needsValidation:!0}):this.setState({needsValidation:!1})}}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__new-company"},c.a.createElement("div",{className:"onboarding__form-wrapper"},c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Name"),c.a.createElement("input",{value:this.context.globalStore.newCompany.name,name:"name",placeholder:"Company Name",onChange:this.onChange,onBlur:this.validateCompanyName,type:"text",pattern:".{3,}",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Website"),c.a.createElement("input",{value:this.context.globalStore.newCompany.website_url,name:"website_url",placeholder:"Company Website",onChange:this.onChange,type:"text",pattern:".+\\..+",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Description"),c.a.createElement("input",{value:this.context.globalStore.newCompany.description,name:"description",placeholder:"Company description",onChange:this.onChange,type:"text",pattern:".{3,}",required:!0})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"AngelList Profile URL"),c.a.createElement("input",{value:this.context.globalStore.newCompany.angellist_url,name:"angellist_url",placeholder:'e.g. "http://angel.co/stackshare"',onChange:this.onChange,type:"text",pattern:".+\\..+"})),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Email Address"),c.a.createElement("input",{value:this.context.globalStore.newCompany.email_address,name:"email_address",placeholder:"Company email",onChange:this.onChange,onBlur:this.parseEmail,type:"text",pattern:".+@.+\\..+",required:!0}),this.state.needsValidation&&c.a.createElement("p",{className:"onboarding__input-container__domain-match"},"Your email address doesn't match the domain address you entered for your company website. We'll need to manually verify that you work for the company in order to get a 'Verified' badge on your stack. We'll send you an email once you've been verified.")),c.a.createElement("div",{className:"onboarding__input-container"},c.a.createElement("h5",null,"Company Twitter Username"),c.a.createElement("input",{value:this.context.globalStore.newCompany.twitter_username,name:"twitter_username",placeholder:"@username",onChange:this.onChange,type:"text",pattern:".{2,}"})),c.a.createElement($t.b,null,c.a.createElement($t.a,null,"Company Logo or Image"),c.a.createElement(Ut.a,{clearImage:this.state.clearImage,id:"file",name:"image_url","data-crop":"1:1",value:this.context.globalStore.newCompany.image_url}))),this.state.alreadyExists&&c.a.createElement("div",null,c.a.createElement("div",{className:"react-overlay",onClick:function(){return e.setState({alreadyExists:!1})}}),c.a.createElement("div",{className:"react-overlay__modal"},c.a.createElement("div",{className:"x-corner-close-button",onClick:function(){return e.setState({alreadyExists:!1})}}),c.a.createElement("h3",null,"This company already exists"),c.a.createElement("p",null,"Would you like to update ",this.context.globalStore.newCompany.name," or continue with the stack creation of the existing company?"),c.a.createElement("button",{className:"onboarding__edit-btn",onClick:this.updateCompany},"Update Company"),c.a.createElement("button",{className:"onboarding__continue-btn",onClick:this.toStackInfo},"Continue"))))}}])&&Zo(n.prototype,o),r&&Zo(n,r),t}())||Go;function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ar(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nr.contextTypes={globalStore:ye.a.object,stackSlug:ye.a.string};var sr,lr=Object(Ye.a)(tr=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ar(this,ir(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("img",{src:ke,className:"onboarding__tool-selection__loading"}))}}])&&rr(n.prototype,o),r&&rr(n,r),t}())||tr;function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hr,br=Object(Ye.a)(sr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=pr(t).call(this,e),(n=!r||"object"!==ur(r)&&"function"!=typeof r?fr(o):r).validate=function(){var e=Dt.validate($(n._el).find("input[type=text]"));return $(document).trigger("stack-edit.stack.valid",{valid:e}),e},n.state={showOwnerList:!1,clearImage:!1},n.onChange=n.onChange.bind(fr(n)),n.onClickOwner=n.onClickOwner.bind(fr(n)),n.validateName=n.validateName.bind(fr(n)),n.setOwner=n.setOwner.bind(fr(n)),n.addNewCompany=n.addNewCompany.bind(fr(n)),n.submitForm=n.submitForm.bind(fr(n)),n.stackLoaded=n.stackLoaded.bind(fr(n)),n._el=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.nextPath="".concat(lo,"/").concat(this.context.slugs.ownerSlug,"/").concat(this.context.slugs.stackSlug,"/tool-selection"),this.checkAdmin(),$(document).on("stack-edit.stack.loaded",this.stackLoaded),$(document).on("stack-edit.stack.validate",this.validate)}},{key:"checkAdmin",value:function(){!1===this.context.globalStore.stackInfo.current_user_admin&&($(document).trigger("notification","You are not marked as a company admin. Contact your company administrator to add you as an admin."),ve.e.replace(this.nextPath))}},{key:"componentWillUnmount",value:function(){this.widget=void 0,$(document).off("stack-edit.stack.loaded",this.stackLoaded),$(document).off("stack-edit.stack.validate",this.validate)}},{key:"stackLoaded",value:function(){var e=this;this.checkAdmin(),this.refs.image_url&&(this.widget||(this.widget=uploadcare.SingleWidget(this.refs.image_url),this.widget.onUploadComplete(function(t){e.context.globalStore.stackInfo.image_url=t.cdnUrl,e.context.globalStore.saveState=Ce})),this.widget.value(this.context.globalStore.stackInfo.image_url))}},{key:"onChange",value:function(e){this.context.globalStore.newCompany.image_url=$("input[name=image_url]").val(),this.context.globalStore.saveState=Ce,this.context.globalStore.stackInfo[e.target.name]=e.target.value,$(e.target).removeClass("error").parent().removeClass("name-collision")}},{key:"onClickOwner",value:function(){this.setState({showOwnerList:!this.state.showOwnerList})}},{key:"submitForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context.globalStore.stackInfo.image_url=$("input[name=image_url]").val(),trackEvent("stack.edit.stackDetails.submit"),Dt.validate($(this._el).find("input[type=text]"))&&(this.context.globalStore.save(),e.toNextPage&&ve.e.push(this.nextPath)),trackEvent("stack.edit.stackDetails.submitErr"),this.setState({clearImage:!0})}},{key:"validateName",value:function(e,t){var n=this;if(this.context.globalStore.owner.id){var o={name:this.context.globalStore.stackInfo.name,stack_id:this.context.globalStore.stackInfo.id};o.owner="User"===this.context.globalStore.owner.type?"personal":this.context.globalStore.owner.id,$.get("/api/v1/stacks/name_is_available",o,function(e){e&&t?t():e||($(document).trigger("errorMsg","Stack name is already taken"),$(n.refs.stackInfoName).addClass("error").parent().addClass("name-collision"))})}else t&&t()}},{key:"setOwner",value:function(e){this.context.globalStore.saveState=Ce,this.context.globalStore.setOwner(e),this.context.globalStore.newCompany.id=null,this.forceUpdate()}},{key:"addNewCompany",value:function(){this.context.globalStore.setOwner(this.context.globalStore.newCompany),this.context.globalStore.newCompany.id=0}},{key:"ownerPictureClass",value:function(){return"personal"===this.context.globalStore.stackOwner?"personal":"company"}},{key:"render",value:function(){var e=this;return null===this.context.globalStore.stackInfo.id?c.a.createElement(lr,null):c.a.createElement("div",{className:"onboarding__stack-info",ref:function(t){return e._el=t}},c.a.createElement("div",{className:"react__form-wrapper"},c.a.createElement("div",{className:"react__input-container nowrap"},c.a.createElement("div",{className:"react__input-container inline clickable",onClick:this.onClickOwner},c.a.createElement("h5",null,"Stack Owner"),c.a.createElement("div",{className:"react__input-container--owner"},c.a.createElement("input",{value:this.context.globalStore.owner.name,name:"owner",placeholder:"Company Name",readOnly:!0}),c.a.createElement("img",{className:this.ownerPictureClass(),src:Te(this.context.globalStore.owner.image_url)})),this.state.showOwnerList&&c.a.createElement("div",null,c.a.createElement("div",{className:"react-overlay transparent",onClick:function(){return e.setState({showOwnerList:!1})}}),c.a.createElement("ul",{className:"stack-edit__owner-list"},this.context.globalStore.possibleOwners.map(function(t){return t===e.context.globalStore.newCompany?c.a.createElement("li",{key:"owner-list-new-company",onClick:e.addNewCompany},c.a.createElement("img",{src:Ee}),"New Company"):c.a.createElement("li",{key:"owner-list-".concat(t.id,"-").concat(t.type),onClick:function(){return e.setOwner(t)}},c.a.createElement("img",{src:Te(t.image_url)}),t.name)})))),c.a.createElement("div",{className:"react__input-owner-divider"},"/"),c.a.createElement("div",{className:"react__input-container"},c.a.createElement("h5",null,"Stack Name"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.name,name:"name",placeholder:"Name",onChange:this.onChange,onBlur:this.validateName,ref:"stackInfoName",type:"text",pattern:".{2,}",required:!0}))),c.a.createElement("div",{className:"react__input-container"},c.a.createElement("h5",null,"Description"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.description,name:"description",placeholder:"Stack Description",onChange:this.onChange,type:"text",pattern:".{3,}"})),c.a.createElement("div",{className:"react__input-container"},c.a.createElement("h5",null,"Website or GitHub Repo URL"),c.a.createElement("input",{value:this.context.globalStore.stackInfo.website_url,name:"website_url",placeholder:"Website or GitHub URL",onChange:this.onChange,type:"text",pattern:".{3,}\\..{2,}"})),c.a.createElement($t.b,null,c.a.createElement($t.a,null,"Stack Logo or Image"),c.a.createElement(Ut.a,{clearImage:this.state.clearImage,onChange:this.onChange,id:"file",name:"image_url","data-crop":"1:1",value:this.context.globalStore.stackInfo.image_url})),0===this.context.globalStore.newCompany.id&&c.a.createElement("div",null,c.a.createElement(nr,null)),c.a.createElement(Ko,{continuePath:"/tool-selection",continueText:"Edit Tools",saveCallback:this.submitForm,saveContinueCallback:function(){return e.submitForm({toNextPage:!0})}})))}}])&&mr(n.prototype,o),r&&mr(n,r),t}())||sr;function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}br.contextTypes={globalStore:ye.a.object,slugs:ye.a.object};var Er,kr=Object(Ye.a)(hr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=_r(t).call(this,e))||"object"!==yr(r)&&"function"!=typeof r?gr(o):r).state={popularTools:[],searchResults:[],showResults:!1,newToolName:null},n.getOptions=n.getOptions.bind(gr(n)),n.removeTool=n.removeTool.bind(gr(n)),n.toolSearchFocus=n.toolSearchFocus.bind(gr(n)),n.toolSearchBlur=n.toolSearchBlur.bind(gr(n)),n.isToolSelected=n.isToolSelected.bind(gr(n)),n.searchResultClass=n.searchResultClass.bind(gr(n)),n.resetToolName=n.resetToolName.bind(gr(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;$.get("/api/v1/services/popular_services",function(t){e.setState({popularTools:t})})}},{key:"resetToolName",value:function(){this.setState({newToolName:null})}},{key:"addTool",value:function(e){this.context.globalStore.addSelectedTool(e),this.setState({searchResults:[],toolSearchInputText:""})}},{key:"removeTool",value:function(e){this.context.globalStore.removeSelectedTool(e),this.forceUpdate(),this.refs.toolSearchInput.focus()}},{key:"toolSearchFocus",value:function(){this.setState({showResults:!0})}},{key:"toolSearchBlur",value:function(){}},{key:"componentWillUnmount",value:function(){clearTimeout(this._blurTimeout)}},{key:"dropDownSelectTool",value:function(e){this.addTool(e.value)}},{key:"getOptions",value:function(e){return fetch("/api/v1/services/search?q="+e).then(function(e){return e.json()}).then(function(e){var t=[];for(var n in e){var o=e[n];t.push({value:o,label:o.name})}return{options:t}})}},{key:"shouldSendRequest",value:function(){return(new Date).getTime()-this.state.lastRequest>2e3}},{key:"onChange",value:function(e){var t,n,o,r=this;e=e.nativeEvent,this.setState((t={},n=e.target.name,o=e.target.value,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),clearTimeout(this.state.requestTimeout),""!==e.target.value?this.setState({requestTimeout:setTimeout(function(){$.get("/api/v1/services/search",{q:e.target.value},function(e){e=e||[],r.setState({searchResults:e,requestTimeout:void 0,searchResultIndex:-1})})},1e3),searchResults:[]}):this.setState({requestTimeout:void 0,searchResults:[],searchResultIndex:-1})}},{key:"onContinue",value:function(){trackEvent("stack.create.toolsList.submit"),ve.e.push("".concat(Le,"/tool-details"))}},{key:"onKeyPress",value:function(e){"ArrowDown"===(e=e.nativeEvent).key?this.setState({searchResultIndex:Math.min(this.state.searchResultIndex+1,this.state.searchResults.length)}):"ArrowUp"===e.key?this.setState({searchResultIndex:Math.max(this.state.searchResultIndex-1,0)}):"Enter"===e.key&&this.state.searchResultIndex>-1?this.addTool(this.state.searchResults[this.state.searchResultIndex]):"Escape"===e.key&&this.setState({searchResultIndex:-1})}},{key:"searchResultClass",value:function(e){return this.state.searchResultIndex===this.state.searchResults.indexOf(e)?"active":""}},{key:"isToolSelected",value:function(e){return-1!==this.context.globalStore.selectedTools.findIndex(function(t){return t.id===e.id})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding__tool-selection"},c.a.createElement("h1",null,"Build Your Stack"),c.a.createElement("p",{className:"subheader"},"Search for or select the tools & services you use in this stack"),c.a.createElement("br",null),c.a.createElement(_n,{canCreateTools:!0,multiline:!0,placeholder:"Search & add tools"}),c.a.createElement("div",{className:"submit-links-container tools-selection-continue-container"},c.a.createElement("div",{className:"submit-links"},this.context.globalStore.selectedTools.length>0&&c.a.createElement(Ko,{continuePath:"/tool-details",continueText:"Continue"}))),c.a.createElement("div",{className:"onboarding__tool-selection__popular-tools"},c.a.createElement("h3",null,"Popular Tools"),this.state.popularTools.map(function(t){return-1===e.context.globalStore.selectedTools.findIndex(function(e){return e.id===t.id})?c.a.createElement("div",{key:"toolselection-tool-".concat(t.id),className:"onboarding__tool-selection__tool hint--top","data-hint":t.name,onClick:function(){return e.addTool(t)}},c.a.createElement("img",{src:t.image_url})):c.a.createElement("div",{key:"toolselection-tool-".concat(t.id),className:"onboarding__tool-selection__tool remove hint--top","data-hint":t.name,onClick:function(){return e.removeTool(t)}},c.a.createElement("img",{src:t.image_url}))}),0===this.state.popularTools.length&&c.a.createElement("img",{src:ke,className:"onboarding__tool-selection__loading"})))}}])&&vr(n.prototype,o),r&&vr(n,r),t}())||hr;function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Nr(e,t){return!t||"object"!==Sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cr(e){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kr.contextTypes={routerProps:ye.a.object,globalStore:ye.a.object,navStore:ye.a.object};var xr,Tr=Object(Ye.a)(Er=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nr(this,Cr(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Dn,null),c.a.createElement(Ko,{noContinueButton:!0}))}}])&&Or(n.prototype,o),r&&Or(n,r),t}())||Er;function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ir(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fr(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Fr(this,Rr(t).call(this,e)),xr=new bo({routerProps:n.props}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(t,i["Component"]),n=t,(o=[{key:"getChildContext",value:function(){return{globalStore:xr,routerProps:this.props}}},{key:"render",value:function(){return c.a.createElement(ve.d,{history:ve.e},c.a.createElement(ve.b,{from:"".concat(lo,"/:ownerSlug/:stackSlug"),to:"".concat(lo,"/:ownerSlug/:stackSlug/info")}),c.a.createElement(ve.c,{path:"".concat(lo,"/:ownerSlug/:stackSlug"),component:Bo},c.a.createElement(ve.c,{path:"info",component:br}),c.a.createElement(ve.c,{path:"tool-selection",component:kr}),c.a.createElement(ve.c,{path:"tool-details",component:Tr}),c.a.createElement(ve.c,{path:"new-company",component:nr})))}}])&&Ir(n.prototype,o),r&&Ir(n,r),t}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}zr.childContextTypes={globalStore:ye.a.object,routerProps:ye.a.object};var Br=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dr(this,Ur(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(t,i["Component"]),n=t,(o=[{key:"displayName",value:function(e){return e.name&&" "!==e.name?e.name:e.username}},{key:"actionButtons",value:function(e){var t=this;if("admin"===this.props.currentUserRole&&e.username!==this.props.currentUsername)return c.a.createElement("div",null,c.a.createElement("a",{onClick:function(){return t.props.editModalClick(e)},href:"#"},c.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})),c.a.createElement("a",{onClick:function(){return t.props.deleteModalClick(e)},href:"#"},c.a.createElement("i",{className:"fa fa-times-circle","aria-hidden":"true"})))}},{key:"render",value:function(){var e=this;return c.a.createElement("table",{className:"table table-hover manage-team-table"},c.a.createElement("tbody",null,this.props.members.map(function(t){return t.invitedByEmail?c.a.createElement("tr",{key:t.email},c.a.createElement("th",{scope:"row",className:"profile-column"},c.a.createElement("i",{className:"fa fa-question-circle","aria-hidden":"true",style:{fontSize:"32px"}})),c.a.createElement("td",{className:"user"},t.email),c.a.createElement("td",{style:{textTransform:"capitalize"}},t.role," (Invited)"),c.a.createElement("td",{className:"edit-delete"},c.a.createElement("button",{className:"btn btn-ss",onClick:function(){return e.props.resendInvite(t)}},"Resend Invite"))):c.a.createElement("tr",{key:t.id},c.a.createElement("th",{scope:"row",className:"profile-column"},c.a.createElement("img",{src:t.image_url})),c.a.createElement("td",{className:"user"},e.displayName(t)),c.a.createElement("td",{style:{textTransform:"capitalize"}},t.role),c.a.createElement("td",{className:"edit-delete"},e.actionButtons(t)))})))}}])&&Lr(n.prototype,o),r&&Lr(n,r),t}();function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gr=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Vr(t).call(this,e))||"object"!==qr(r)&&"function"!=typeof r?Hr(o):r).leaveTeamModal=n.leaveTeamModal.bind(Hr(n)),n.handleChange=n.handleChange.bind(Hr(n)),n.handleConfirm=n.handleConfirm.bind(Hr(n)),n.handleSecondConfirm=n.handleSecondConfirm.bind(Hr(n)),n.state={inputText:"",confirmText:n.props.username,buttonEnabled:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(t,i["Component"]),n=t,(o=[{key:"handleChange",value:function(e){e.target.value===this.state.confirmText?this.setState({buttonEnabled:!0,inputText:e.target.value}):this.setState({buttonEnabled:!1,inputText:e.target.value})}},{key:"handleConfirm",value:function(){this.setState({buttonEnabled:!1}),$("#confirm-leave-team").modal(),$("#remove-member").modal("hide")}},{key:"handleSecondConfirm",value:function(){var e=this.props.currentUserCompanyOwnerId,t=this.props.companyId;$.ajax({url:"/api/v1/company_owners/leave_team/"+e,type:"DELETE",data:{id:e,company_id:t},success:function(){trackEvent("companyMembership.leftTeam",{userId:e,companyId:t}),window.location="/"},error:function(){$("#error-user-only-admin-modal").modal(),this.setState({buttonEnabled:!0})}})}},{key:"leaveTeamModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"remove-member",tabIndex:"-1",role:"dialog","aria-labelledby":"remove-member"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Confirm Removal")),c.a.createElement("div",{className:"modal-body manage-modal-body"},"This will revoke your access to ",this.props.companyName,"’s company profile & stack on StackShare. To regain access you’ll need to request it from the company admin.",c.a.createElement("br",null),c.a.createElement("br",null)," To leave, type your username in the field below",c.a.createElement("div",{className:"input-group"},c.a.createElement("span",{className:"input-group-addon",id:"basic-addon1"},"@"),c.a.createElement("input",{placeholder:this.state.confirmText,onChange:this.handleChange,type:"text",className:"form-control","aria-describedby":"basic-addon1"}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:this.handleConfirm,disabled:!this.state.buttonEnabled,type:"button",className:"btn btn-delete"},"Leave ",this.props.companyName)))))}},{key:"confirmLeaveTeamModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"confirm-leave-team",tabIndex:"-1",role:"dialog","aria-labelledby":"remove-member"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Confirm Removal")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("p",null,"Are you really sure?")),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:this.handleSecondConfirm,type:"button",className:"btn btn-delete"},"Yes, I am sure!")))))}},{key:"errorUserOnlyAdminModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"error-user-only-admin-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"edit-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Sorry")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("p",null,"Before you can leave this team, you need to make someone else an admin.")))))}},{key:"render",value:function(){return c.a.createElement("div",null,this.leaveTeamModal(),this.confirmLeaveTeamModal(),this.errorUserOnlyAdminModal(),c.a.createElement("a",{href:"#",id:"remove-myself","data-toggle":"modal","data-target":"#remove-member"},"Leave My Team"))}}])&&Wr(n.prototype,o),r&&Wr(n,r),t}();function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ea,ta,na,oa,ra,aa,ia,ca,sa,la,ua,ma,pa,fa,da,ha,ba,ya,va,_a,ga,wa,Ea,ka,Sa,Oa,Na=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(o=Zr(t).call(this))||"object"!==Kr(o)&&"function"!=typeof o?Xr(n):o).state={members:[]},e.editMemberModal=e.editMemberModal.bind(Xr(e)),e.editModalClick=e.editModalClick.bind(Xr(e)),e.deleteMemberModal=e.deleteMemberModal.bind(Xr(e)),e.deleteModalClick=e.deleteModalClick.bind(Xr(e)),e.deleteMemberConfirmClick=e.deleteMemberConfirmClick.bind(Xr(e)),e.inviteMemberConfirmClick=e.inviteMemberConfirmClick.bind(Xr(e)),e.leaveMyTeamButton=e.leaveMyTeamButton.bind(Xr(e)),e.resendInvite=e.resendInvite.bind(Xr(e)),e.inviteSentModal=e.inviteSentModal.bind(Xr(e)),e.submitEdit=e.submitEdit.bind(Xr(e)),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=this.props.companyId,n=this;$.get("/api/v1/company_owners",{company_id:t},function(t){n.setState({members:t,companyId:e.props.companyId}),$(".company_membership_loading").remove()}),setTimeout(function(){$("#username").selectize({valueField:"id",labelField:"username",searchField:"username",create:!1,highlight:!1,maxItems:1,render:{option:function(e){return'<div class="search-member-item"><img src='+e.image_url+" /><span>"+e.username+"</span></div>"},item:function(e){return'<div class="search-member-item"><img src='+e.image_url+" /><span>"+e.username+"</span></div>"}},load:function(e,t){if(!e.length)return t();$.ajax({url:"/api/v1/company_owners/search",type:"GET",data:{term:e},error:function(){t()},success:function(e){t(e.slice(0,10))}})}})},4e3)}},{key:"newMemberModal",value:function(){var e=this;return c.a.createElement("div",{className:"modal fade",id:"add-member-modal",tabIndex:"-2",role:"dialog","aria-labelledby":"add-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"New Member"),this.state.newMemberError?c.a.createElement("div",{className:"alert alert-error"},"Please fill in"):""),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("div",{className:"form-group form-group-email"},c.a.createElement("label",{htmlFor:"email"},"Email Address"),c.a.createElement("input",{ref:"newMemberEmail",type:"text",className:"form-control",id:"email"})),c.a.createElement("div",{className:"form-group modal-or"},c.a.createElement("label",{htmlFor:"usr"},"or")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"username"},"StackShare Username"),c.a.createElement("input",{ref:"newMemberUserId",type:"text",className:"form-control",id:"username"})),c.a.createElement("hr",null),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"role"},"Role"),c.a.createElement("select",{ref:"newMemberRole",className:"form-control",id:"role"},c.a.createElement("option",{value:"member"},"Member"),c.a.createElement("option",{value:"admin"},"Admin")))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:function(){return e.inviteMemberConfirmClick()},type:"button",className:"btn btn-new-member"},"Add Member"),c.a.createElement("p",null,"We will send an invite if this user is not a member on StackShare")))))}},{key:"inviteMemberConfirmClick",value:function(){var e=this.refs.newMemberRole.value,t=this.refs.newMemberEmail.value,n=this.refs.newMemberUserId.value,o=this.state.companyId,r=this;(t||n)&&e?t?$.ajax({url:"/api/v1/company_owner_invites",type:"POST",data:{company_id:o,email:t,role:e},success:function(e){r.refs.newMemberEmail.value=null,r.refs.newMemberUserId.value=null;var t={id:e.id,invitedByEmail:!0,email:e.email,accepted:e.accepted,role:e.role},n=r.state.members;n.push(t),r.setState({members:n,newMemberError:!1}),$("#add-member-modal").modal("hide"),trackEvent("companyMembership.invitedNewStackShareUser",{member:t})},error:function(){$("#error-user-exists-modal").modal()}}):$.ajax({url:"/api/v1/company_owners/invite",type:"POST",data:{company_id:o,user_id:n,role:e},success:function(e){r.refs.newMemberEmail.value=null,r.refs.newMemberUserId.value=null;var t=r.state.members;t.push(e),r.setState({members:t,newMemberError:!1}),$("#add-member-modal").modal("hide"),r.setState({notificationMsg:"Invite sent."}),trackEvent("companyMembership.invitedExistingStackShareUser",{member:e}),setTimeout(function(){r.setState({notificationMsg:null})},5e3)},error:function(){$("#error-user-exists-modal").modal()}}):r.setState({newMemberError:!0})}},{key:"resendInvite",value:function(e){$.ajax({url:"/api/v1/company_owner_invites/resend",type:"POST",data:{id:e.id,company_id:this.props.companyId},success:function(){trackEvent("companyMembership.resentInviteEmail",{member:e}),$("#invite-sent-modal").modal()},error:function(){$("#invite-sent-modal").modal()}})}},{key:"inviteSentModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"invite-sent-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"edit-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Invite Sent")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("p",null,"Your invite has been sent.")))))}},{key:"errorUserExistsModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"error-user-exists-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"edit-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Sorry")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("p",null,"It looks like that user is already part of the team.")))))}},{key:"editMemberModal",value:function(e){return c.a.createElement("div",{className:"modal fade",id:"edit-member-modal",tabIndex:"-2",role:"dialog","aria-labelledby":"edit-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Edit Member")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("form",{onSubmit:this.submitEdit},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{ref:"editing_id",type:"hidden",id:"id",name:"id",value:e?e.id:""}),c.a.createElement("label",{htmlFor:"role"},"Role:"),c.a.createElement("select",{ref:"editing_role",className:"form-control",id:"role",name:"role"},c.a.createElement("option",{value:"member"},"Member"),c.a.createElement("option",{value:"admin"},"Admin"))),c.a.createElement("input",{type:"submit",className:"btn btn-new-member",value:"Update",style:{marginBottom:"16px"}}))))))}},{key:"errorUserCannotLeaveTeam",value:function(){return c.a.createElement("div",{className:"modal fade",id:"error-user-cannot-leave-modal",tabIndex:"-2",role:"dialog","aria-labelledby":"delete-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Sorry")),c.a.createElement("div",{className:"modal-body manage-modal-body-delete"},c.a.createElement("p",null,"Before you can leave this team, you need to make someone else an admin.")))))}},{key:"errorUserCannotDeleteModal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"error-user-cannot-delete-modal",tabIndex:"-2",role:"dialog","aria-labelledby":"delete-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Sorry")),c.a.createElement("div",{className:"modal-body manage-modal-body-delete"},c.a.createElement("p",null,"You cannot delete yourself from a team."),c.a.createElement("p",null,"If you want to leave your team, click Leave My Team.")))))}},{key:"deleteMemberModal",value:function(e){var t=this;return c.a.createElement("div",{className:"modal fade",id:"delete-member-modal",tabIndex:"-2",role:"dialog","aria-labelledby":"delete-member-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Remove Member")),c.a.createElement("div",{className:"modal-body manage-modal-body-delete"},c.a.createElement("img",{src:e?e.image_url:"",width:"64"})," Are you sure you want to remove",c.a.createElement("br",null),c.a.createElement("span",null,e?e.username:"","?")),c.a.createElement("div",{className:"modal-footer",style:{textAlign:"center"}},c.a.createElement("button",{type:"button",className:"btn btn-new-member","data-dismiss":"modal",style:{width:"47%",display:"inline",margin:0}},"Cancel"),c.a.createElement("button",{onClick:function(){return t.deleteMemberConfirmClick(e)},type:"button",className:"btn btn-delete",style:{width:"47%"}},"Remove")))))}},{key:"deleteMemberConfirmClick",value:function(e){var t=this,n=this.state.companyId;$.ajax({url:"/api/v1/company_owners/"+e.id,type:"DELETE",data:{id:e.id,company_id:n},success:function(){var n=t.state.members;for(var o in n)if(n[o].id===e.id){n.splice(o,1);break}t.setState({members:n}),trackEvent("companyMembership.deletedMember",{member:e}),$("#delete-member-modal").modal("hide")},error:function(){$("#error-user-cannot-delete-modal").modal()}})}},{key:"editModalClick",value:function(e){this.setState({editingMember:e}),trackEvent("companyMembership.editModalClick"),$("#edit-member-modal").modal()}},{key:"deleteModalClick",value:function(e){this.setState({deletingMember:e}),trackEvent("companyMembership.deleteModalClick"),$("#delete-member-modal").modal()}},{key:"submitEdit",value:function(e){e.preventDefault();var t=this.refs.editing_id.value,n=this.refs.editing_role.value,o=this.state.companyId,r=this;$.ajax({url:"/api/v1/company_owners/"+t,type:"PATCH",data:{id:t,company_id:o,company_owner:{role:n}},success:function(e){var n=r.state.members;for(var o in n)if(n[o].id===e.id){n[o].role=e.role;break}r.setState({members:n}),trackEvent("companyMembership.editedMember",{member:t}),$("#edit-member-modal").modal("hide")}})}},{key:"noOtherAdmins",value:function(){var e=!0,t=this.state.members;for(var n in t)t[n].id!==this.props.currentUserCompanyOwnerId&&"admin"===t[n].role&&(e=!1);return e}},{key:"leaveMyTeamButton",value:function(){var e=this.props.currentUserRole;return this.state.members.length>1&&"admin"===e&&this.noOtherAdmins()?c.a.createElement("a",{href:"#",id:"remove-myself","data-toggle":"modal","data-target":"#error-user-cannot-leave-modal"},"Leave My Team"):c.a.createElement(Gr,{currentUserCompanyOwnerId:this.props.currentUserCompanyOwnerId,companyId:this.props.companyId,companyName:this.props.companyName,username:this.props.username})}},{key:"render",value:function(){return c.a.createElement("div",{style:{marginTop:20}},c.a.createElement("div",{className:"notification-banner",style:{height:this.state.notificationMsg?"50px":0}},this.state.notificationMsg),c.a.createElement("div",{id:"manage-header"},c.a.createElement("h2",null,"Manage ".concat(this.props.companyName,"'s Team")),c.a.createElement("a",{href:"#",className:"btn btn-ss-alt","data-toggle":"modal","data-target":"#add-member-modal",style:{float:"right"}},"Add Member")),c.a.createElement(Br,{editModalClick:this.editModalClick,deleteModalClick:this.deleteModalClick,resendInvite:this.resendInvite,currentUsername:this.props.username,currentUserRole:this.props.currentUserRole,members:this.state.members}),this.leaveMyTeamButton(),this.newMemberModal(),this.editMemberModal(this.state.editingMember),this.deleteMemberModal(this.state.deletingMember),this.errorUserExistsModal(),this.errorUserCannotDeleteModal(),this.errorUserCannotLeaveTeam(),this.inviteSentModal())}}])&&Yr(n.prototype,o),r&&Yr(n,r),t}(),Ca="".concat(ge,"/fe/match/jobsites.png"),ja=n("/home/circleci/frontend/node_modules/algoliasearch/src/browser/builds/algoliasearch.js"),xa=n.n(ja);function Ta(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Pa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ia(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Fa,Ra=(ta=Ia((ea=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ta(this,"searching",ta,this),Ta(this,"jobSearch",na,this),Ta(this,"location",oa,this),Ta(this,"searchOperator",ra,this),Ta(this,"selectedTools",aa,this),Ta(this,"excludedTools",ia,this),Ta(this,"fullTime",ca,this),Ta(this,"freelance",sa,this),Ta(this,"remote",la,this),Ta(this,"saveState",ua,this),Ta(this,"userId",ma,this),Ta(this,"userName",pa,this),Ta(this,"showGetJobAlerts",fa,this),Ta(this,"showPostAJob",da,this),Ta(this,"showTwitterFollow",ha,this),Ta(this,"jobAlertMatchPercentage",ba,this),Ta(this,"jobAlertEmailFrequency",ya,this),Ta(this,"popularTools",va,this),Ta(this,"matchedCompany",_a,this),Ta(this,"matchedTotalCompany",ga,this),Ta(this,"matchedJob",wa,this),Ta(this,"matchedTotalJob",Ea,this),Ta(this,"visibleIndex",ka,this),Ta(this,"jobPage",Sa,this),Ta(this,"companyPage",Oa,this),this.defaultTools=["react","nodejs"],this.client=xa()(window._ALGOLIA_ID,window._ALGOLIA_API_KEY),this.companyIndex=this.client.initIndex(window._MATCH_COMPANIES_INDEX),this.jobIndex=this.client.initIndex(window._MATCH_JOBS_INDEX),this.routerProps=t.routerProps,t.routerProps&&(this.userId=this.routerProps.userId,this.userName=this.routerProps.userName,this.jobAlertMatchPercentage=this.routerProps.jobAlertMatchPercentage,this.jobAlertEmailFrequency=this.routerProps.jobAlertEmailFrequency),this.popularTools=[],this.analyzeUrl(),$(document).on("builder.tool.added",function(){n.search()}),$(document).on("builder.tool.removed",function(){n.search()}),$(document).on("builder.tool.operatorChanged",function(){n.search()})}var t,n,o;return t=e,(n=[{key:"analyzeUrl",value:function(){var e=this,t=location.pathname.split("/");if(t.length>2)return this.slug=t[t.length-1],this.addDefaultTools([this.slug]),void setTimeout(function(){e.search()});this.params=location.search.substr(1).split("&"),this.params.find(function(e){return"selectedTools"===e.split("=")[0]})?this.deserializeFromUrl():this.userId?($.get("/api/v1/match/saved_search",function(t){e.location=t.location||"",e.jobSearch=t.keywords||"",e.fullTime=t.full_time,e.remote=t.remote,e.freelance=t.freelance,e.searchOperator=!0===t.match_exact?"AND":"OR"}),$.get("/api/v1/match/job_stack",function(t){if(t.excluded_services.length>0){e.excludedTools=[];var n=!0,o=!1,r=void 0;try{for(var a,i=t.excluded_services[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;e.addExcludedTool(c,{serialize:!1})}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}}if(t.included_services.length>0){e.selectedTools=[];var s=!0,l=!1,u=void 0;try{for(var m,p=t.included_services[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;e.addSelectedTool(f,{serialize:!1})}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}e.saveState=xe,e.search(),0===t.included_services.length&&0===t.excluded_services.length&&(e.addDefaultTools(),e.search())})):(this.addDefaultTools(),this.search())}},{key:"deserializeFromUrl",value:function(){for(var e=this,t={},n=0;n<this.params.length;n++){var o=this.params[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}t.selectedTools&&$.get("/services/find_all_by_actual_slug",{slugs:t.selectedTools.replace(/--/g,",")},function(t){t instanceof Array&&(e.selectedTools=[]);var n=!0,o=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;e.addSelectedTool(c,{serialize:!1})}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}setTimeout(function(){e.search()})}),t.excludedTools&&$.get("/services/find_all_by_actual_slug",{slugs:t.excludedTools.replace(/--/g,",")},function(t){t instanceof Array&&(e.excludedTools=[]);var n=!0,o=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;e.addExcludedTool(c,{serialize:!1})}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}setTimeout(function(){e.search()})}),t.fullTime&&(this.fullTime="true"===t.fullTime),t.freelance&&(this.freelance="true"===t.freelance),t.remote&&(this.remote="true"===t.remote),t.jobSearch&&(this.jobSearch=t.jobSearch),t.location&&(this.location=t.location),t.searchOperator&&(this.searchOperator=t.searchOperator)}},{key:"serializeToUrl",value:function(){var e={selectedTools:this.selectedTools.map(function(e){return e.slug}).join("--"),excludedTools:this.excludedTools.map(function(e){return e.slug}).join("--"),location:this.location,jobSearch:this.jobSearch,searchOperator:this.searchOperator},t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));var o="".concat("/match","?").concat(t.join("&"));window.history.replaceState({},"",o)}},{key:"addDefaultTools",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultTools,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedTools=[],t.forEach(function(t){var o=new RegExp("^".concat(t,"$"),"i"),r=e.popularTools.find(function(e){return o.test(e.slug)});r?e.addSelectedTool(r,{serialize:!1}):$.get("/services/find_all_by_actual_slug",{slugs:t},function(t){if(t instanceof Array&&t.length>0){var o=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;e.addSelectedTool(s,{serialize:!1})}}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}e.search()}else n||e.addDefaultTools(e.defaultTools,!0)})}),this.search()}},{key:"searchPopularTools",value:function(e){if(""===e)return[];var t=new RegExp(e.replace(" ",".*\\s.*"),"i");return this.popularTools.filter(function(e){return t.test(e.name)})}},{key:"addSelectedTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({serialize:!0},t),void 0===e.required&&(e.required=!0),-1===this.selectedTools.findIndex(function(t){return t.id===e.id})&&this.selectedTools.push(e),t.serialize&&this.serializeToUrl(),this.removeExcludedTool(e)}},{key:"removeSelectedTool",value:function(e){var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&this.selectedTools.splice(t,1),this.serializeToUrl()}},{key:"addExcludedTool",value:function(e){-1===this.excludedTools.findIndex(function(t){return t.id===e.id})&&this.excludedTools.push(e),this.removeSelectedTool(e)}},{key:"removeExcludedTool",value:function(e){var t=this.excludedTools.findIndex(function(t){return t.id===e.id});-1!==t&&this.excludedTools.splice(t,1),this.serializeToUrl()}},{key:"updateSelectedTool",value:function(e){e.required=!!e.required;var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&(this.selectedTools[t]=e)}},{key:"loadMore",value:function(e){var t=this;this[e.toLowerCase()+"Page"]=this[e.toLowerCase()+"Page"]+1,this[e.toLowerCase()+"Index"].search("".concat(this.jobSearch," ").concat(this.location),{facets:"*",filters:this.filters(),attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:20,page:this[e.toLowerCase()+"Page"]},function(n,o){t["matchedTotal"+e]=o.nbHits;var r=!0,a=!1,i=void 0;try{for(var c,s=o.hits[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;t["matched"+e].push(l)}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}$(document).trigger("match.search.done")})}},{key:"search",value:function(){var e=this;if(this.companyPage=0,this.jobPage=0,this.searching=!0,0===this.selectedTools.length&&0===this.excludedTools.length)return this.matchedCompany=[],this.matchedTotalCompany=0,this.matchedJob=[],this.matchedTotalJob=0,$(document).trigger("match.search.done"),void(this.searching=!1);this.companyIndex.search("".concat(this.jobSearch," ").concat(this.location),{facets:"*",filters:this.filters(),attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:20,page:this.companyPage},function(t,n){e.matchedTotalCompany=n.nbHits,e.matchedCompany=n.hits}),this.jobIndex.search("".concat(this.jobSearch," ").concat(this.location),{facets:"*",filters:this.filters(),attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:20,page:this.jobPage},function(t,n){e.matchedTotalJob=n.nbHits,e.matchedJob=n.hits,trackEvent("match.search-results-job",{total:n.nbHits,selectedToolCount:e.selectedTools.length,location:e.location,keywords:e.jobSearch})}),$(document).trigger("match.search.done"),this.searching=!1}},{key:"filters",value:function(){var e=this.selectedTools.map(function(e){return'stack.name:"'.concat(e.name,'"')}).join(" ".concat(this.searchOperator," "));return this.excludedTools.length>0&&(e+=""===e?"NOT "+this.excludedTools.map(function(e){return'stack.name:"'.concat(e.name,'"')}).join(" AND NOT "):" AND (NOT "+this.excludedTools.map(function(e){return'stack.name:"'.concat(e.name,'"')}).join(" AND NOT ")+")"),e}},{key:"saveSelectedTools",value:function(){var e=this;if(!this.routerProps.userId)return $(document).trigger("match.sign-in"),void $(document).trigger("match.selected-tools-saved");var t=this.selectedTools.map(function(e){return{id:e.id,required:!!e.required}}),n=this.excludedTools.map(function(e){return{id:e.id,required:!!e.required}});$.ajax({url:"/api/v1/match/save_job_stack",type:"POST",contentType:"application/json",data:JSON.stringify({job_stack:{services:t,excluded_services:n}}),success:function(){$(document).trigger("match.selected-tools-saved"),e.saveState=xe}}),this.saveSearch()}},{key:"saveSearch",value:function(){var e={keywords:this.jobSearch,location:this.location,full_time:this.fullTime,freelance:this.freelance,remote:this.remote,match_exact:"OR"!==this.searchOperator};$.ajax({url:"/api/v1/match/save_search",type:"POST",contentType:"application/json",data:JSON.stringify({search:e})})}}])&&Pa(t.prototype,n),o&&Pa(t,o),e}()).prototype,"searching",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),na=Ia(ea.prototype,"jobSearch",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oa=Ia(ea.prototype,"location",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ra=Ia(ea.prototype,"searchOperator",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"AND"}}),aa=Ia(ea.prototype,"selectedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ia=Ia(ea.prototype,"excludedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ca=Ia(ea.prototype,"fullTime",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sa=Ia(ea.prototype,"freelance",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),la=Ia(ea.prototype,"remote",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ua=Ia(ea.prototype,"saveState",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ce}}),ma=Ia(ea.prototype,"userId",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pa=Ia(ea.prototype,"userName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fa=Ia(ea.prototype,"showGetJobAlerts",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),da=Ia(ea.prototype,"showPostAJob",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ha=Ia(ea.prototype,"showTwitterFollow",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ba=Ia(ea.prototype,"jobAlertMatchPercentage",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ya=Ia(ea.prototype,"jobAlertEmailFrequency",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),va=Ia(ea.prototype,"popularTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_a=Ia(ea.prototype,"matchedCompany",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ga=Ia(ea.prototype,"matchedTotalCompany",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wa=Ia(ea.prototype,"matchedJob",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ea=Ia(ea.prototype,"matchedTotalJob",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=Ia(ea.prototype,"visibleIndex",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Job"}}),Sa=Ia(ea.prototype,"jobPage",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oa=Ia(ea.prototype,"companyPage",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ea);function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function La(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ua,$a=Object(Ye.a)(Fa=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Aa(t).call(this,e))||"object"!==Ma(r)&&"function"!=typeof r?La(o):r).state={jobSearch:""},n.onKeyDown=n.onKeyDown.bind(La(n)),n.onChange=n.onChange.bind(La(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Da(e,t)}(t,i["Component"]),n=t,(o=[{key:"onKeyDown",value:function(e){"Enter"===e.key&&(trackEvent("match.keyword-search",{keywords:this.context.globalStore.jobSearch,location:this.context.globalStore.location,source:"keywords"}),clearTimeout(this.saveTimeout),this.context.globalStore.serializeToUrl(),this.context.globalStore.search())}},{key:"onChange",value:function(e){var t=this;clearTimeout(this.saveTimeout),this.context.globalStore.jobSearch=e.target.value,this.context.globalStore.saveState=Ce,this.saveTimeout=setTimeout(function(){t.context.globalStore.serializeToUrl(),t.context.globalStore.search()},2e3)}},{key:"render",value:function(){return c.a.createElement("div",{className:"match__search"},c.a.createElement("div",{className:"match__search__icon"},c.a.createElement("span",{className:"fa fa-search"})),c.a.createElement("input",{className:"match__search__jobs",placeholder:"Search by position, industry or keyword",value:this.context.globalStore.jobSearch,name:"jobSearch",onChange:this.onChange,onKeyDown:this.onKeyDown}),c.a.createElement("div",{className:"powered-by",style:{position:"inherit",opacity:".75",float:"left",marginTop:"10px"}},"Powered by",c.a.createElement("a",{href:"/algolia"},c.a.createElement("img",{style:{width:"80px"},alt:"Algolia",src:"https://img.stackshare.io/fe/algolia.png"}))))}}])&&za(n.prototype,o),r&&za(n,r),t}())||Fa;function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ha(e,t){return(Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}$a.contextTypes={globalStore:ye.a.object};var Ja,Ga=Object(Ye.a)(Ua=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Wa(t).call(this,e))||"object"!==Ba(r)&&"function"!=typeof r?Va(o):r).onChange=n.onChange.bind(Va(n)),n.search=n.search.bind(Va(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;places&&places({type:"city",templates:{value:function(e){return e.name}},container:document.querySelector("#algolia-places")}).on("change",function(t){e.context.globalStore.location="".concat(t.suggestion.value),trackEvent("match.keyword-search",{keywords:e.context.globalStore.jobSearch,location:e.context.globalStore.location,source:"location"}),e.search()});$(".ap-icon-clear").click(function(){e.context.globalStore.location="",e.search()})}},{key:"search",value:function(){this.context.globalStore.serializeToUrl(),this.context.globalStore.search()}},{key:"onChange",value:function(e){var t=this;clearTimeout(this.saveTimeout),this.context.globalStore.location=e.target.value,this.context.globalStore.saveState=Ce,this.saveTimeout=setTimeout(function(){t.context.globalStore.serializeToUrl(),t.context.globalStore.search()},2e3)}},{key:"render",value:function(){return c.a.createElement("div",{className:"match__location-wrapper"},c.a.createElement("div",{className:"match__location"},c.a.createElement("input",{type:"search",id:"algolia-places",placeholder:"Location",value:this.context.globalStore.location,onChange:this.onChange,ref:"location"})))}}])&&qa(n.prototype,o),r&&qa(n,r),t}())||Ua;function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ga.contextTypes={globalStore:ye.a.object};var ei,ti=Object(Ye.a)(Ja=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Za(t).call(this,e))||"object"!==Ka(r)&&"function"!=typeof r?Xa(o):r).saveSelectedTools=n.saveSelectedTools.bind(Xa(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(t,i["Component"]),n=t,(o=[{key:"saveSelectedTools",value:function(){this.context.routerProps.userId?(trackEvent("match.selectedTools.save",{toolCount:this.context.globalStore.selectedTools.length}),this.context.globalStore.saveState=je,this.context.globalStore.saveSelectedTools()):$(document).trigger("match.sign-in")}},{key:"render",value:function(){var e;switch(this.context.globalStore.saveState){case Ce:e=c.a.createElement("button",{className:"match__save-wrap__save",onClick:this.saveSelectedTools},"Save Search");break;case je:e=c.a.createElement("button",{className:"match__save-wrap__save disabled"},"Saving...");break;case xe:e=c.a.createElement("button",{className:"match__save-wrap__save disabled"},"Saved")}return c.a.createElement("div",{className:"match__save-wrap"},e)}}])&&Ya(n.prototype,o),r&&Ya(n,r),t}())||Ja;function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ri(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ti.contextTypes={globalStore:ye.a.object,routerProps:ye.a.object};var ci,si=Object(Ye.a)(ei=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ri(this,ai(t).call(this,e))).toggleOperator=function(){n.context.globalStore.searching||("AND"===n.context.globalStore.searchOperator?n.context.globalStore.searchOperator="OR":n.context.globalStore.searchOperator="AND",$(document).trigger("builder.tool.operatorChanged"),n.context.globalStore.serializeToUrl())},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(t,i["Component"]),n=t,(o=[{key:"styles",value:function(){return"AND"===this.context.globalStore.searchOperator?{color:"#0690fa"}:{color:"#ccc"}}},{key:"render",value:function(){return c.a.createElement("div",{className:"match__and-or-toggle",onClick:this.toggleOperator},c.a.createElement("p",null,"Exact Match"),c.a.createElement("div",{className:"fa fa-check-square",style:this.styles()}))}}])&&oi(n.prototype,o),r&&oi(n,r),t}())||ei;function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}si.contextTypes={globalStore:ye.a.object};var di=Object(Ye.a)(ci=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mi(this,pi(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"match__builder-hero"},c.a.createElement("h2",null,"Stack Match"),c.a.createElement("p",null,"Find jobs that match your tech stack"),c.a.createElement("div",{className:"match__builder-hero__jobsites"},c.a.createElement("img",{alt:"Jobsites",src:Ca})),c.a.createElement("div",{className:"match__builder-hero__input-wrapper"},c.a.createElement("div",{className:"match__builder-hero__row-1"},c.a.createElement("div",{className:"match__builder-hero__row-1__selected-tools"},c.a.createElement("h6",null,"TOOLS TO INCLUDE"),c.a.createElement(_n,{multiline:!1,selectedToolsField:"selectedTools",placeholder:"Add tools",appendedChild:c.a.createElement(si,null)})),c.a.createElement("div",{className:"match__builder-hero__row-1__excluded-tools"},c.a.createElement("h6",null,"TOOLS TO EXCLUDE"),c.a.createElement(_n,{selectedToolsField:"excludedTools",addFunction:this.context.globalStore.addExcludedTool,removeFunction:this.context.globalStore.removeExcludedTool,placeholder:"Exclude tools"}))),c.a.createElement("div",{className:"match__builder-hero__row-2"},c.a.createElement($a,null),c.a.createElement(Ga,null)),c.a.createElement(ti,null)))}}])&&ui(n.prototype,o),r&&ui(n,r),t}())||ci;function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e,t){return(_i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}di.contextTypes={globalStore:ye.a.object};var gi=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=yi(t).call(this,e))||"object"!==hi(r)&&"function"!=typeof r?vi(o):r).state={unsubcribed:!1,subscribed:!1},n.saveAlert=n.saveAlert.bind(vi(n)),n.notification=n.notification.bind(vi(n)),n.getAlertsButton=n.getAlertsButton.bind(vi(n)),n.getAlerts=n.getAlerts.bind(vi(n)),n.dismissComponent=n.dismissComponent.bind(vi(n)),n.percentageSelect=n.percentageSelect.bind(vi(n)),n.frequencySelect=n.frequencySelect.bind(vi(n)),setTimeout(function(){$("select").selectize({create:!0})},200),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_i(e,t)}(t,i["Component"]),n=t,(o=[{key:"saveAlert",value:function(){var e=this,t="None/Never"!==$(".match__job-alerts__update-frequency").val(),n=$(".match__job-alerts__update-frequency").val(),o=$(".match__job-alerts__match-percentage").val();trackEvent("match.alerts.subscribed"),this.setState({subscribed:!1,unsubcribed:!1}),t?$.post("/api/v1/match/save_search",{search:{email_enabled:!0,email_frequency:n,email_match_percentage:o}},function(){e.setState({subscribed:!0})}).fail(function(){return null}):$.post("/api/v1/match/save_search",{search:{email_enabled:!1}},function(){e.setState({unsubcribed:!0})}).fail(function(){return null})}},{key:"getAlerts",value:function(){trackEvent("match.alerts.modal")}},{key:"notification",value:function(){return this.state.subscribed?c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("p",null,"You are now subscribed for job alerts.")):this.state.unsubcribed?c.a.createElement("div",{className:"alert alert-error"},c.a.createElement("p",null,"You have unsubscribed from job alerts.")):void 0}},{key:"modal",value:function(){var e=this;return c.a.createElement("div",{className:"modal fade",id:"job-alert-modal",tabIndex:"-3",role:"dialog","aria-labelledby":"job-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},this.notification(),c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Get Job Alerts"),c.a.createElement("div",{className:"tools-list"},this.context.globalStore.selectedTools.map(function(e){return c.a.createElement("div",{key:"job-alert-tool-".concat(e.id),className:"tools-list__tool small borderless"},c.a.createElement("img",{src:e.image_url}))}))),c.a.createElement("div",{className:"modal-body manage-modal-body"},function(){if(e.context.globalStore.location)return c.a.createElement("div",{className:"form-group loc-field"},c.a.createElement("p",null,c.a.createElement("b",null,"Location: ")," ",e.context.globalStore.location))}(),function(){if(e.context.globalStore.jobSearch)return c.a.createElement("div",{className:"form-group"},c.a.createElement("p",null,c.a.createElement("b",null,"Filters: ")," ",e.context.globalStore.jobSearch))}(),this.percentageSelect(),this.frequencySelect()),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:this.saveAlert,type:"button",className:"btn btn-primary btn-match-modal"},"Save Job Alert")))))}},{key:"frequencySelect",value:function(){return c.a.createElement("div",{className:"form-group timing-field"},c.a.createElement("select",{value:this.context.globalStore.jobAlertEmailFrequency||"",className:"match__job-alerts__update-frequency"},c.a.createElement("option",{value:"Daily"},"Daily updates"),c.a.createElement("option",{value:"Weekly"},"Weekly updates"),c.a.createElement("option",{value:"Monthly"},"Monthly updates"),c.a.createElement("option",{value:"None/Never"},"None/Never")))}},{key:"percentageSelect",value:function(){return c.a.createElement("div",{className:"form-group match-field"},c.a.createElement("select",{value:this.context.globalStore.jobAlertMatchPercentage||"",className:"match__job-alerts__match-percentage"},c.a.createElement("option",{value:"100"},"100% Match"),c.a.createElement("option",{value:"75"},"75% Match"),c.a.createElement("option",{value:"50"},"50% Match"),c.a.createElement("option",{value:"25"},"25% Match")))}},{key:"dismissComponent",value:function(){this.context.globalStore.showGetJobAlerts=!1}},{key:"getAlertsButton",value:function(){return this.context.globalStore.userId?c.a.createElement("button",{"data-toggle":"modal","data-target":"#job-alert-modal",onClick:this.getAlerts,className:"btn"},"Get Alerts"):c.a.createElement("button",{"data-toggle":"modal",onClick:function(){return $(document).trigger("match.sign-in")},className:"btn"},"Get Alerts")}},{key:"render",value:function(){return c.a.createElement("div",{id:"match__job-alerts",className:"match__post-a-job"},c.a.createElement("button",{onClick:this.dismissComponent,className:"panel-dismiss"},c.a.createElement("span",{"aria-hidden":"true"},"×")),this.getAlertsButton(),this.modal(),"for new job matches or subscribe via RSS",c.a.createElement("a",{href:"/match.atom"},c.a.createElement("i",{className:"fa fa-rss-square match-rss"})))}}])&&bi(n.prototype,o),r&&bi(n,r),t}();function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}gi.contextTypes={globalStore:ye.a.object};var Ni=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=ki(t).call(this,e),(n=!r||"object"!==wi(r)&&"function"!=typeof r?Si(o):r).dismissComponent=function(){n.context.globalStore.showPostAJob=!1},n.state={companyType:null,link:null},n.postJob=n.postJob.bind(Si(n)),n.openModal=n.openModal.bind(Si(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oi(e,t)}(t,i["Component"]),n=t,(o=[{key:"openModal",value:function(){trackEvent("match.post.modal")}},{key:"postJob",value:function(){var e=this,t=$(".match__post-a-job__company-url").val(),n=$(".match__post-a-job__job-posting-url").val();null!=t&&""!==t?$.post("/api/v1/match/add_job",{company_url:t,job_posting_url:n},function(t){_.isEmpty(t)||""===t.slug?e.setState({companyType:":new"}):e.setState({companyType:":existing",link:"/edit_jobs?id=".concat(t.id)}),trackEvent("match.post.saved")}).fail(function(){trackEvent("match.post.save-error")}):this.setState({companyType:":invalid"})}},{key:"notification",value:function(){return":existing"===this.state.companyType?c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("p",null,"It looks like your company is already on StackShare. Add your jobs"," ",c.a.createElement("a",{href:this.state.link,className:"post-jobs-existing-co"},"here"),".")):":new"===this.state.companyType?c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("p",null,"We are adding your jobs. We will send an email when we finish importing your jobs.")):":invalid"===this.state.companyType?c.a.createElement("div",{className:"alert alert-error"},c.a.createElement("p",null,"Please add your website url.")):""}},{key:"modal",value:function(){return c.a.createElement("div",{className:"modal fade",id:"post-a-job-modal",tabIndex:"-3",role:"dialog","aria-labelledby":"job-modal"},c.a.createElement("div",{className:"modal-dialog manage-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},this.notification(),c.a.createElement("div",{className:"modal-header"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"×")),c.a.createElement("h4",{className:"modal-title manage-modal-title",id:"myModalLabel"},"Post Jobs"),c.a.createElement("p",null,"Enter your company website and a Lever or Greenhouse URL.")),c.a.createElement("div",{className:"modal-body manage-modal-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Company Website URL"),c.a.createElement("input",{className:"form-control match__post-a-job__company-url",type:"url",placeholder:"http://company.com"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Lever/Greenhouse URL (optional)"),c.a.createElement("span",{className:"post-job-details"},"Enter a job listing URL from Lever or Greenhouse and we'll automatically grab the rest of your engineering roles. Don't worry if you don't have Lever or Greenhouse, you can enter your jobs manually once your company has been created."),c.a.createElement("input",{className:"form-control match__post-a-job__job-posting-url",type:"url",placeholder:"https://boards.greenhouse.io/nextdoor"}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:this.postJob,type:"button",className:"btn btn-primary btn-match-modal"},"List Jobs")))))}},{key:"postAJobButton",value:function(){return this.context.globalStore.userId?c.a.createElement("a",{href:"/add-job",className:"btn"},"Post a Job"):c.a.createElement("button",{"data-toggle":"modal",onClick:function(){return $(document).trigger("match.sign-in")},className:"btn"},"Post a Job")}},{key:"render",value:function(){return c.a.createElement("div",{className:"match__job-alerts"},c.a.createElement("button",{onClick:this.dismissComponent,className:"panel-dismiss"},c.a.createElement("span",{"aria-hidden":"true"},"×")),"Reach ",c.a.createElement("b",null,"100K"),"+ software engineers looking for their next job",this.postAJobButton(),this.modal())}}])&&Ei(n.prototype,o),r&&Ei(n,r),t}();function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xi(e,t){return!t||"object"!==Ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ni.contextTypes={globalStore:ye.a.object};var Ii=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xi(this,Ti(t).call(this,e))).dismissComponent=function(){n.context.globalStore.showTwitterFollow=!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"match__follow_twitter"},c.a.createElement("button",{onClick:this.dismissComponent,className:"panel-dismiss"},c.a.createElement("span",{"aria-hidden":"true"},"×")),"Keep up with the latest jobs on Stack Match on Twitter",c.a.createElement("a",{className:"btn",href:"http://twitter.com/stack_match"},"Follow @stack_match"))}}])&&ji(n.prototype,o),r&&ji(n,r),t}();function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mi(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ai(e,t){return(Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ii.contextTypes={globalStore:ye.a.object};var Li,Di=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mi(this,zi(t).call(this,e))).colors=["#FF7F17","#FF7F17","#FF7F17","#FF7F17","#FF7F17","#FF7F17","#0090F9","#0090F9","#45C57C","#45C57C"],n.animate=function(e){e.animate(0,3.6*n.state.percent,function(e){n.drawCircle(e)},2e3,mina.easeinout)},n.drawCircle=function(e){n.arc.remove();var t=e,o=t-90,r=Math.PI*o/180,a=n.canvasCenter+n.radius*Math.cos(r),i=n.canvasCenter+n.radius*Math.sin(r),c=t>180?1:0;n.path="M"+n.canvasCenter+","+n.startY+" A"+n.radius+","+n.radius+" 0 "+c+",1 "+a+","+i,n.arc=n.s.path(n.path),n.arc.attr({stroke:n.state.color,fill:"none",strokeWidth:n.opts.strokeWidth}),n.refs.labelPer&&(n.refs.labelPer.innerHTML="".concat(Math.round(e/360*100),"%<div class='match-per'>Match</div>"))},n.styles=function(){return n.props.fill,{color:n.state.color}},n.state={percent:Math.min(e.percent,99.999),color:"#ccc"},n.opts=Object.assign({animate:!0,strokeWidth:2,bgStrokeWidth:2},e),n}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(t,i["Component"]),o=t,(r=[{key:"getColor",value:function(e){return this.colors[Math.min(Math.max(Math.floor(10*e)-1,0),this.colors.length-1)]}},{key:"componentDidMount",value:function(){var e=this;n.e(29).then(n.t.bind(null,"/home/circleci/frontend/node_modules/imports-loader/index.js?this=>window,fix=>module.exports=0!/home/circleci/frontend/node_modules/snapsvg/dist/snap.svg.js",7)).then(function(t){if(e.refs.svg){var n=t.default;e.s=n(e.refs.svg),e.canvasWidth=e.refs.svg.getBoundingClientRect().width,e.canvasCenter=e.canvasWidth/2,e.radius=e.canvasWidth/2-3,e.startY=e.canvasCenter-e.radius,e.path="",e.arc=e.s.path(e.path),e.circle=e.s.path(e.path),e.drawBGCircle(1),e.timeout=setTimeout(function(){var t=e.getColor(e.props.percent/100);e.setState({color:t}),e.drawBGCircle(.15),e.opts.animate?e.animate(n):e.drawCircle(3.6*e.state.percent)},1e3)}}).catch(function(){return null})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"drawBGCircle",value:function(e){this.circle.remove(),this.circle=this.s.path("M".concat(this.canvasCenter,",").concat(this.startY," A").concat(this.radius,",").concat(this.radius," 0 1,1 ").concat(this.canvasCenter-.001,",").concat(this.startY,"Z")),this.circle.attr({stroke:this.state.color,strokeOpacity:e,fill:"none",strokeWidth:this.opts.bgStrokeWidth})}},{key:"render",value:function(){return c.a.createElement("div",{className:"percent-container",style:this.styles()},c.a.createElement("svg",{ref:"svg"}),c.a.createElement("label",{className:"label-per",ref:"labelPer"},"? ",c.a.createElement("div",{className:"match-per"},"Match")))}}])&&Ri(o.prototype,r),a&&Ri(o,a),t}();function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Bi(e,t){return!t||"object"!==Ui(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wi(e,t){return(Wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vi,Hi=Object(Ye.a)(Li=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bi(this,qi(t).call(this,e))).tools=e.tools.filter(function(t){return!e.matchedTools.find(function(e){return e.id===t.id})}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wi(e,t)}(t,i["Component"]),n=t,(o=[{key:"img",value:function(e){return e||"https://img.stackshare.io/fe/default-img/service.svg"}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"more-tools"},c.a.createElement("div",{className:"more-tools__content"},this.tools.map(function(t){return c.a.createElement("a",{key:"".concat(e.props.parentId,"-").concat(t.id),href:"/".concat(t.slug),target:"_blank",rel:"noopener noreferrer",className:"hint--top","data-hint":t.name,"data-align":"left"},c.a.createElement("img",{src:e.img(t.image_url)}))})))}}])&&$i(n.prototype,o),r&&$i(n,r),t}())||Li;function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ki(e,t){return!t||"object"!==Ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t){return(Zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xi,Qi=Object(Ye.a)(Vi=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Ki(this,(e=Yi(t)).call.apply(e,[this].concat(r)))).refineMatchResultsByTag=function(e,t){t.stopPropagation();var o=n.context.globalStore.jobSearch;o.includes(e)||(o=0===o.length?e:"".concat(o," ").concat(e),n.context.globalStore.jobSearch=o,trackEvent("match.keyword-search",{keywords:n.context.globalStore.jobSearch,location:n.context.globalStore.location,source:"keywords"}),n.context.globalStore.serializeToUrl(),n.context.globalStore.search())},n.matchedTools=function(){var e=0,t=n.context.globalStore.selectedTools.map(function(t){if(n.props.company.stack.find(function(e){return e.id===t.id}))return e+=1,c.a.createElement("a",{key:"match-company-".concat(n.props.company.id,"-item-").concat(t.id),className:"hint--top tools-link","data-align":"left","data-hint":t.name,href:t.canonical_url,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{className:"tools-img",src:t.image_url}))});return n.props.company.stack.length-e==0?t:(t.push(c.a.createElement("div",{key:"match-company-more-tools-".concat(n.props.company.id),className:"more-tools__container"},c.a.createElement("a",{className:"matched-tools-more hint--top","data-align":"left","data-hint":"See more",href:n.props.company.company_url},"+",n.props.company.stack.length-e," more tools"),c.a.createElement(Hi,{tools:n.props.company.stack,matchedTools:n.context.globalStore.selectedTools,parentId:n.props.company.id}))),t)},n.matchPercentage=function(){return 0===n.context.globalStore.selectedTools.length?1:n.context.globalStore.selectedTools.filter(function(e){return n.props.company.stack.some(function(t){return e.id===t.id})}).length/n.context.globalStore.selectedTools.length*100},n.description=function(){return n.props.company.description?_(n.props.company.description).truncate(320):c.a.createElement("p",{style:{fontStyle:"italic",color:"#aaa"}},"No company description.")},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zi(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"match__match-container",id:"company-".concat(this.props.company.id),style:{containerHeight:"auto"}},c.a.createElement("div",{className:"match__match-container__summary",style:{paddingBottom:0}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-3",id:"match-percent"},c.a.createElement(Di,{percent:this.matchPercentage(),fill:!0})),c.a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-3"},c.a.createElement("div",{className:"match__match-container__summary__company-image"},this.props.company.image_url?c.a.createElement("img",{src:this.props.company.image_url}):c.a.createElement("span",{className:"glyphicon glyphicon-align-justify no-co-img"}))),c.a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-6",style:{padding:"0px"}},c.a.createElement("div",{className:"match__match-container__summary__job-title"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(this.props.company.company_url,"#jobs")},this.props.company.name,this.props.company.verified&&c.a.createElement("span",{className:"hint--right","data-hint":"Tech Stack Verified by ".concat(this.props.company.name),"data-align":"left"},c.a.createElement("div",{className:"fa fa-check-circle"}))))),c.a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-12"},c.a.createElement("div",{className:"match__match-container__summary__location"},this.props.company.city&&c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),"  ",this.props.company.city))),c.a.createElement("div",{className:"col-md-2 col-sm-3 col-xs-12"},c.a.createElement("div",{className:"match__match-container__summary__actions"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(this.props.company.company_url,"#jobs"),style:{margin:0,marginLeft:"5px",float:"right"},className:"match__job-info__btn m-r0"},"View Jobs")))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-11 col-md-offset-1 col-sm-offset-0 col-sm-12 col-xs-offset-0 col-xs-12"},c.a.createElement("p",{className:"tag-list"},this.props.company.tag_list&&this.props.company.tag_list.map(function(t,n){return c.a.createElement("span",{key:"match-company-tag-".concat(e.props.company.id,"-").concat(n),onClick:function(n){return e.refineMatchResultsByTag(t,n)}},t)}))))),c.a.createElement("div",{className:"match__job-info-wrapper",style:{padding:"15px"}},c.a.createElement("div",{className:"row",style:{padding:"0 10px",marginBottom:"15px"}},c.a.createElement("div",{className:"col-md-7 col-md-offset-1"},this.description()),c.a.createElement("div",{className:"col-md-4 team"},this.props.company.team&&this.props.company.team.length>0&&c.a.createElement("p",{className:"team-title"},"Team"),this.props.company.team&&this.props.company.team.map(function(e){return c.a.createElement("a",{key:"match-company-user".concat(e.id),className:"user hint--top","data-align":"left","data-hint":e.username,href:"/".concat(e.slug)},c.a.createElement("img",{src:e.image_url}))}))),c.a.createElement("div",{className:"row",style:{padding:"0 10px"}},c.a.createElement("div",{className:"col-md-7 col-md-offset-1"},c.a.createElement("div",{className:"panel-body match__job-info",style:{padding:0,paddingTop:"20px"}},this.matchedTools())),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("a",{style:{margin:0},target:"_blank",rel:"noopener noreferrer",href:"".concat(this.props.company.company_url,"#jobs")},c.a.createElement("b",null,this.props.company.job_count)," Jobs listed")))))}}])&&Gi(n.prototype,o),r&&Gi(n,r),t}())||Vi;function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nc(e,t){return!t||"object"!==ec(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oc(e){return(oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Qi.contextTypes={globalStore:ye.a.object};var ac=Object(Ye.a)(Xi=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=nc(this,(e=oc(t)).call.apply(e,[this].concat(r)))).refineMatchResultsByTag=function(e,t){t.stopPropagation();var o=n.context.globalStore.jobSearch;o.includes(e)||(o=0===o.length?e:"".concat(o," ").concat(e),n.context.globalStore.jobSearch=o,trackEvent("match.keyword-search",{keywords:n.context.globalStore.jobSearch,location:n.context.globalStore.location,source:"keywords"}),n.context.globalStore.serializeToUrl(),n.context.globalStore.search())},n.matchedTools=function(){var e=0,t=n.props.job.stack.map(function(e){return e.id}),o=n.context.globalStore.selectedTools.map(function(o){if(t.find(function(e){return e===o.id}))return e+=1,c.a.createElement("a",{key:"match-job-".concat(n.props.job.id,"-item-").concat(o.id),className:"hint--top tools-link","data-align":"left","data-hint":o.name,href:o.canonical_url,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{className:"tools-img",src:o.image_url}))});return n.props.job.stack.length-e==0?o:(o.push(c.a.createElement("div",{key:"match-job-more-tools".concat(n.props.job.id),className:"more-tools__container"},c.a.createElement("a",{className:"matched-tools-more hint--top",href:"/match/jobs/".concat(n.props.job.slug)},"+",n.props.job.stack.length-e," more tools"),c.a.createElement(Hi,{tools:n.props.job.stack,matchedTools:n.context.globalStore.selectedTools,parentId:n.props.job.id}))),o)},n.matchPercentage=function(){if(0===n.context.globalStore.selectedTools.length)return 1;for(var e=0,t=0;t<n.context.globalStore.selectedTools.length;t++)for(var o=0;o<n.props.job.stack.length;o++)if(n.context.globalStore.selectedTools[t].id===n.props.job.stack[o].id){e++;break}return e/n.context.globalStore.selectedTools.length*100},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rc(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"match__match-container",id:"job-".concat(this.props.job.id),style:{containerHeight:"auto"}},c.a.createElement("div",{className:"match__match-container__summary"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-3",id:"match-percent"},c.a.createElement(Di,{percent:this.matchPercentage(),fill:!0})),c.a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-3"},c.a.createElement("div",{className:"match__match-container__summary__company-image"},this.props.job.company_image_url?c.a.createElement("img",{src:this.props.job.company_image_url}):c.a.createElement("span",{className:"glyphicon glyphicon-align-justify no-co-img"}))),c.a.createElement("div",{className:"col-md-4 col-md-offset-0 col-sm-4 col-sm-offset-0 col-xs-11 col-xs-offset-1",style:{padding:"0px"}},c.a.createElement("div",{className:"match__match-container__summary__job-title"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/match/jobs/".concat(this.props.job.slug)},this.props.job.title,this.props.job.verified&&c.a.createElement("span",{className:"hint--right","data-hint":"Tech Stack Verified by ".concat(this.props.job.name),"data-align":"left"},c.a.createElement("div",{className:"fa fa-check-circle"}))))),c.a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-12"},c.a.createElement("div",{className:"match__match-container__summary__location"},this.props.job.city&&c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),"  ",this.props.job.city))),c.a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-12"},c.a.createElement("div",{className:"match__match-container__summary__actions"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/match/jobs/".concat(this.props.job.slug),style:{margin:0,marginLeft:"5px",float:"right"},className:"match__job-info__btn"},"See Details"),c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(this.props.job.apply_url),style:{margin:0,marginLeft:"5px",float:"right"},className:"match__job-info__btn"},"Apply")))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-11 col-md-offset-1 col-sm-offset-0 col-sm-12 col-xs-offset-0 col-xs-12"},c.a.createElement("p",{className:"tag-list"},this.props.job.company_tag_list&&this.props.job.company_tag_list.map(function(t,n){return c.a.createElement("span",{key:"match-job-tag-".concat(e.props.job.id,"-").concat(n),onClick:function(n){return e.refineMatchResultsByTag(t,n)}},t)})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-11 col-md-offset-1 col-sm-offset-0 col-sm-12 col-xs-offset-0 col-xs-12"},c.a.createElement("div",{className:"panel-body match__job-info"},this.matchedTools())))))}}])&&tc(n.prototype,o),r&&tc(n,r),t}())||Xi;function ic(e){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sc(e,t){return!t||"object"!==ic(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t){return(uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ac.contextTypes={globalStore:ye.a.object};var mc,pc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sc(this,lc(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uc(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("p",{className:"no-results"},"No results found :( Try tweaking your search")}}])&&cc(n.prototype,o),r&&cc(n,r),t}();function fc(e){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hc(e,t){return!t||"object"!==fc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bc(e){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yc(e,t){return(yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vc,_c=Object(Ye.a)(mc=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=hc(this,(e=bc(t)).call.apply(e,[this].concat(r)))).insertAds=function(e){n.context.globalStore.showGetJobAlerts&&e.splice(0,0,c.a.createElement("section",{key:"match-results-ads-a"},c.a.createElement(gi,null))),e.length>5&&n.context.globalStore.showPostAJob&&e.splice(5,0,c.a.createElement("section",{key:"match-results-ads-b"},c.a.createElement(Ni,null))),e.length>15&&n.context.globalStore.showTwitterFollow&&e.splice(15,0,c.a.createElement("section",{key:"match-result-ads-c"},c.a.createElement(Ii,null)))},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yc(e,t)}(t,i["Component"]),n=t,(o=[{key:"companies",value:function(){if(0===this.context.globalStore.matchedCompany.length)return c.a.createElement(pc,null);var e=this.context.globalStore.matchedCompany.map(function(e){return c.a.createElement(Qi,{company:e,key:"match-company-".concat(e.id)})});return this.insertAds(e),e}},{key:"jobs",value:function(){if(0===this.context.globalStore.matchedJob.length)return c.a.createElement(pc,null);var e=this.context.globalStore.matchedJob.map(function(e){return c.a.createElement(ac,{job:e,key:"match-job-".concat(e.id)})});return this.insertAds(e),e}},{key:"switchVisibleIndex",value:function(e){this.context.globalStore.visibleIndex=e}},{key:"render",value:function(){var e=this;return this.context.globalStore.searching?c.a.createElement("div",{className:"container-fluid match__results-container"},c.a.createElement("img",{className:"loading-spinner",src:"https://img.stackshare.io/fe/spinner.svg",alt:"Loading..."})):c.a.createElement("div",{className:"container-fluid match__results-container"},c.a.createElement("div",{className:"match__results-container__type-buttons"},c.a.createElement("button",{className:"Job"===this.context.globalStore.visibleIndex?"active":"",onClick:function(){return e.switchVisibleIndex("Job")}},c.a.createElement("span",{className:"match__results-container__type-buttons__match-type"},"Jobs"),c.a.createElement("span",{className:"match__results-container__type-buttons__match-count"},this.context.globalStore.matchedTotalJob)),c.a.createElement("button",{className:"Company"===this.context.globalStore.visibleIndex?"active":"",onClick:function(){return e.switchVisibleIndex("Company")}},c.a.createElement("span",{className:"match__results-container__type-buttons__match-type"},"Companies"),c.a.createElement("span",{className:"match__results-container__type-buttons__match-count"},this.context.globalStore.matchedTotalCompany))),"Company"===this.context.globalStore.visibleIndex&&this.companies(),"Job"===this.context.globalStore.visibleIndex&&this.jobs())}}])&&dc(n.prototype,o),r&&dc(n,r),t}())||mc;function gc(e){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ec(e){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_c.contextTypes={globalStore:ye.a.object};var Oc,Nc=Object(Ye.a)(vc=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Ec(t).call(this,e))||"object"!==gc(r)&&"function"!=typeof r?kc(o):r).state={loading:!1},n.searchDone=n.searchDone.bind(kc(n)),n.loadMore=n.loadMore.bind(kc(n)),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){$(document).on("match.search.done",this.searchDone)}},{key:"componentWillUnmount",value:function(){$(document).off("match.search.done",this.searchDone)}},{key:"searchDone",value:function(){this.setState({loading:!1})}},{key:"loadMore",value:function(){this.setState({loading:!0});var e=this.context.globalStore.visibleIndex;this.context.globalStore.loadMore(e)}},{key:"render",value:function(){var e=this.context.globalStore["matched"+this.context.globalStore.visibleIndex].length;return this.context.globalStore["matchedTotal"+this.context.globalStore.visibleIndex]>e?this.state.loading?c.a.createElement("button",{className:"button centered-and-alone disabled"},"Loading..."):c.a.createElement("button",{className:"button centered-and-alone m150",onClick:this.loadMore},"Load More"):null}}])&&wc(n.prototype,o),r&&wc(n,r),t}())||vc;function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pc(e,t){return(Pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Nc.contextTypes={globalStore:ye.a.object};var Ic,Fc,Rc=Object(Ye.a)(Oc=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=xc(t).call(this,e))||"object"!==Cc(r)&&"function"!=typeof r?Tc(o):r).state={signIn:!1},n.closeSignInModal=n.closeSignInModal.bind(Tc(n)),n.bindEvents(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pc(e,t)}(t,i["Component"]),n=t,(o=[{key:"bindEvents",value:function(){var e=this;$(document).on("match.sign-in",function(){e.setState({signIn:!0})})}},{key:"getChildContext",value:function(){return{globalStore:this.context.globalStore,routerProps:this.context.routerProps,toolSlug:this.props.routeParams.toolSlug}}},{key:"closeSignInModal",value:function(){this.setState({signIn:!1})}},{key:"render",value:function(){return c.a.createElement("div",{className:"match"},c.a.createElement(di,null),c.a.createElement(_c,null),c.a.createElement(Nc,null),this.state.signIn&&c.a.createElement(ut.b,{onDismiss:this.closeSignInModal,redirect:"/match"}))}}])&&jc(n.prototype,o),r&&jc(n,r),t}())||Oc;function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ac(e,t){return!t||"object"!==Mc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lc(e){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Rc.contextTypes={globalStore:ye.a.object,routerProps:ye.a.object},Rc.childContextTypes={globalStore:ye.a.object,routerProps:ye.a.object,toolSlug:ye.a.string};var Uc=Object(Ye.a)(Ic=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Ac(this,Lc(t).call(this,e)),Fc=new Ra({routerProps:n.props}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(t,i["Component"]),n=t,(o=[{key:"getChildContext",value:function(){return{globalStore:Fc,routerProps:this.props}}},{key:"render",value:function(){return c.a.createElement(ve.d,{history:ve.e},c.a.createElement(ve.c,{path:"/match",component:Rc}),c.a.createElement(ve.c,{path:"".concat("/match","/:toolSlug"),component:Rc}))}}])&&zc(n.prototype,o),r&&zc(n,r),t}())||Ic;function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bc(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qc(e,t){return!t||"object"!==$c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vc(e,t){return(Vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Uc.childContextTypes={globalStore:ye.a.object,routerProps:ye.a.object};var Hc,Jc,Gc,Kc,Yc,Zc,Xc,Qc=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qc(this,Wc(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vc(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("a",{href:decodeURIComponent(this.props.click_path),className:"no-underline"},this.props.has_job_stack&&c.a.createElement("div",{className:"percentage-label"},"Your job stack is a"),c.a.createElement(Di,{percent:this.props.percent,has_job_stack:this.props.has_job_stack}),c.a.createElement("div",{className:"percent-container__cta"},this.props.has_job_stack&&c.a.createElement("span",{className:"btn btn-ss btn-ss-alt btn-xs"},"View ",this.props.company_name,"'s Jobs"),!this.props.has_job_stack&&c.a.createElement("span",{className:"btn btn-ss btn-ss-alt btn-xs"},"Add your stack"),!this.props.has_job_stack&&c.a.createElement("div",{className:"cta-label"},"See if you're a match for ",this.props.company_name,"'s Jobs")))}}])&&Bc(n.prototype,o),r&&Bc(n,r),t}();function es(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function ts(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ns,os=(Jc=ts((Hc=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),es(this,"services",Jc,this),es(this,"nonSubmittedTools",Gc,this),es(this,"pendingApprovalTools",Kc,this),es(this,"selectedTool",Yc,this),es(this,"openedForm",Zc,this),es(this,"submissionInProgress",Xc,this),this.services=t.props.tools,this.nonSubmittedTools=t.props.tools.filter(function(e){return!e.submitted_for_approval}),this.pendingApprovalTools=t.props.tools.filter(function(e){return e.submitted_for_approval})}).prototype,"services",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gc=ts(Hc.prototype,"nonSubmittedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Kc=ts(Hc.prototype,"pendingApprovalTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yc=ts(Hc.prototype,"selectedTool",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=ts(Hc.prototype,"openedForm",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xc=ts(Hc.prototype,"submissionInProgress",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hc),rs=function(){return c.a.createElement("div",null,c.a.createElement("p",{className:"approval_title"},c.a.createElement("span",null,"Tools Pending Approval"),c.a.createElement("span",null,"Only visible to you, not public")),c.a.createElement("p",{className:"approval_orange"},"New: Click tool to pre-approve"))},as=function(e){var t=e.nonSubmittedTools,n=e.pendingApprovalTools,o=e.onServiceClick,r=e.selectedToolId;return c.a.createElement("div",null,t.map(function(e){return c.a.createElement("div",{className:"soft-approval-service approval_service "+(e.id===r?"approval_activeService":""),onClick:function(){o(e)},key:"services-".concat(e.id)},c.a.createElement("img",{src:"https://img.stackshare.io/fe/pending_approval.png"}),c.a.createElement("p",null,e.name))}),n.map(function(e){return c.a.createElement("div",{className:"soft-approval-service approval_service",key:"services-".concat(e.id)},c.a.createElement("img",{src:e.image_url}),c.a.createElement("i",{className:"pending-approval-tool-check fa fa-check"}),c.a.createElement("p",null,e.name))}),c.a.createElement("div",{className:"clearfix"}))};function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cs(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ss(e,t){return!t||"object"!==is(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ls(e){return(ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function us(e,t){return(us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ms,ps=Object(Ye.a)(ns=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ss(this,ls(t).call(this,e))).handleChange=function(e){var t=e.target,o="checkbox"===t.type?t.checked:t.value,r=t.name;n.props.handleFormChange(r,o)},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&us(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.widget=uploadcare.SingleWidget(this.refs.image_url),this.widget.onUploadComplete(function(t){e.props.handleFormChange("image_url",t.originalUrl)}),$(this.refs.title).characterCounter({limit:"120",counterCssClass:"counter"}),$(this.refs.description).characterCounter({limit:"240",counterCssClass:"counter"})}},{key:"render",value:function(){return c.a.createElement("div",{className:"soft-approval-form approval_form "+(this.props.opened?"approval_opened":"approval_closed")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8 col-xs-12"},c.a.createElement("form",{onSubmit:this.props.onFormSubmit},c.a.createElement("input",{value:this.props.service.id,readOnly:!0,required:!0,type:"hidden",className:"form-control",id:"serviceId"}),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{value:this.props.service.name,onChange:this.handleChange,type:"text",required:!0,className:"form-control",id:"name",name:"name",placeholder:"eg. ReactJS"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"title"},"One-line description"),c.a.createElement("input",{ref:"title",value:this.props.service.title||"",onChange:this.handleChange,type:"text",required:!0,className:"form-control",id:"title",name:"title",placeholder:"eg. A JavaScript library for building user interfaces"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"website_url"},"Website URL"),c.a.createElement("input",{value:this.props.service.website_url,onChange:this.handleChange,readOnly:!0,type:"text",required:!0,className:"form-control",id:"website_url",name:"website_url",placeholder:"eg. http://foobar.com"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"image_url"},"Image")),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{ref:"image_url",name:"image_url",role:"uploadcare-uploader",placeholder:"Upload image or paste logo URL",type:"hidden",pattern:".{3,}","data-images-only":"true","data-file-types":"png jpeg jpg","data-input-accept-types":"image/png image/jpeg"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{ref:"description",value:this.props.service.description||"",onChange:this.handleChange,type:"text",maxLength:"240",required:!0,className:"form-control",id:"description",name:"description",placeholder:"eg. The best way to render views in Javascript!"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"twitter_username"},"Twitter Handle"),c.a.createElement("input",{value:this.props.service.twitter_username||"",onChange:this.handleChange,type:"text",className:"form-control",id:"twitter_username",name:"twitter_username",placeholder:"eg. reactjs"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"features"},"Features (separated by semicolon;)"),c.a.createElement("textarea",{value:this.props.service.features||"",onChange:this.handleChange,type:"text",maxLength:"700",className:"form-control",id:"features",name:"features"})),c.a.createElement("button",{type:"submit",className:"btn btn-ss-alt btn-lg "+(this.props.submissionInProgress?"disabled":"")},"Submit for approval")))))}}])&&cs(n.prototype,o),r&&cs(n,r),t}())||ns;function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ds(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hs(e,t){return!t||"object"!==fs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bs(e){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vs,_s,gs,ws=Object(Ye.a)(ms=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hs(this,bs(t).call(this,e))).toggleFormVisibility=function(e){e===n.store.selectedTool?!1===n.store.openedForm?n.store.openedForm=!0:n.store.openedForm=!1:!1===n.store.openedForm&&(n.store.openedForm=!0)},n.updateImageForService=function(e,t){var o=n.store.nonSubmittedTools.findIndex(function(t){return t.id===e});n.store.nonSubmittedTools[o].image_url=t},n.markToolAsSubmitted=function(){var e=n.store.selectedTool;n.store.pendingApprovalTools.push(e);var t=n.store.nonSubmittedTools.findIndex(function(t){return t.id===e.id});-1!==t&&n.store.nonSubmittedTools.splice(t,1),n.store.selectedTool=void 0},n.onServiceClick=function(e){n.toggleFormVisibility(e),n.store.selectedTool=e},n.handleFormChange=function(e,t){n.store.selectedTool[e]=t},n.onFormSubmit=function(e){e.preventDefault();var t=n.store.selectedTool.id,o={name:n.store.selectedTool.name,title:n.store.selectedTool.title,image_url:n.store.selectedTool.image_url,description:n.store.selectedTool.description,twitter_username:n.store.selectedTool.twitter_username,features:n.store.selectedTool.features};n.store.submissionInProgress=!0,$.post("/api/v1/services/submit_soft_approval",{id:t,service:o},function(e){n.updateImageForService(e.id,e.image_url),n.markToolAsSubmitted(),n.store.openedForm=!1,n.store.submissionInProgress=!1})},n.store=new os({props:e}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ys(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"approval_container"},c.a.createElement(rs,null),c.a.createElement(as,{nonSubmittedTools:this.store.nonSubmittedTools,pendingApprovalTools:this.store.pendingApprovalTools,selectedToolId:this.store.selectedTool?this.store.selectedTool.id:0,onServiceClick:this.onServiceClick}),this.store.selectedTool&&c.a.createElement(ps,{submissionInProgress:this.store.submissionInProgress,service:this.store.selectedTool,opened:this.store.openedForm,handleFormChange:this.handleFormChange,onFormSubmit:this.onFormSubmit}))}}])&&ds(n.prototype,o),r&&ds(n,r),t}())||ms;function Es(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function ks(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ss(e,t,n){return t&&ks(e.prototype,t),n&&ks(e,n),e}function Os(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ns=new(_s=Os((vs=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Es(this,"notifications",_s,this),Es(this,"stickyNotifications",gs,this),this.markAllRead=function(){var e=!0,n=!1,o=void 0;try{for(var r,a=t.notifications[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;t.markRead(i,!1)}}catch(e){n=!0,o=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw o}}var c=!0,s=!1,l=void 0;try{for(var u,m=t.stickyNotifications[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var p=u.value;t.markRead(p,!1)}}catch(e){s=!0,l=e}finally{try{c||null==m.return||m.return()}finally{if(s)throw l}}post("/api/v1/notifications/set_read_all")},this.clearCache=function(){t.cache={read:[],seen:[]},t.saveLocal()},this.saveLocal=function(){localStorage.setItem(t.cacheKey,JSON.stringify(t.cache))};var n={};if("undefined"!=typeof window&&(n=window.app_data.current_user),n.id){this.cacheKey="notification-cache-".concat(n.id);try{this.cache=JSON.parse(localStorage.getItem(this.cacheKey)),this.cache.read instanceof Array&&this.cache.seen instanceof Array||this.clearCache()}catch(e){this.clearCache()}this.cache.seen.length+this.cache.read.length>0&&this.sync();var o=!0,r=!1,a=void 0;try{for(var i,c=n.notifications[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;this.cache.read.includes(s.key)&&(s.read=!0),this.cache.seen.includes(s.key)&&(s.seen=!0)}}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}var l=!0,u=!1,m=void 0;try{for(var p,f=n.sticky_notifications[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value;this.cache.read.includes(d.key)&&(d.read=!0),this.cache.seen.includes(d.key)&&(d.seen=!0)}}catch(e){u=!0,m=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw m}}this.notifications.replace(n.notifications),this.stickyNotifications.replace(n.sticky_notifications)}}return Ss(e,[{key:"localUnreadCount",get:function(){return this.notifications.filter(function(e){return!e.read}).length+this.stickyNotifications.filter(function(e){return!e.read}).length}}]),Ss(e,[{key:"markRead",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.read)return!1;var n=this.notifications.findIndex(function(t){return t.key===e.key});return-1!==n?(this.notifications[n].read=!0,this.cache.read.push(e.key),t&&this.sync(),!0):-1!==(n=this.stickyNotifications.findIndex(function(t){return t.key===e.key}))&&(this.stickyNotifications[n].read=!0,this.cache.read.push(e.key),t&&this.sync(),!0)}},{key:"seen",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.notifications[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;!0!==a.seen&&(trackEvent("user.notifications.seen",{n_type:a.n_type}),a.seen=!0,this.cache.seen.push(a.key))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.sync()}},{key:"sync",value:function(){var e=this;this.saveLocal(),this.cache.seen.length+this.cache.read.length!==0&&post("/api/v1/notifications/set_read",{body:{notifications:this.cache}}).then(function(t){200===t.status&&e.clearCache()})}}]),e}()).prototype,"notifications",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gs=Os(vs.prototype,"stickyNotifications",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Os(vs.prototype,"localUnreadCount",[_e.d],Object.getOwnPropertyDescriptor(vs.prototype,"localUnreadCount"),vs.prototype),vs);function Cs(e){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xs(e,t){return!t||"object"!==Cs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Is,Fs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xs(this,Ts(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"navbar__notifications__menu__container empty"},c.a.createElement("p",null,"You have no notifications."),c.a.createElement("p",null,"If you're looking for something cool to do,"),c.a.createElement("p",null,"check out"," ",c.a.createElement("a",{href:"/match",style:{fontWeight:"700"}},"Stack Match"),"."))}}])&&js(n.prototype,o),r&&js(n,r),t}();function Rs(e){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zs(e,t){return!t||"object"!==Rs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function As(e){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ds,Us=Object(Ye.a)(Is=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=zs(this,(e=As(t)).call.apply(e,[this].concat(r)))).click=function(){trackEvent("user.notifications.clickThrough",{n_type:n.props.n.n_type})},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(t,i["Component"]),n=t,(o=[{key:"markRead",value:function(e,t){stopEvent(e),trackEvent("user.notifications.read",{n_type:t.n_type}),Ns.markRead(t)}},{key:"img_url",value:function(e){return e||"https://img.stackshare.io/fe/ss-logo-notifications.png"}},{key:"render",value:function(){var e=this,t=this.props.n;return c.a.createElement("div",{className:"notification__container"},c.a.createElement("a",{href:"/notifications/".concat(t.id),className:"notification".concat(t.read?" read":""),onClick:this.click},c.a.createElement("div",{className:"n_image"},c.a.createElement("img",{className:"".concat("comment"===t.n_type?"circle":""),src:this.img_url(t.image_url)})),c.a.createElement("div",null,c.a.createElement("p",{className:"content"},t.content),t.icon&&c.a.createElement("span",{className:t.icon}),c.a.createElement("p",{className:"time"},t.time," ago"))),!t.read&&c.a.createElement("div",{className:"archive__container",onClick:function(n){return e.markRead(n,t)}},c.a.createElement("div",{className:"archive"})))}}])&&Ms(n.prototype,o),r&&Ms(n,r),t}())||Is;function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qs(e,t){return!t||"object"!==$s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ws(e){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hs=Object(Ye.a)(Ds=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=qs(this,(e=Ws(t)).call.apply(e,[this].concat(r)))).clearAll=function(e){stopEvent(e),Ns.markAllRead()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=Ns.stickyNotifications,n=Ns.notifications;return n.length+t.length===0?n=c.a.createElement(Fs,null):(n=c.a.createElement("div",{className:"navbar__notifications__menu__container"},Ns.notifications.map(function(e){return c.a.createElement(Us,{n:e,key:"notification-".concat(e.id)})})),t=c.a.createElement("div",{className:"navbar__notifications__menu__container"},Ns.stickyNotifications.map(function(e){return c.a.createElement(Us,{n:e,key:"notification-".concat(e.id)})}))),c.a.createElement("div",{className:"navbar__notifications__menu"},c.a.createElement("div",{className:"navbar__menu__header"},"Notifications",c.a.createElement("span",{className:"spacer"}),Ns.localUnreadCount>0&&c.a.createElement("a",{className:"navbar__notifications__menu__links",onClick:function(t){return e.clearAll(t)}},"Mark All as Read")),t,n,window.app_data.current_user.notification_count>9&&c.a.createElement("a",{className:"navbar__notifications__menu__footer",href:"/notifications"},"See All Notifications"))}}])&&Bs(n.prototype,o),r&&Bs(n,r),t}())||Ds;function Js(e){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ks(e,t){return!t||"object"!==Js(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zs(e,t){return(Zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xs,Qs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ks(this,Ys(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zs(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("svg",{className:"octicon octicon-bell",viewBox:"0 0 14 16",version:"1.1","aria-hidden":"true"},c.a.createElement("path",{fillRule:"evenodd",d:"M14 12v1H0v-1l.73-.58c.77-.77.81-2.55 1.19-4.42C2.69 3.23 6 2 6 2c0-.55.45-1 1-1s1 .45 1 1c0 0 3.39 1.23 4.16 5 .38 1.88.42 3.66 1.19 4.42l.66.58H14zm-7 4c1.11 0 2-.89 2-2H5c0 1.11.89 2 2 2z"}))}}])&&Gs(n.prototype,o),r&&Gs(n,r),t}();function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nl(e,t){return!t||"object"!==el(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ol(e){return(ol=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){return(rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var al=Object(Ye.a)(Xs=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=nl(this,ol(t).call(this,e))).clickBell=function(){n.state.unreadCount>0&&trackEvent("user.notifications.menuOpen",{notificationCount:n.state.unreadCount}),!1===n.state.open&&(post("/api/v1/notifications/clear"),n.setState({unreadCount:0})),Ns.seen(),n.setState({open:!n.state.open})},n.hideMenu=function(){n.setState({open:!1})},n.state={open:!1,unreadCount:"undefined"!=typeof window?window.app_data.current_user.unread_notifications_count:0},n.cacheKey="notification-cache-".concat("undefined"!=typeof window?window.app_data.current_user.id:"");var o={read:[]};try{n.cache=JSON.parse(localStorage.getItem(n.cacheKey))||o,n.cache.read instanceof Array||(n.cache=o,n.saveLocal())}catch(e){n.cache=o}return n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rl(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"navbar__notifications".concat(this.state.open?" open":"").concat(0!==this.state.unreadCount?" unread":""),onClick:this.clickBell},this.state.unreadCount>0&&c.a.createElement("div",{className:"navbar__notifications__count"},this.state.unreadCount),c.a.createElement(Qs,null),this.state.open&&c.a.createElement(Hs,null),this.state.open&&c.a.createElement("div",{className:"react-overlay transparent",onClick:this.hideMenu}))}}])&&tl(n.prototype,o),r&&tl(n,r),t}())||Xs;function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cl(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sl(e,t){return!t||"object"!==il(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ml,pl,fl,dl,hl,bl,yl,vl,_l,gl,wl,El,kl,Sl,Ol,Nl,Cl,jl,xl,Tl,Pl,Il,Fl,Rl,Ml,zl,Al,Ll,Dl,Ul,$l,Bl,ql,Wl,Vl,Hl,Jl,Gl,Kl,Yl,Zl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sl(this,ll(t).call(this,e))).avatarClick=function(){n.setState({open:!n.state.open})},n.hideMenu=function(){n.setState({open:!1})},n.state={open:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ul(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.companies,n=e.current_user,o=n.username,r=n.image_url;return c.a.createElement("div",{className:"navbar__avatar".concat(this.state.open?" open":""),onClick:this.avatarClick},c.a.createElement("img",{src:r}),this.state.open&&c.a.createElement("div",{className:"navbar__menu"},c.a.createElement("a",{href:"/".concat(o)},"Profile"),c.a.createElement("a",{href:"/settings/email",className:"navbar__avatar__divider"},"Email Settings"),t.map(function(e){return c.a.createElement("a",{href:"/".concat(e.slug),key:"company-".concat(e.id)},e.name)}),c.a.createElement("a",{href:"/".concat(o,"/job-stack")},"Job Stack"),c.a.createElement("a",{href:"/create-stack/scan",className:"navbar__avatar__divider"},"Create A Stack"),c.a.createElement("a",{href:"/users/logout"},"Sign Out")),this.state.open&&!this.state.hovering&&c.a.createElement("div",{className:"react-overlay transparent",onClick:this.hideMenu}))}}])&&cl(n.prototype,o),r&&cl(n,r),t}(),Xl=n("/home/circleci/frontend/node_modules/react-select/dist/react-select.es.js");n("/home/circleci/frontend/node_modules/style-loader/index.js!/home/circleci/frontend/node_modules/css-loader/dist/cjs.js!/home/circleci/frontend/node_modules/react-select/dist/react-select.css");function Ql(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function eu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tu(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var nu,ou=(pl=tu((ml=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ql(this,"railsRootUrl",pl,this),Ql(this,"selectedTools",fl,this),Ql(this,"companies",dl,this),Ql(this,"defaultToolsFromStack",hl,this),Ql(this,"rawArticles",bl,this),Ql(this,"articles",yl,this),Ql(this,"trendingArticles",vl,this),Ql(this,"savingState",_l,this),Ql(this,"page",gl,this),Ql(this,"loadingPage",wl,this),Ql(this,"firstSearchFired",El,this),Ql(this,"articleGroups",kl,this),Ql(this,"facets",Sl,this),Ql(this,"newsFilters",Ol,this),Ql(this,"filterMenuVisible",Nl,this),Ql(this,"sharefilterPopupVisible",Cl,this),Ql(this,"showFilterForm",jl,this),Ql(this,"currentFilter",xl,this),Ql(this,"editFilter",Tl,this),Ql(this,"showSavedFilters",Pl,this),Ql(this,"showDefaultTools",Il,this),Ql(this,"queryParamsExist",Fl,this),Ql(this,"queryParamFilterExists",Rl,this),Ql(this,"queryParamFilterName",Ml,this),Ql(this,"headerExpanded",zl,this),Ql(this,"showOnboarding",Al,this),Ql(this,"showHackerNews",Ll,this),Ql(this,"showReddit",Dl,this),Ql(this,"showLobsters",Ul,this),Ql(this,"showGithub",$l,this),Ql(this,"showRSS",Bl,this),Ql(this,"validFilterName",ql,this),Ql(this,"standaloneArticle",Wl,this),Ql(this,"expandedArticleId",Vl,this),Ql(this,"cachedArticleContents",Hl,this),Ql(this,"noResultsFound",Jl,this),Ql(this,"notifications",Gl,this),this.allowedSourcesMap={github:"showGithub",hacker_news:"showHackerNews",reddit:"showReddit",lobsters:"showLobsters",rss:"showRSS"},Ql(this,"showNotification",Kl,this),Ql(this,"clearNotifications",Yl,this),this.loadMoreArticlesOnScroll=function(){var e=$(window);$(document).height()-e.height()-$(document).height()/9<e.scrollTop()&&!1===t.loadingPage&&t.loadNextPage()},this.loadMoreArticles=function(e){!1===t.loadingPage&&($(e.target).hide(),t.loadNextPage())},this.loadFacets=function(e){t.facets=e},this.setStandaloneArticleById=function(e){var n=t;t.newsIndex.search("",{facetFilters:"id:Article.".concat(e),facets:"*",attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:1},function(e,t){t.hits[0]||(window.location="/news-classic"),n.standaloneArticle=t.hits[0]})},this.loadNextPage=function(){t.page++,trackEvent("news.loadMore",{new_articles:20}),t.search(!0)},this.saveNewsStack=function(){var e=t.selectedTools.map(function(e){return e.id});"Saving..."!==t.savingState&&(t.savingState="Saving...",post("/api/v1/news/follow_services",{body:{service_ids:e}}).then(function(e){t.savingState="Save",200===e.status&&trackEvent("news.clicked_save_news_tools",{services:t.selectedTools.map(function(e){return e.slug}).join(",")})}))},this.dedupeStories=function(){var e=[],n=_.chain(t.rawArticles).groupBy("outbound_url").value();Object.keys(n).forEach(function(t){var o=n[t];if(o.length>1){o[0].multiple=!0,o[0].outbound_sources=[];var r=!0,a=!1,i=void 0;try{for(var c,s=o[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;("blog_post"===l.type||"company_blog_post"===l.type)&&_.some(o[0].outbound_sources,{type:"blog_post"})||o[0].outbound_sources.push(l);var u=!0,m=!1,p=void 0;try{for(var f,d=l.services[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;_.some(o[0].services,{id:h.id})||o[0].services.push(h)}}catch(e){m=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(m)throw p}}}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}e.push(o[0])}else e.push(o[0])}),t.articles=e},this.dedupeTrendingStories=function(){var e=[],n=_.chain(t.trendingArticles).groupBy("outbound_url").value();Object.keys(n).forEach(function(t){var o=n[t];if(o.length>1){o[0].multiple=!0,o[0].outbound_sources=[];var r=!0,a=!1,i=void 0;try{for(var c,s=o[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;("blog_post"===l.type||"company_blog_post"===l.type)&&_.some(o[0].outbound_sources,{type:"blog_post"})||o[0].outbound_sources.push(l);var u=!0,m=!1,p=void 0;try{for(var f,d=l.services[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;_.some(o[0].services,{id:h.id})||o[0].services.push(h)}}catch(e){m=!0,p=e}finally{try{u||null==d.return||d.return()}finally{if(m)throw p}}}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}e.push(o[0])}else e.push(o[0])}),t.trendingArticles=e},this.groupArticles=function(){for(var e={},n=0;n<t.articles.length;n++){var o=t.articles[n],r=new Date(t.articles[n].submission_date),a="".concat(r.getMonth()+1,"-").concat(r.getDate(),"-").concat(r.getFullYear());e.hasOwnProperty(a)?e[a].push(o):e[a]=[o]}var i=Object.keys(e).map(function(t){return{date:t,articles:e[t].sort(function(e,t){return new Date(t.submission_date).getTime()-new Date(e.submission_date).getTime()})}}).sort(function(e,t){return new Date(t.date)-new Date(e.date)});t.articleGroups=i},this.filters=function(){var e="";e+=t.selectedTools.map(function(e){return'services.name:"'.concat(e.name,'" ')}).join(" OR "),t.facets.length>0&&(t.selectedTools.length>0&&(e+=" OR "),e+=t.facets.map(function(e){return'services.functions:"'.concat(e.name,'" ')}).join(" OR ")+" OR ",e+=t.facets.map(function(e){return'services.categories:"'.concat(e.name,'" ')}).join(" OR ")+" OR ",e+=t.facets.map(function(e){return'services.layer:"'.concat(e.name,'" ')}).join(" OR "));var n=[];return n.push("import_source:none"),n.push("meta_data.post_type:youtube"),n.push("meta_data.post_type:slideshare"),n.push("meta_data.post_type:meetup"),t.showReddit&&n.push("import_source:reddit"),t.showHackerNews&&n.push("import_source:hackernews"),t.showLobsters&&n.push("import_source:lobsters"),t.showGithub&&n.push("type:github_releases_rss"),t.showRSS&&n.push("type:blog_post OR type:company_blog_post"),e.length>0&&n.length>0?e+=" AND (".concat(n.join(" OR "),") "):e+=" ".concat(n.join(" OR ")," "),n.length>0&&!t.showGithub&&t.showRSS&&(e+=" AND NOT type:github_releases_rss "),e.length>0?e+=" AND (discussion_score > 2 OR discussion_score = -1)":e+=" (discussion_score > 2 OR discussion_score = -1)",e},this.search=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!1===e&&(t.page=0,t.articles=[]),t.loadingPage=!0,0===t.page?$(window)[0].removeEventListener("scroll",t.loadMoreArticlesOnScroll):$(window)[0].addEventListener("scroll",t.loadMoreArticlesOnScroll),t.newsIndex.search("",{facets:"*",filters:t.filters(),attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:20,page:t.page},function(n,o){t.facets.length>0&&trackEvent("news.searched",{services:t.selectedTools.map(function(e){return e.slug}).join(", ")}),t.loadingPage=!1,0===o.nbHits?t.noResultsFound=!0:t.noResultsFound=!1,t.rawArticles=!0===e?t.rawArticles.concat(o.hits):o.hits,t.dedupeStories()})},this.client=algoliasearch(window._ALGOLIA_ID,window._ALGOLIA_API_KEY),this.newsIndex=this.client.initIndex("stack-news"),this.trendingNewsIndex=this.client.initIndex("stack-news-trending"),this.analyzeUrl(),$(document).on("builder.tool.added",function(){t.search()}),$(document).on("builder.tool.removed",function(){t.search()}),$(document).on("click",function(e){0===$(".stackshare_news__filter_container").has(e.target).length&&(ru.instance.filterMenuVisible=!1)}),this.loadNewsFilters(),this.loadTrendingArticles()}var t,n,o;return t=e,(n=[{key:"analyzeUrl",value:function(){var e=["tools","topics","sources","filter","company"];this.params=location.search.substr(1).split("&"),this.params.find(function(t){var n=t.split("=")[0];return-1!==e.indexOf(n)})&&this.deserializeFromUrl()}},{key:"deserializeFromUrl",value:function(){for(var e=this,t={},n=0;n<this.params.length;n++){var o=this.params[n].split("="),r=decodeURIComponent(o[0]),a=decodeURIComponent(o[1]).split("+");if(t[r]=[],"filter"===r)t[r].push(decodeURIComponent(o[1]));else for(var i=0;i<a.length;i++)""!==a[i]&&t[r].push(a[i])}Object.values(t).reduce(function(e,t){return e+t.length},0)>0&&(this.queryParamsExist=!0);var c=t.tools,s=t.topics,l=t.sources,u=t.filter,m=t.company;u&&u.length>0&&(this.headerExpanded="true",this.filterMenuVisible=!0,this.editFilter=!1,this.showFilterForm=!0,this.queryParamFilterExists=!0,this.queryParamFilterName=u[0],1===Object.keys(t).length&&this.search()),c&&c.length>0&&get("/services/find_all_by_actual_slug?slugs=".concat(c.join(","))).then(function(t){200===t.status&&(e.loadTools(t.data,{serialize:!1}),e.search())}),s&&s.length>0&&get("/api/v1/news/facets_by_slug?slugs=".concat(s.join(","))).then(function(t){200===t.status&&(e.loadFacets(t.data),e.search())}),l&&l.length>0&&(Object.keys(this.allowedSourcesMap).forEach(function(t){-1===l.indexOf(t)?e[e.allowedSourcesMap[t]]=!1:e[e.allowedSourcesMap[t]]=!0}),this.search()),m&&m.length>0&&(this.companies=m)}},{key:"serializeToUrl",value:function(){var e=this;if(!window.location.href.includes("/news-classic/article/")){var t={tools:this.selectedTools.map(function(e){return e.slug}).join("+"),topics:this.facets.map(function(e){return e.slug}).join("+"),sources:Object.keys(this.allowedSourcesMap).filter(function(t){if(!0===e[e.allowedSourcesMap[t]])return t}).join("+")},n=[];for(var o in t)t.hasOwnProperty(o)&&t[o]&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]).replace(/%2B/g,"+"));window.history.replaceState({},"","/news-classic?".concat(n.join("&")))}}},{key:"headerState",value:function(){return(stackshare.utils.storageAvailable("localStorage")?localStorage.getItem("stackshare.news.headerExpanded"):"true")||"true"}},{key:"showOnboardingTooltip",value:function(){return(stackshare.utils.storageAvailable("localStorage")?localStorage.getItem("stackshare.news.showOnboarding"):"true")||"true"}},{key:"loadTrendingArticles",value:function(){var e=this,t=Math.round((new Date).getTime()/1e3),n=t-86400,o=t;this.trendingNewsIndex.search("",{facets:"*",filters:"submission_date_i:".concat(n," TO ").concat(o),attributesToRetrieve:"*",typoTolerance:"false",hitsPerPage:10},function(t,n){e.trendingArticles=n.hits,e.dedupeTrendingStories()})}},{key:"createNewsFilter",value:function(e){var t=this,n=this.selectedTools.map(function(e){return{id:e.id,name:e.name}}),o=this.facets.map(function(e){if("Function"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e}),r=this.facets.map(function(e){if("Category"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e}),a=this.facets.map(function(e){if("Layer"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e}),i={filter:{name:e.filterName,daily_alert:e.filterDailyAlerts,weekly_alert:e.filterWeeklyAlerts,services:n,categories:r,layers:a,functions:o,show_hacker_news:this.showHackerNews,show_reddit:this.showReddit,show_github:this.showGithub,show_lobsters:this.showLobsters,show_rss:this.showRSS}};post("/api/v1/news/filters",{body:i}).then(function(e){if(200===e.status){var n=e.data;t.newsFilters.push(n),t.setCurrentFilter(n,!0),trackEvent("news.clicked_save_as_new_filter",{services:t.selectedTools.map(function(e){return e.slug}).join(",")})}})}},{key:"deleteNewsFilter",value:function(e){var t=this;httpDelete("/api/v1/news/filters/".concat(e)).then(function(n){200===n.status&&(t.newsFilters=t.newsFilters.filter(function(t){return t.id!==e}),t.newsFilters.length>0?t.setCurrentFilter(t.newsFilters[0]):(t.selectedTools=[],t.currentFilter={}))})}},{key:"updateNewsFilter",value:function(e){var t=this,n=e.filterName,o=e.filterDailyAlerts,r=e.filterWeeklyAlerts,a=this.selectedTools.map(function(e){return{id:e.id,name:e.name}}),i=this.currentFilter;i.name=n,i.daily_alert=o,i.weekly_alert=r,i.services=a;var c=this.facets.map(function(e){if("Function"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e}),s=this.facets.map(function(e){if("Category"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e}),l=this.facets.map(function(e){if("Layer"===e.id.split("-")[0])return{id:e.id.split("-")[1],name:e.name}}).filter(function(e){return e});i.categories=s,i.layers=l,i.functions=c,i.show_hacker_news=this.showHackerNews,i.show_reddit=this.showReddit,i.show_github=this.showGithub,i.show_lobsters=this.showLobsters,i.show_rss=this.showRSS;var u={filter:i};patch("/api/v1/news/filters/".concat(this.currentFilter.id),{body:u}).then(function(){trackEvent("news.clicked_update_filter",{services:t.selectedTools.map(function(e){return e.slug}).join(",")}),t.newsFilters=t.newsFilters.filter(function(e){return e.id===u.id?u:e})}),this.clearQueryParams()}},{key:"toggleAlert",value:function(e,t){var n=this;e[t]=!e[t],patch("/api/v1/news/filters/".concat(e.id),{body:e}).then(function(){n.newsFilters=n.newsFilters.filter(function(n){return n.id===e.id&&(n[t]=e[t]),n})})}},{key:"loadNewsFilters",value:function(){var e=this;setTimeout(function(){e.firstSearchFired=!0},1e3),get("/api/v1/news/filters").then(function(t){e.newsFilters=t.data,0===e.newsFilters.length?e.queryParamsExist||(e.selectedTools=e.defaultToolsFromStack,e.showDefaultTools=!0,e.checkOverflowed(),e.search()):e.newsFilters.length>0&&e.selectFilterToSet()})}},{key:"selectFilterToSet",value:function(){var e;if(!this.queryParamsExist){if(stackshare.utils.storageAvailable("localStorage")){var t=localStorage.getItem("stackshare.news.currentFilterId");if(t)_.some(this.newsFilters,function(n){if(n.id===t)return e=n,!0})||(e=this.newsFilters[0]);else e=this.newsFilters[0]}else e=this.newsFilters[0];this.showDefaultTools=!1,this.setCurrentFilter(e)}}},{key:"setCurrentFilter",value:function(e,t){(t=t||!1)||(this.selectedTools=[]),this.currentFilter=e,stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.currentFilterId",e.id),this.loadFilter(this.currentFilter)}},{key:"loadFilter",value:function(e){this.loadTools(e.services,{serialize:!1}),this.loadFacets(e.facets),this.showHackerNews=e.show_hacker_news,this.showReddit=e.show_reddit,this.showGithub=e.show_github,this.showLobsters=e.show_lobsters,this.showRSS=e.show_rss,this.clearQueryParams(),this.search()}},{key:"loadTools",value:function(e){this.selectedTools=e}},{key:"clearQueryParams",value:function(){window.location.href.includes("/news-classic/article/")||window.location.href.includes("/news-classic")&&window.history.replaceState({},"","/news-classic")}},{key:"checkOverflowed",value:function(){$(".builder-wrap__slider-wrap").innerWidth()<$(".builder-wrap__builder").outerWidth()?$(".builder-wrap__slider-wrap").addClass("overflowed"):$(".builder-wrap__slider-wrap").removeClass("overflowed")}},{key:"addSelectedTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{source:"search_box"};t=Object.assign({serialize:!0},t),-1===this.selectedTools.findIndex(function(t){return t.id===e.id})&&(trackEvent("news.added_tool",{tool:e,source:t.source}),this.selectedTools.push(e),this.serializeToUrl()),this.checkOverflowed(),this.search()}},{key:"removeSelectedTool",value:function(e){var t=this.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&(trackEvent("news.removed_tool",{tool:e}),this.selectedTools.splice(t,1),this.serializeToUrl()),this.checkOverflowed()}},{key:"hasNotification",get:function(){return this.notifications.size>0}},{key:"hasError",get:function(){return this.hasNotification&&"error"===this.notifications.get("type")}}])&&eu(t.prototype,n),o&&eu(t,o),e}()).prototype,"railsRootUrl",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),fl=tu(ml.prototype,"selectedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dl=tu(ml.prototype,"companies",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hl=tu(ml.prototype,"defaultToolsFromStack",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bl=tu(ml.prototype,"rawArticles",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yl=tu(ml.prototype,"articles",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vl=tu(ml.prototype,"trendingArticles",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_l=tu(ml.prototype,"savingState",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Save"}}),gl=tu(ml.prototype,"page",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wl=tu(ml.prototype,"loadingPage",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),El=tu(ml.prototype,"firstSearchFired",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kl=tu(ml.prototype,"articleGroups",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sl=tu(ml.prototype,"facets",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ol=tu(ml.prototype,"newsFilters",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nl=tu(ml.prototype,"filterMenuVisible",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cl=tu(ml.prototype,"sharefilterPopupVisible",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jl=tu(ml.prototype,"showFilterForm",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xl=tu(ml.prototype,"currentFilter",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Tl=tu(ml.prototype,"editFilter",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pl=tu(ml.prototype,"showSavedFilters",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Il=tu(ml.prototype,"showDefaultTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fl=tu(ml.prototype,"queryParamsExist",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rl=tu(ml.prototype,"queryParamFilterExists",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ml=tu(ml.prototype,"queryParamFilterName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zl=tu(ml.prototype,"headerExpanded",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.headerState()}}),Al=tu(ml.prototype,"showOnboarding",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.showOnboardingTooltip()}}),Ll=tu(ml.prototype,"showHackerNews",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dl=tu(ml.prototype,"showReddit",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ul=tu(ml.prototype,"showLobsters",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$l=tu(ml.prototype,"showGithub",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bl=tu(ml.prototype,"showRSS",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ql=tu(ml.prototype,"validFilterName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=tu(ml.prototype,"standaloneArticle",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Vl=tu(ml.prototype,"expandedArticleId",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hl=tu(ml.prototype,"cachedArticleContents",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jl=tu(ml.prototype,"noResultsFound",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=tu(ml.prototype,"notifications",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Kl=tu(ml.prototype,"showNotification",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t.type,o=t.message,r=t.icon;n&&o&&e.notifications.set("type",n).set("message",o).set("icon",r)}}}),Yl=tu(ml.prototype,"clearNotifications",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.notifications.clear()}}}),tu(ml.prototype,"hasNotification",[_e.d],Object.getOwnPropertyDescriptor(ml.prototype,"hasNotification"),ml.prototype),tu(ml.prototype,"hasError",[_e.d],Object.getOwnPropertyDescriptor(ml.prototype,"hasError"),ml.prototype),ml),ru={get instance(){return nu},set instance(e){nu=new ou(e)}},au=ru,iu=n("/home/circleci/frontend/node_modules/react-bootstrap/es/index.js b1fc6ff553827a58ffbdd5bc182a38de");function cu(e){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function su(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lu(e,t){return!t||"object"!==cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mu(e,t){return(mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lu(this,uu(t).call(this,e))).removeFromArticle=function(){var e=n.props.articleId.split("."),t=e[0],o=e[1];post("/api/v1/admin/services/remove_from_article",{body:{service_id:n.props.serviceId,model_type:t,model_id:o}})},n.scraperIgnore=function(){post("/api/v1/admin/services/scraper_ignore",{body:{service_id:n.props.serviceId}})},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mu(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"col-md-12"},window.app_data.current_user.is_admin&&c.a.createElement("div",{className:"service_popover__footer__admin"},c.a.createElement("button",{className:"col-md-6 action btn-danger",onClick:this.removeFromArticle},"Remove From Article"),c.a.createElement("button",{className:"col-md-6 action btn-danger",onClick:this.scraperIgnore},"Mark Scraper Ignore")))}}])&&su(n.prototype,o),r&&su(n,r),t}(),fu=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/utils/format.js");function du(e){return(du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bu(e,t){return!t||"object"!==du(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yu(e){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vu(e,t){return(vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bu(this,yu(t).call(this,e))).addToToolbuilder=function(){au.instance.addSelectedTool(n.props.service,{source:"hover"})},n.actionButton=function(){return _.findIndex(au.instance.selectedTools,function(e){return e.id===n.props.service.id})<0?c.a.createElement("button",{className:"action",onClick:n.addToToolbuilder},c.a.createElement("span",{className:"octicon octicon-plus"})," Add"):c.a.createElement("button",{disabled:!0,className:"action btn added"},c.a.createElement("span",{className:"octicon octicon-check"}),"Added")},n.popoverContent=function(){var e=n.props.service;return c.a.createElement(iu.b,{id:"service-popover"},c.a.createElement("div",{className:"service_popover",onMouseLeave:n.triggerOverlayClick},c.a.createElement("div",{className:"service_popover__content"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("img",{src:e.image_url})),c.a.createElement("div",{className:"col-md-9 service_popover__content__name_block"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("a",{className:"name",href:e.canonical_url},e.name,e.verified&&c.a.createElement("span",{className:"hint--top","data-align":"left","data-hint":"Verified"},c.a.createElement("div",{className:"fa fa-check-circle",style:{color:"#0690fa",fontSize:"15px",opacity:"0.8",verticalAlign:"inherit",paddingTop:"2px",marginLeft:"6px"}})))),c.a.createElement("div",{className:"col-md-9"},n.actionButton())),c.a.createElement("div",{className:"col-md-12"},c.a.createElement("p",{className:"title div-center"},_.truncate(e.title,125))),c.a.createElement("div",{className:"clearfix"})),c.a.createElement("hr",null),c.a.createElement("div",{className:"service_popover__footer"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Stacks"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/in-stacks")},c.a.createElement("p",{className:"service_popover__footer__value"},e.stack_count>1e3&&Object(fu.a)(e.stack_count),e.stack_count<=1e3&&Object(fu.a)(e.stack_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Fans"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/fans")},c.a.createElement("p",{className:"service_popover__footer__value"},e.fan_count>1e3&&Object(fu.a)(e.fan_count),e.fan_count<=1e3&&Object(fu.a)(e.fan_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Votes"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"#reasons")},c.a.createElement("p",{className:"service_popover__footer__value"},e.vote_count>1e3&&Object(fu.a)(e.vote_count),e.vote_count<=1e3&&Object(fu.a)(e.vote_count)))),c.a.createElement(pu,{articleId:"".concat(n.props.articleId),serviceId:"".concat(n.props.service.id)}))))},n.triggerOverlayClick=function(){n.serviceLink.click()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vu(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.service,o=t.visible?"":"none";return c.a.createElement(iu.a,{rootClose:!0,trigger:"click",placement:"top",overlay:this.popoverContent()},c.a.createElement("a",{ref:function(t){e.serviceLink=t},style:{display:"block",float:"left"},onMouseEnter:this.triggerOverlayClick},c.a.createElement("img",{style:{display:o},className:"news__article__services__service_thumbnail",src:n.image_url})))}}])&&hu(n.prototype,o),r&&hu(n,r),t}(),gu=n("/home/circleci/frontend/node_modules/pluralize/pluralize.js"),wu=n.n(gu),Eu=n("/home/circleci/frontend/node_modules/slugify/index.js"),ku=n.n(Eu);function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Nu(e,t){return!t||"object"!==Su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cu(e){return(Cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t){return(ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nu(this,Cu(t).call(this,e))).simplified=function(){var e=n.props,t=e.score,o=e.submissionDate,r=e.discussionSourceUrl;return c.a.createElement("div",{className:"news_source"},c.a.createElement("a",{href:r},"".concat(t," ").concat(wu()("point",t))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:r},"submitted ",moment(o).fromNow()))},n.regular=function(){var e=n.props,t=e.id,o=e.score,r=e.submissionDate,a=e.commentCount,i=e.discussionSourceUrl,s=e.title;return c.a.createElement("div",{className:"news_source",onMouseEnter:function(){n.setState({showShare:!0})},onMouseLeave:function(){n.setState({showShare:!1})}},c.a.createElement("a",{href:i},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-reddit"})),c.a.createElement("a",{href:i,className:o>60?"highlight":""},"".concat(o," ").concat(wu()("point",o))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"submitted ",moment(r).fromNow()),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"".concat(a," ").concat(wu()("comment",a))),c.a.createElement("span",{className:"article_share "+(n.state.showShare?"hovered":"")},c.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https://stackshare.io/news-classic/article/".concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("a",{href:"https://twitter.com/intent/tweet?hashtags=stacknews&via=stackshareio&text=".concat(encodeURI(s)," https://stackshare.io/news-classic/article/").concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-twitter"}))))},n.state={showShare:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ju(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.simplified?this.simplified():this.regular()}}])&&Ou(n.prototype,o),r&&Ou(n,r),t}();function Tu(e){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Iu(e,t){return!t||"object"!==Tu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fu(e){return(Fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ru(e,t){return(Ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Iu(this,Fu(t).call(this,e))).simplified=function(){var e=n.props,t=e.score,o=e.submissionDate,r=e.discussionSourceUrl;return c.a.createElement("div",{className:"news_source"},c.a.createElement("a",{href:r},"".concat(t," ").concat(wu()("point",t))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:r},"submitted ",moment(o).fromNow()))},n.regular=function(){var e=n.props,t=e.id,o=e.score,r=e.submissionDate,a=e.commentCount,i=e.discussionSourceUrl,s=e.title;return c.a.createElement("div",{className:"news_source",onMouseEnter:function(){n.setState({showShare:!0})},onMouseLeave:function(){n.setState({showShare:!1})}},c.a.createElement("a",{href:i},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-hacker-news"})),c.a.createElement("a",{href:i,className:o>60?"highlight":""},"".concat(o," ").concat(wu()("point",o))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"submitted ",moment(r).fromNow()),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"".concat(a," ").concat(wu()("comment",a))),c.a.createElement("span",{className:"article_share "+(n.state.showShare?"hovered":"")},c.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https://stackshare.io/news-classic/article/".concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("a",{href:"https://twitter.com/intent/tweet?hashtags=stacknews&via=stackshareio&text=".concat(encodeURI(s)," https://stackshare.io/news-classic/article/").concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-twitter"}))))},n.state={showShare:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ru(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.simplified?this.simplified():this.regular()}}])&&Pu(n.prototype,o),r&&Pu(n,r),t}();function zu(e){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Au(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Lu(e,t){return!t||"object"!==zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Du(e){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uu(e,t){return(Uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Lu(this,Du(t).call(this,e))).simplified=function(){var e=n.props,t=e.score,o=e.submissionDate,r=e.discussionSourceUrl;return c.a.createElement("div",{className:"news_source"},c.a.createElement("a",{href:r},"".concat(t," ").concat(wu()("point",t))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:r},"submitted ",moment(o).fromNow()))},n.regular=function(){var e=n.props,t=e.id,o=e.score,r=e.submissionDate,a=e.commentCount,i=e.discussionSourceUrl,s=e.title;return c.a.createElement("div",{className:"news_source",onMouseEnter:function(){n.setState({showShare:!0})},onMouseLeave:function(){n.setState({showShare:!1})}},c.a.createElement("a",{href:i},c.a.createElement("img",{className:"stackshare_news__article__source_icons lobsters-mini",src:au.instance.lobsters_image_path})),c.a.createElement("a",{href:i,className:o>60?"highlight":""},"".concat(o," ").concat(wu()("point",o))),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"submitted ",moment(r).fromNow()),c.a.createElement("span",null,"|"),c.a.createElement("a",{href:i},"".concat(a," ").concat(wu()("comment",a))),c.a.createElement("span",{className:"article_share "+(n.state.showShare?"hovered":"")},c.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https://stackshare.io/news-classic/article/".concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("a",{href:"https://twitter.com/intent/tweet?hashtags=stacknews&via=stackshareio&text=".concat(encodeURI(s)," https://stackshare.io/news-classic/article/").concat(t.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-twitter"}))))},n.state={showShare:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uu(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.simplified?this.simplified():this.regular()}}])&&Au(n.prototype,o),r&&Au(n,r),t}();function Bu(e){return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wu(e,t){return!t||"object"!==Bu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vu(e){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){return(Hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ju,Gu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wu(this,Vu(t).call(this,e))).simplified=function(){var e=n.props,t=e.submissionDate,o=e.outboundUrl,r=e.shareCount;return c.a.createElement("div",{className:"news_source"},c.a.createElement("a",{href:o},r>0&&c.a.createElement("span",null,"".concat(r," ").concat(wu()("shares",r))," | ")),c.a.createElement("a",{href:o},"published ",moment(t).fromNow()))},n._renderSocialPostSource=function(){var e=n.props.outboundUrl,t=n.props.article.meta_data;return"slideshare"===t.post_type?c.a.createElement("a",{href:e},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-slideshare"})):"youtube"===t.post_type?c.a.createElement("a",{href:e},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-youtube-play"})):"meetup"===t.post_type?c.a.createElement("a",{href:e},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-meetup"})):c.a.createElement("a",{href:e},c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-rss"}))},n.regular=function(){var e=n.props,t=e.article,o=e.id,r=e.submissionDate,a=e.outboundUrl,i=e.shareCount,s=e.title,l=e.type;return c.a.createElement("div",{className:"news_source",onMouseEnter:function(){n.setState({showShare:!0})},onMouseLeave:function(){n.setState({showShare:!1})}},"social_post"===t.type&&n._renderSocialPostSource(),"social_post"!==t.type&&c.a.createElement("a",{href:a},"github_releases_rss"===l&&c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-github"}),"github_repo"===l&&c.a.createElement("i",{className:"stackshare_news__article__source_icons octicon octicon-repo"}),("company_blog_post"===l||"blog_post"===l)&&c.a.createElement("i",{className:"stackshare_news__article__source_icons fa fa-rss"})),c.a.createElement("a",{href:a,className:i>60?"highlight":""},i>0&&("".concat(i," ").concat(wu()("shares",i))||" ")),c.a.createElement("a",{href:a},"published ",moment(r).fromNow()),c.a.createElement("span",{className:"article_share "+(n.state.showShare?"hovered":"")},c.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u=https://stackshare.io/news-classic/article/".concat(o.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("a",{href:"https://twitter.com/intent/tweet?hashtags=stacknews&via=stackshareio&text=".concat(encodeURI(s)," https://stackshare.io/news-classic/article/").concat(o.split(".")[1],"/").concat(ku()(s)),className:"btn btn-ss-g btn-xs"},"Share",c.a.createElement("i",{className:"fa fa-twitter"}))))},n.state={showShare:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hu(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return this.props.simplified?this.simplified():this.regular()}}])&&qu(n.prototype,o),r&&qu(n,r),t}();function Ku(e){return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yu(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zu(e,t){return!t||"object"!==Ku(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xu(e){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qu(e,t){return(Qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var em,tm=Object(Ye.a)(Ju=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zu(this,Xu(t).call(this,e))).services=function(){var e=n.props.article,t=n.props.article.services;if(t.length<=5)return c.a.createElement("div",{className:"news__article__services"},t.map(function(t){return c.a.createElement(_u,{visible:!0,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}));var o=[],r=[],a=t.filter(function(e){return _.findIndex(au.instance.selectedTools,{id:e.id})>=0}),i=t.filter(function(e){return-1===_.findIndex(au.instance.selectedTools,{id:e.id})}),s=!0,l=!1,u=void 0;try{for(var m,p=a[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;o.length<=3?o.push(f):r.push(f)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}var d=!0,h=!1,b=void 0;try{for(var y,v=i[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var g=y.value;o.length<=3?o.push(g):r.push(g)}}catch(e){h=!0,b=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw b}}return c.a.createElement("div",{className:"news__article__services"},o.map(function(t){return c.a.createElement(_u,{visible:!0,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}),c.a.createElement("a",{className:"service_load_more",style:{display:n.state.showLoadMoreServices?"":"none"},onClick:function(e){e.preventDefault(),n.setState({showHiddenServices:!0,showLoadMoreServices:!1})},href:"#"},"+",t.length-o.length),r.map(function(t){return c.a.createElement(_u,{visible:n.state.showHiddenServices,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}))},n.link=function(){var e=n.props.article;if("reddit"===e.import_source)return c.a.createElement(xu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("lobsters"===e.import_source)return c.a.createElement($u,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("hackernews"===e.import_source)return c.a.createElement(Mu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("offsite_article"!==e.type||null===e.import_source){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{article:e,importSource:e.import_source,type:e.type,id:e.id,key:e.id,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url,title:e.title})}},n.multipleLinks=function(){return n.props.article.outbound_sources.map(function(e){if("reddit"===e.import_source)return c.a.createElement(xu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("lobsters"===e.import_source)return c.a.createElement($u,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("hackernews"===e.import_source)return c.a.createElement(Mu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("offsite_article"!==e.type||null===e.import_source){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{article:e,importSource:e.import_source,key:e.id,id:e.id,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url,title:e.title})}})},n.githubRepo=function(e){var t;if(e.outbound_url.includes("github.com")&&!e.outbound_url.includes("github.com/blog")){var n=parseGithub(e.outbound_url);n.name&&(t="".concat(n.name," → "))}return t&&(t+=" "),t},n.handleArticleTitleClick=function(){window.open(n.props.article.outbound_url,"_blank")},n.closeAndScrollTop=function(){var e=location.href;location.href="#".concat(n.props.article.id),history.replaceState(null,null,e),au.instance.expandedArticleId=0;var t=$('span[id="'.concat(n.props.article.id,'"]')).parent().parent().parent().parent();t.addClass("article-flash"),setTimeout(function(){t.removeClass("article-flash")},2e3)},n._articleIsExpanded=function(){return au.instance.expandedArticleId===n.props.article.id},n.state={showHiddenServices:!1,showLoadMoreServices:!0},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qu(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.article;return c.a.createElement("div",null,c.a.createElement("div",{className:"news__article"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement("div",{className:"heading"},c.a.createElement("div",{onClick:this.handleArticleTitleClick},c.a.createElement("span",{id:this.props.article.id,className:"title"},("blog_post"===e.type||"company_blog_post"===e.type)&&this.githubRepo(e),this._articleIsExpanded()&&c.a.createElement("i",{className:"fa fa-caret-down"}),!this._articleIsExpanded()&&c.a.createElement("i",{className:"fa fa-caret-right"})," ",_.unescape(e.title))," ",c.a.createElement("span",{className:"url "+(e.highlighted&&"highlighted")},"(",simpleDomainFromUrl(e.outbound_url),")",e.highlighted&&c.a.createElement("i",{className:"stackshare_news__article__highlighted_star fa fa-check-circle"})))),c.a.createElement("div",{className:"links"},e.multiple&&this.multipleLinks(),!e.multiple&&this.link())),c.a.createElement("div",{className:"col-md-3"},this.services()),c.a.createElement("div",{className:"clearfix"})))}}])&&Yu(n.prototype,o),r&&Yu(n,r),t}())||Ju,nm=n("/home/circleci/frontend/node_modules/parse-github-url/index.js"),om=n.n(nm);function rm(e){return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function am(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function im(e,t){return!t||"object"!==rm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cm(e){return(cm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sm(e,t){return(sm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lm=Object(Ye.a)(em=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=im(this,cm(t).call(this,e))).services=function(){var e=n.props.article,t=n.props.article.services;if(t.length<=5)return c.a.createElement("div",{className:"news__article__services"},t.map(function(t){return c.a.createElement(_u,{visible:!0,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}));var o=[],r=[],a=t.filter(function(e){return _.findIndex(au.instance.selectedTools,{id:e.id})>=0}),i=t.filter(function(e){return-1===_.findIndex(au.instance.selectedTools,{id:e.id})}),s=!0,l=!1,u=void 0;try{for(var m,p=a[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;o.length<=3?o.push(f):r.push(f)}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}var d=!0,h=!1,b=void 0;try{for(var y,v=i[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var g=y.value;o.length<=3?o.push(g):r.push(g)}}catch(e){h=!0,b=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw b}}return c.a.createElement("div",{className:"news__article__services"},o.map(function(t){return c.a.createElement(_u,{visible:!0,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}),c.a.createElement("a",{className:"service_load_more",style:{display:n.state.showLoadMoreServices?"":"none"},onClick:function(e){e.preventDefault(),n.setState({showHiddenServices:!0,showLoadMoreServices:!1})},href:"#"},"+",t.length-o.length),r.map(function(t){return c.a.createElement(_u,{visible:n.state.showHiddenServices,key:"".concat(e.id,"-services-").concat(t.id),articleId:e.id,service:t,article:e})}))},n.link=function(){var e=n.props.article;if("reddit"===e.import_source)return c.a.createElement(xu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("lobsters"===e.import_source)return c.a.createElement($u,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("hackernews"===e.import_source)return c.a.createElement(Mu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("offsite_article"!==e.type||"company_blog_post"===e.type||"github_repo"===e.type||"social_post"===e.type){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{article:e,importSource:e.import_source,type:e.type,id:e.id,key:e.id,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url,title:e.title})}},n.multipleLinks=function(){return n.props.article.outbound_sources.map(function(e){if("reddit"===e.import_source)return c.a.createElement(xu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("lobsters"===e.import_source)return c.a.createElement($u,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("hackernews"===e.import_source)return c.a.createElement(Mu,{key:e.id,id:e.id,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url,outboundUrl:e.outbound_url,title:e.title});if("offsite_article"!==e.type){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{article:e,importSource:e.import_source,key:e.id,id:e.id,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url,title:e.title})}})},n.githubRepo=function(e){var t;if(e.outbound_url.includes("github.com")&&!e.outbound_url.includes("github.com/blog")){var n=om()(e.outbound_url);n.name&&(t="".concat(n.name," → "))}return t&&(t+=" "),t},n.handleArticleTitleClick=function(){window.open(n.props.article.outbound_url,"_blank")},n.closeAndScrollTop=function(){var e=location.href;location.href="#".concat(n.props.article.id),history.replaceState(null,null,e),au.instance.expandedArticleId=0;var t=$('span[id="'.concat(n.props.article.id,'"]')).parent().parent().parent().parent();t.addClass("article-flash"),setTimeout(function(){t.removeClass("article-flash")},2e3)},n._articleIsExpanded=function(){return au.instance.expandedArticleId===n.props.article.id},n._renderCompanyAlert=function(){var e=n.props.article;return"company_blog_post"===e.type?c.a.createElement("p",null,e.company.name," published a new Blog Post"):"github_repo"===e.type?c.a.createElement("p",null,e.company.name," released a new Open Source project"):n._renderSocialPostAlert()},n._renderSocialPostAlert=function(){var e=n.props.article,t=e.meta_data;return"slideshare"===t.post_type?c.a.createElement("p",null,e.company.name," added a new Tech Talk Presentation"):"youtube"===t.post_type?c.a.createElement("p",null,e.company.name," added a new Tech Talk"):"meetup"===t.post_type?c.a.createElement("p",null,e.company.name," added a new Tech Event"):c.a.createElement("p",null,e.company.name," added a new Blog Post")},n.state={showHiddenServices:!1,showLoadMoreServices:!0},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sm(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.article;return c.a.createElement("div",null,c.a.createElement("div",{className:"news__article"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("a",{className:"article-company",href:"/".concat(e.company.slug)},c.a.createElement("img",{src:e.company.image_url}))),c.a.createElement("div",{className:"col-md-8"},c.a.createElement("div",{className:"heading news__article__company"},c.a.createElement("div",{className:"news__article__company__heading",onClick:this.handleArticleTitleClick},c.a.createElement("div",{className:"news__article__company__activity"},this._renderCompanyAlert()),c.a.createElement("span",{id:this.props.article.id,className:"news__article__company__activity_title"},("blog_post"===e.type||"company_blog_post"===e.type)&&this.githubRepo(e),this._articleIsExpanded()&&c.a.createElement("i",{className:"fa fa-caret-down"}),!this._articleIsExpanded()&&c.a.createElement("i",{className:"fa fa-caret-right"})," ",_.unescape(e.title))," ",c.a.createElement("span",{className:"url "+(e.highlighted&&"highlighted")},"(",simpleDomainFromUrl(e.outbound_url),")",e.highlighted&&c.a.createElement("i",{className:"stackshare_news__article__highlighted_star fa fa-check-circle"})))),c.a.createElement("div",{className:"links"},e.multiple&&this.multipleLinks(),!e.multiple&&this.link())),c.a.createElement("div",{className:"col-md-3"},this.services()),c.a.createElement("div",{className:"clearfix"})))}}])&&am(n.prototype,o),r&&am(n,r),t}())||em;function um(e){return(um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pm(e,t){return!t||"object"!==um(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fm(e){return(fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dm(e,t){return(dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pm(this,fm(t).call(this,e))).addToToolbuilder=function(){au.instance.addSelectedTool(n.props.service)},n.actionButton=function(){return _.findIndex(au.instance.selectedTools,function(e){return e.id===n.props.service.id})<0?c.a.createElement("button",{className:"action",onClick:n.addToToolbuilder},c.a.createElement("span",{className:"octicon octicon-plus"})," Add"):c.a.createElement("button",{disabled:!0,className:"action btn added"},c.a.createElement("span",{className:"octicon octicon-check"}),"Added")},n.popoverContent=function(){var e=n.props.service;return c.a.createElement(iu.b,{id:"service-popover"},c.a.createElement("div",{className:"service_popover",onMouseLeave:n.triggerOverlayClick},c.a.createElement("div",{className:"service_popover__content"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("img",{src:e.image_url})),c.a.createElement("div",{className:"col-md-9 service_popover__content__name_block"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("a",{className:"name",href:e.canonical_url},e.name,e.verified&&c.a.createElement("span",{className:"hint--top","data-align":"left","data-hint":"Verified"},c.a.createElement("div",{className:"fa fa-check-circle",style:{color:"#0690fa",fontSize:"15px",opacity:"0.8",verticalAlign:"inherit",paddingTop:"2px",marginLeft:"6px"}})))),c.a.createElement("div",{className:"col-md-9"},n.actionButton())),c.a.createElement("div",{className:"col-md-12"},c.a.createElement("p",{className:"title div-center"},_.truncate(e.title,125))),c.a.createElement("div",{className:"clearfix"})),c.a.createElement("hr",null),c.a.createElement("div",{className:"service_popover__footer"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Stacks"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/in-stacks")},c.a.createElement("p",{className:"service_popover__footer__value"},e.stack_count>1e3&&Object(fu.a)(e.stack_count),e.stack_count<=1e3&&Object(fu.a)(e.stack_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Fans"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/fans")},c.a.createElement("p",{className:"service_popover__footer__value"},e.fans_count>1e3&&Object(fu.a)(e.fans_count),e.fans_count<=1e3&&Object(fu.a)(e.fans_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Votes"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"#reasons")},c.a.createElement("p",{className:"service_popover__footer__value"},e.votes_count>1e3&&Object(fu.a)(e.votes_count),e.votes_count<=1e3&&Object(fu.a)(e.votes_count)))))))},n.triggerOverlayClick=function(){n.serviceLink.click()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dm(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props.service;return c.a.createElement(iu.a,{rootClose:!0,trigger:"click",placement:"top",overlay:this.popoverContent()},c.a.createElement("a",{ref:function(t){e.serviceLink=t},style:{display:"block",float:"left"},onMouseEnter:this.triggerOverlayClick},c.a.createElement("img",{src:t.image_url})))}}])&&mm(n.prototype,o),r&&mm(n,r),t}();function bm(e){return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ym(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function vm(e,t){return!t||"object"!==bm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _m(e){return(_m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gm(e,t){return(gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wm,Em=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=vm(this,_m(t).call(this,e))).link=function(){var e=n.props.article;if("reddit"===e.import_source)return c.a.createElement(xu,{simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("lobsters"===e.import_source)return c.a.createElement($u,{simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("hackernews"===e.import_source)return c.a.createElement(Mu,{simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("offsite_article"!==e.type){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{simplified:!0,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url})}},n.multipleLinks=function(){return n.props.article.outbound_sources.map(function(e){if("reddit"===e.import_source)return c.a.createElement(xu,{key:e.id,simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("lobsters"===e.import_source)return c.a.createElement(Mu,{key:e.id,simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("hackernews"===e.import_source)return c.a.createElement(Mu,{key:e.id,simplified:!0,score:e.discussion_score,submissionDate:e.submission_date,commentCount:e.comment_count,discussionSourceUrl:e.discussion_source_url});if("offsite_article"!==e.type){var t=e.facebook_share_count||0;return t+=e.linkedin_share_count,c.a.createElement(Gu,{key:e.id,simplified:!0,shareCount:t,submissionDate:e.submission_date,outboundUrl:e.outbound_url})}})},n.services=function(){var e=n.props.article,t=n.props.article.services;return c.a.createElement("div",null,t.map(function(t){return c.a.createElement(hm,{key:"trending-".concat(e.id,"-services-").concat(t.id),service:t,article:e})}))},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gm(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props.article;return c.a.createElement("div",null,c.a.createElement("div",{className:"news__article trending"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"heading"},c.a.createElement("a",{href:e.outbound_url},c.a.createElement("span",{className:"title"},_.unescape(e.title)),c.a.createElement("span",{className:"url"},"(",simpleDomainFromUrl(e.outbound_url),")"))),c.a.createElement("div",{className:"links trending_source"},e.multiple&&this.multipleLinks(),!e.multiple&&this.link()),c.a.createElement("div",{className:"services"},this.services())),c.a.createElement("div",{className:"clearfix"})))}}])&&ym(n.prototype,o),r&&ym(n,r),t}();function km(e){return(km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Om(e,t){return!t||"object"!==km(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nm(e){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cm(e,t){return(Cm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jm,xm=Object(Ye.a)(wm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Om(this,Nm(t).call(this,e))).toggleShareFilterPopup=function(){trackEvent("news.clicked_share_filter",{name:n.globalStore.currentFilter.name}),n.globalStore.sharefilterPopupVisible=!n.globalStore.sharefilterPopupVisible,n.globalStore.sharefilterPopupVisible&&trackEvent("news.clicked_share_filter_copy_url",{name:n.globalStore.currentFilter.name})},n.globalStore=n.props.globalStore,n.headerExpanded=n.props.headerExpanded,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cm(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.refs.shareFilterLinkCopyBtn;this.clipboard=new Clipboard(e)}},{key:"shareFilterLink",value:function(){var e=this.globalStore.currentFilter;return"".concat(this.globalStore.railsRootUrl,"news/filter/").concat(e.user_id,"/").concat(e.id,"/save")}},{key:"render",value:function(){return c.a.createElement("div",{className:"stackshare_news__share_filter__container stackshare_news__share_filter__container--".concat(this.headerExpanded?"header_expanded":"header_collapsed")},c.a.createElement("button",{className:"btn btn-ss stackshare_news__share_filter__share_button",onClick:this.toggleShareFilterPopup},c.a.createElement("span",{className:"fa fa-share-square-o"}),"Share"),c.a.createElement("div",{className:"stackshare_news__share_filter__popup_wrapper stackshare_news__share_filter__popup_wrapper--".concat(this.globalStore.sharefilterPopupVisible?"visible":"hidden")},c.a.createElement("div",{className:"stackshare_news__share_filter__popup_arrow"}),c.a.createElement("div",{className:"stackshare_news__share_filter__popup"},c.a.createElement("input",{className:"stackshare_news__share_filter__filter_link_textbox",type:"text",id:"share-filter-link",value:this.shareFilterLink(),readOnly:"readonly"}),c.a.createElement("button",{className:"btn stackshare_news__share_filter__copy_button",ref:"shareFilterLinkCopyBtn","data-clipboard-target":"#share-filter-link"},c.a.createElement("span",{className:"octicon octicon-clippy"})))))}}])&&Sm(n.prototype,o),r&&Sm(n,r),t}())||wm;function Tm(e){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Im(e,t){return!t||"object"!==Tm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rm(e,t){return(Rm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mm,zm=Object(Ye.a)(jm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Im(this,Fm(t).call(this,e))).saveFilter=function(e){e.preventDefault();var t={filterName:n.refs.filterName.value,filterDailyAlerts:n.refs.filterDailyAlerts.checked,filterWeeklyAlerts:n.refs.filterWeeklyAlerts.checked},o=n.globalStore.newsFilters.map(function(e){return e.name});n.globalStore.editFilter?(n.globalStore.updateNewsFilter(t),n.globalStore.filterMenuVisible=!1):-1!==o.indexOf(t.filterName)?n.globalStore.validFilterName=!1:(n.globalStore.validFilterName=!0,n.globalStore.createNewsFilter(t),n.globalStore.filterMenuVisible=!1)},n.showFilterForm=function(e){n.globalStore.validFilterName=!0,e.update?n.globalStore.editFilter=!0:n.globalStore.editFilter=!1,n.globalStore.showFilterForm=!0},n.closeOnboarding=function(){stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.showOnboarding","false"),n.globalStore.showOnboarding="false"},n.globalStore=n.props.globalStore,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rm(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e,t=this;return"true"===this.globalStore.showOnboarding?this.globalStore.user_is_signed_in&&0!==this.globalStore.newsFilters.length?(e="false",stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.showOnboarding","false")):(e="true",stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.showOnboarding","true")):(e="false",stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.showOnboarding","false")),c.a.createElement("div",{className:"stackshare_news__absolute_wrapper"},"true"===e&&c.a.createElement("div",{className:"stackshare_news__onboarding_container stackshare_news__onboarding_container--".concat("true"===e?"visible":"hidden")},c.a.createElement("div",{className:"stackshare_news__onboarding_container__tooltip"},c.a.createElement("span",{className:"stackshare_news__onboarding_container__message"},"Save news filters & manage alerts"),c.a.createElement("i",{className:"octicon octicon-rss stackshare_news__onboarding_container__rss"}),c.a.createElement("i",{className:"octicon octicon-mail stackshare_news__onboarding_container__mail"}),c.a.createElement("div",{className:"stackshare_news__onboarding_container__divider"}),c.a.createElement("a",{className:"stackshare_news__onboarding_container__close_wrapper",onClick:this.closeOnboarding},c.a.createElement("i",{className:"octicon octicon-x stackshare_news__onboarding_container__close"}))),c.a.createElement("div",{className:"stackshare_news__onboarding_container__arrow"})),this.globalStore.user_is_signed_in&&c.a.createElement("div",{className:"stackshare_news__filter_container stackshare_news__filter_container--".concat(this.globalStore.filterMenuVisible?"visible":"hidden")},c.a.createElement("div",{className:"stackshare_news__filter_container_arrow"}),(0===this.globalStore.newsFilters.length||this.globalStore.showFilterForm)&&this.globalStore.user_is_signed_in&&c.a.createElement("form",{onSubmit:this.saveFilter,className:"stackshare_news__new_filter_form stackshare_news__new_filter_form--".concat(this.globalStore.validFilterName?"":"invalid")},this.globalStore.queryParamFilterExists&&c.a.createElement("input",{required:!0,ref:"filterName",defaultValue:this.globalStore.queryParamFilterName,className:"stackshare_news__new_filter_form__textbox",type:"text",placeholder:"Filter name"}),!this.globalStore.queryParamFilterExists&&c.a.createElement("input",{required:!0,ref:"filterName",defaultValue:this.globalStore.editFilter?this.globalStore.currentFilter.name:"",className:"stackshare_news__new_filter_form__textbox",type:"text",placeholder:"Filter name"}),!this.globalStore.validFilterName&&c.a.createElement("span",{className:"stackshare_news__new_filter_form_error_msg"},"You already saved a filter with this name"),c.a.createElement("label",null,"Daily Alerts"),c.a.createElement("input",{defaultChecked:!!this.globalStore.editFilter&&this.globalStore.currentFilter.daily_alert,ref:"filterDailyAlerts",className:"stackshare_news__new_filter_form__checkbox",type:"checkbox"}),c.a.createElement("label",null,"Weekly Alerts"),c.a.createElement("input",{defaultChecked:!!this.globalStore.editFilter&&this.globalStore.currentFilter.weekly_alert,ref:"filterWeeklyAlerts",className:"stackshare_news__new_filter_form__checkbox",type:"checkbox"}),c.a.createElement("button",{type:"submit",className:"button"},"Save Filter")),this.globalStore.newsFilters.length>0&&!this.globalStore.showFilterForm&&c.a.createElement("div",{className:"stackshare_news__select_action_form"},c.a.createElement("button",{className:"button",onClick:function(){return t.showFilterForm({update:!0})}},"Update Filter"),c.a.createElement("button",{className:"button",onClick:function(){return t.showFilterForm({update:!1})}},"Save as New Filter"))))}}])&&Pm(n.prototype,o),r&&Pm(n,r),t}())||jm;function Am(e){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dm(e,t){return!t||"object"!==Am(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $m(e,t){return($m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bm=Object(Ye.a)(Mm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Dm(this,Um(t).call(this,e))).toggleSavedFilters=function(){n.globalStore.showSavedFilters=!n.globalStore.showSavedFilters},n.globalStore=n.props.globalStore,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$m(e,t)}(t,i["Component"]),n=t,(o=[{key:"deleteFilter",value:function(e){this.globalStore.deleteNewsFilter(e.id)}},{key:"setCurrentFilter",value:function(e){trackEvent("news.clicked_filter_options",{filter:e.name}),this.globalStore.setCurrentFilter(e)}},{key:"render",value:function(){var e=this,t=this.globalStore.newsFilters.map(function(t){var n=t.id===e.globalStore.currentFilter.id;return c.a.createElement("tr",{key:"filter-".concat(t.id),className:n?"stackshare_news__saved_filters_list__selected_filter_row":"stackshare_news__saved_filters_list__item"},c.a.createElement("td",null,!n&&c.a.createElement("a",{onClick:function(){return e.setCurrentFilter(t)}},t.name),n&&c.a.createElement("div",{className:"stackshare_news__saved_filters_list__filter_name"},t.name)),c.a.createElement("td",null,c.a.createElement("input",{onChange:function(){return e.globalStore.toggleAlert(t,"daily_alert")},checked:t.daily_alert,type:"checkbox"})),c.a.createElement("td",null,c.a.createElement("input",{onChange:function(){return e.globalStore.toggleAlert(t,"weekly_alert")},checked:t.weekly_alert,type:"checkbox"})),c.a.createElement("td",null,c.a.createElement("a",{href:t.rss_feed_link,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fa fa-rss"}))),c.a.createElement("td",null,c.a.createElement("i",{onClick:function(){return e.deleteFilter(t)},className:"fa fa-times"})))});return c.a.createElement("div",{className:"stackshare_news__saved_filters_container"},c.a.createElement("button",{onClick:this.toggleSavedFilters,className:"btn-block stackshare_news__collapsed_filter__saved_filters_button"},c.a.createElement("span",{className:"stackshare_news__saved_filter_name_outer_wrapper"},this.globalStore.currentFilter.id&&c.a.createElement("span",{onClick:function(){trackEvent("news.clicked_filter_dropdown",{filter:e.globalStore.currentFilter.name})},className:"stackshare_news__saved_filter_name_inner_wrapper stackshare_news__saved_filter_name"},this.globalStore.currentFilter.name),!this.globalStore.currentFilter.id&&c.a.createElement("span",{className:"stackshare_news__saved_filter_name_inner_wrapper stackshare_news__saved_filter_name"},"Filters")),c.a.createElement("i",{className:"stackshare_news__saved_filter_name_toggle fa fa-caret-".concat(this.globalStore.showSavedFilters?"up":"down")})),this.globalStore.showSavedFilters&&c.a.createElement("div",{className:"stackshare_news__saved_filters_list stackshare_news__saved_filters_list--".concat(this.props.headerExpanded===au.instance.headerExpanded?"visible":"hidden")},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Filter"),c.a.createElement("th",null,"Daily Alert"),c.a.createElement("th",null,"Weekly Alert"),c.a.createElement("th",null,"RSS"),c.a.createElement("th",null,"Delete"))),c.a.createElement("tbody",null,t))))}}])&&Lm(n.prototype,o),r&&Lm(n,r),t}())||Mm;function qm(e){return(qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wm(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vm(e,t){return!t||"object"!==qm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hm(e){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jm(e,t){return(Jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vm(this,Hm(t).call(this,e))).addToToolbuilder=function(){au.instance.addSelectedTool(n.props.service)},n.actionButton=function(){return _.findIndex(au.instance.selectedTools,function(e){return e.id===n.props.service.id})<0?c.a.createElement("button",{className:"action",onClick:n.addToToolbuilder},c.a.createElement("span",{className:"octicon octicon-plus"})," Add"):c.a.createElement("button",{disabled:!0,className:"action btn added"},c.a.createElement("span",{className:"octicon octicon-check"}),"Added")},n.popoverContent=function(){var e=n.props.service;return c.a.createElement(iu.b,{id:"service-popover"},c.a.createElement("div",{className:"service_popover",onMouseLeave:n.triggerOverlayClick},c.a.createElement("div",{className:"service_popover__content"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("img",{src:e.image_url})),c.a.createElement("div",{className:"col-md-9 service_popover__content__name_block"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("a",{className:"name",href:e.canonical_url},e.name,e.verified&&c.a.createElement("span",{className:"hint--top","data-align":"left","data-hint":"Verified"},c.a.createElement("div",{className:"fa fa-check-circle",style:{color:"#0690fa",fontSize:"15px",opacity:"0.8",verticalAlign:"inherit",paddingTop:"2px",marginLeft:"6px"}})))),c.a.createElement("div",{className:"col-md-9"},n.actionButton())),c.a.createElement("div",{className:"col-md-12"},c.a.createElement("p",{className:"title div-center"},_.truncate(e.title,125))),c.a.createElement("div",{className:"clearfix"})),c.a.createElement("hr",null),c.a.createElement("div",{className:"service_popover__footer"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Stacks"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/in-stacks")},c.a.createElement("p",{className:"service_popover__footer__value"},e.stack_count>1e3&&Object(fu.a)(e.stack_count),e.stack_count<=1e3&&Object(fu.a)(e.stack_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Fans"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"/fans")},c.a.createElement("p",{className:"service_popover__footer__value"},e.fan_count>1e3&&Object(fu.a)(e.fans_count),e.fan_count<=1e3&&Object(fu.a)(e.fans_count)))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",{className:"service_popover__footer__label"},"Votes"),c.a.createElement("a",{className:"name",href:"".concat(e.canonical_url,"#reasons")},c.a.createElement("p",{className:"service_popover__footer__value"},e.vote_count>1e3&&Object(fu.a)(e.votes_count),e.vote_count<=1e3&&Object(fu.a)(e.votes_count)))))))},n.triggerOverlayClick=function(){n.serviceLink.click()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jm(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props.service;return c.a.createElement(iu.a,{rootClose:!0,trigger:"click",placement:"bottom",overlay:this.popoverContent()},c.a.createElement("a",{ref:function(t){e.serviceLink=t},style:{display:"block",float:"left"},onMouseEnter:this.triggerOverlayClick},c.a.createElement("img",{key:"collapsed-header-tool-thumbnail-".concat(t.id),className:"stackshare_news__collapsed_header__thumbnail",src:t.image_url})))}}])&&Wm(n.prototype,o),r&&Wm(n,r),t}();function Km(e){return(Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ym(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zm(e,t){return!t||"object"!==Km(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xm(e){return(Xm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qm(e,t){return(Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ep=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zm(this,Xm(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qm(e,t)}(t,i["Component"]),n=t,(o=[{key:"renderNotifications",value:function(){var e=this.props,t=e.type,n=e.message,o=e.icon;return n||this.handleDismiss(),"serverError"===t&&n instanceof Object?this.extractMessages(n).map(function(e,t){return c.a.createElement("div",{key:t,className:"message-wrap"},e)}):o?c.a.createElement("div",{className:"message-wrap"},c.a.createElement("div",{className:"message-with-icon"},c.a.createElement("i",{className:"message-icon fa ".concat(o)}),c.a.createElement("span",null,n))):c.a.createElement("div",{className:"message-wrap"},n)}},{key:"extractMessages",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var o=_.capitalize(n);e[n].map(function(e){t.push("".concat(o," ").concat(e))})}),t}},{key:"isError",value:function(){var e=this.props.type;return"error"===e||"serverError"===e}},{key:"renderDismiss",value:function(){return this.isError()?null:c.a.createElement("i",{onClick:this.handleDismiss.bind(this),className:"close-banner fa fa-times"})}},{key:"handleDismiss",value:function(){this.props.dismiss()}},{key:"getClassName",value:function(){return this.isError()?"error":this.props.type}},{key:"render",value:function(){return c.a.createElement("div",{className:"notify-banner notify-banner--type-".concat(this.getClassName())},this.renderNotifications(),this.renderDismiss())}}])&&Ym(n.prototype,o),r&&Ym(n,r),t}();ep.propTypes={type:ye.a.string,message:ye.a.any,icon:ye.a.string,dismiss:ye.a.func},ep.defaultProps={type:"info"};var tp,np=ep;function op(e){return(op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ap(e){return(ap=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ip(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cp(e,t){return(cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sp=Object(Ye.a)(tp=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=ap(t).call(this,e),(n=!r||"object"!==op(r)&&"function"!=typeof r?ip(o):r).articles=function(){return c.a.createElement("div",null,au.instance.articles.map(function(e){return e.company?c.a.createElement(lm,{key:"article-".concat(e.id),article:e}):c.a.createElement(tm,{key:"article-".concat(e.id),article:e})}),c.a.createElement("div",{className:"div-center"},c.a.createElement("button",{className:"stackshare_news__load_more_btn btn btn-ss-alt btn-lg",onClick:au.instance.loadMoreArticles.bind(ip(n))},"More")))},n.trendingArticles=function(){return au.instance.trendingArticles.map(function(e){return c.a.createElement(Em,{key:"trending-article-".concat(e.id),article:e})})},n.getFacets=function(e){return e?get("/api/v1/news/facets?term=".concat(e)).then(function(e){return{options:e.data}}):Promise.resolve({options:[]})},n.handleSelectChange=function(e){au.instance.facets=e,au.instance.search(),au.instance.serializeToUrl()},n.closeSignInModal=function(){n.setState({showSignInModal:!1})},n.showSignInModal=function(){n.setState({showSignInModal:!0})},n.toggleHeader=function(){!1===au.instance.headerExpanded&&$(".news-builder-container--collapsed").css("margin-bottom",""),"true"===au.instance.headerExpanded?au.instance.headerExpanded="false":au.instance.headerExpanded="true","true"===au.instance.headerExpanded?stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.headerExpanded","true"):stackshare.utils.storageAvailable("localStorage")&&localStorage.setItem("stackshare.news.headerExpanded","false")},au.instance={},au.instance.user_is_signed_in=n.props.user_is_signed_in,au.instance.railsRootUrl=n.props.rails_root_url,au.instance.defaultToolsFromStack=n.props.services,au.instance.user_is_signed_in=n.props.user_is_signed_in,au.instance.lobsters_image_path=n.props.lobsters_image_path,au.instance.showOnboardingNotification=n.props.showOnboardingNotification,window.store=au.instance,n.state={showSignInModal:!1,windowWidth:$(window).width(),collapsedHeaderWidth:$(".stackshare_news__collapsed_header").width(),toolsContainerWidth:$(".stackshare_news__collapsed_header").width(),filterSelectorWidth:$(".stackshare_news__collapsed_header .stackshare_news__saved_filters_container").width()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cp(e,t)}(t,i["Component"]),n=t,(o=[{key:"setWidths",value:function(){this.setState({windowWidth:$(window).width(),toolsContainerWidth:$(".stackshare_news__collapsed_header").width(),filterSelectorWidth:$(".stackshare_news__collapsed_header .stackshare_news__saved_filters_container").width()})}},{key:"componentDidMount",value:function(){var e=this;this.setWidths(),$(window).resize(function(){e.setWidths()}),au.instance.showOnboardingNotification&&au.instance.showNotification({type:"info",message:'Here\'s a curated feed of news based on your tech stack. Hit "Save" to subscribe to updates!'})}},{key:"getChildContext",value:function(){return{globalStore:au.instance}}},{key:"toggleFilter",value:function(){au.instance.filterMenuVisible=!au.instance.filterMenuVisible,au.instance.showFilterForm=!1,au.instance.editFilter=!1}},{key:"clearTools",value:function(){trackEvent("news.clicked_clear_tools",{cleared_tools:au.instance.selectedTools.map(function(e){return e.slug}).join(",")}),au.instance.selectedTools=[],au.instance.search(),$(".builder-wrap__slider-wrap").removeClass("overflowed"),au.instance.serializeToUrl()}},{key:"facets",value:function(e){for(var t=null==this.state.toolsContainerWidth?$(".stackshare_news__collapsed_header").width():this.state.toolsContainerWidth,n=$(".stackshare_news__collapsed_header .stackshare_news__saved_filters_container").width(),o=t-(null==n?0:n+20)-10,r=0,a=[],i=0;i<e.length;i++){var s=e[i],l=6*s.name.length+18+10;r+l<o&&(a.push({name:s.name}),r+=l)}return a.map(function(e){return c.a.createElement("div",{key:e.name,className:"stackshare_news__collapsed_header__tag"},e.name)})}},{key:"tools",value:function(e){for(var t=[],n=0;n<e.length;n++){var o=$.extend(!0,{},e[n]);t.push(o)}var r=$($(".container")[0]).width(),a=null==this.state.filterSelectorWidth?$(".stackshare_news__collapsed_header .stackshare_news__saved_filters_container").width():this.state.filterSelectorWidth,i=r-(null==a?0:a+20)-10,s=Math.floor(i/35);return(e.length>s?t.splice(0,s-1):t).map(function(e){return c.a.createElement(Gm,{key:e.id,service:e})})}},{key:"toggleSource",value:function(e){var t=au.instance.allowedSourcesMap[e];au.instance[t]=!au.instance[t],au.instance.serializeToUrl(),au.instance.search()}},{key:"render",value:function(){var e=this,t=au.instance.headerExpanded,n=au.instance.notifications;return c.a.createElement("div",null,au.instance.hasNotification&&c.a.createElement(np,{type:n.get("type"),message:n.get("message"),icon:n.get("icon"),dismiss:au.instance.clearNotifications.bind(au.instance)}),"true"===t&&c.a.createElement("div",{className:"container news-builder-container"},c.a.createElement("div",null,c.a.createElement("div",{className:"stackshare_news__header"},c.a.createElement("a",{className:"stackshare_news__collapse_header_btn hint--left",onClick:this.toggleHeader,"data-align":"left","data-hint":"Minimize"},c.a.createElement("i",{className:"fa fa-minus"})),c.a.createElement("h1",null,"Stack News"),c.a.createElement("h2",null,"Keep up with the latest news about the tools in your stack"),c.a.createElement("div",{className:"news-sources"},c.a.createElement("div",{className:"div-center"},c.a.createElement("span",{className:"octicon octicon-question question-hide"}),c.a.createElement("i",{className:"fa fa-hacker-news hacker-news-source "+(au.instance.showHackerNews?"":"grey"),onClick:function(){e.toggleSource("hacker_news")}}),c.a.createElement("i",{className:"fa fa-reddit reddit-source "+(au.instance.showReddit?"":"grey"),onClick:function(){e.toggleSource("reddit")}}),c.a.createElement("img",{src:au.instance.lobsters_image_path,className:"lobsters lobsters-source "+(au.instance.showLobsters?"":"grey"),onClick:function(){e.toggleSource("lobsters")}}),c.a.createElement("i",{className:"fa fa-github github-source "+(au.instance.showGithub?"":"grey"),onClick:function(){e.toggleSource("github")}}),c.a.createElement("i",{className:"octicon octicon-rss rss-source "+(au.instance.showRSS?"":"grey"),onClick:function(){e.toggleSource("rss")}}),c.a.createElement("span",{className:"hint--top","data-align":"left","data-hint":"Top news from Hacker News, Reddit, Lobsters, and RSS feeds"},c.a.createElement("span",{className:"octicon octicon-question"}))))),c.a.createElement("div",{className:"powered-by-news hidden-sm hidden-xs"},"Powered by",c.a.createElement("a",{href:"/algolia"},c.a.createElement("img",{style:{width:"80px",marginLeft:"7px"},alt:"Algolia",src:"https://img.stackshare.io/fe/algolia-dark.png"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"stackshare_news__tool_builder_wrapper"},c.a.createElement(_n,{multiline:!0,placeholder:"Search & add tools",removeUnapproved:!0})),c.a.createElement("div",{className:"stackshare_news__save_button_wrapper"},this.props.user_is_signed_in&&c.a.createElement("button",{className:"btn btn-block stackshare_news__save_news_stack",onClick:function(){e.toggleFilter(),trackEvent("news.clicked_save",{services:au.instance.selectedTools.map(function(e){return e.slug}).join(",")})},id:"save-news-filter"},"Save"),!this.props.user_is_signed_in&&c.a.createElement("button",{className:"btn btn-block stackshare_news__save_news_stack",onClick:this.showSignInModal,id:"save-news-filter"},"Save"),c.a.createElement("a",{className:"stackshare_news__clear_tools",onClick:this.clearTools},"Clear Tools"),c.a.createElement(zm,{globalStore:au.instance})))),c.a.createElement("div",{className:"row cat-filter-row"},c.a.createElement("div",{className:"".concat(void 0===au.instance.currentFilter.id?"col-md-9 col-sm-9 col-xs-8":"col-md-7 col-sm-7 col-xs-6")},c.a.createElement(Xl.a,{multi:!0,value:au.instance.facets.slice(),valueKey:"slug",labelKey:"name",options:this.props.topics,backspaceRemoves:!0,placeholder:"Search & add groups or topics",onChange:this.handleSelectChange})),void 0!==au.instance.currentFilter.id&&c.a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},c.a.createElement(xm,{globalStore:au.instance,headerExpanded:!0})),c.a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-4"},au.instance.newsFilters.length>0&&c.a.createElement(Bm,{globalStore:au.instance,headerExpanded:"true"}))))),"true"!==t&&c.a.createElement("div",{className:"stackshare_news__collapsed_header_wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"stackshare_news__collapsed_header"},au.instance.newsFilters.length>0&&au.instance.currentFilter.facets&&c.a.createElement("div",null,au.instance.currentFilter.facets.length>0&&0===au.instance.currentFilter.services.length&&c.a.createElement("div",null,this.facets(au.instance.currentFilter.facets))),au.instance.newsFilters.length>0&&au.instance.currentFilter.services&&c.a.createElement("div",null,au.instance.currentFilter.services.length>0&&c.a.createElement("div",null,this.tools(au.instance.selectedTools))),au.instance.showDefaultTools&&au.instance.defaultToolsFromStack&&c.a.createElement("div",null,au.instance.defaultToolsFromStack.length>0&&c.a.createElement("div",null,this.tools(au.instance.defaultToolsFromStack))),!au.instance.showDefaultTools&&void 0===au.instance.currentFilter.id&&au.instance.selectedTools&&c.a.createElement("div",null,au.instance.selectedTools.length>0&&c.a.createElement("div",null,this.tools(au.instance.selectedTools))),void 0!==au.instance.currentFilter.id&&c.a.createElement(xm,{globalStore:au.instance,headerExpanded:!1}),au.instance.newsFilters.length>0&&c.a.createElement(Bm,{globalStore:au.instance,headerExpanded:"false"}),c.a.createElement("a",{className:"stackshare_news__expand_header_btn",onClick:this.toggleHeader},c.a.createElement("i",{className:"fa fa-plus"})))))),c.a.createElement("div",{className:"news-item-container row"},c.a.createElement("div",{className:"row news-item-container__outer_row"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-3 trending_column hidden-xs hidden-sm"},c.a.createElement("p",{className:"news_trending_heading"},c.a.createElement("i",{className:"octicon octicon-flame"}),"Trending News"),au.instance.trendingArticles.length>0&&this.trendingArticles(),c.a.createElement("div",null,c.a.createElement("div",{className:"news__article trending news-newsletter-container"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"newsletter-copy"},"Get trending news delivered to your inbox"),c.a.createElement("img",{src:this.props.digest_image,className:"newsletter-image"}),c.a.createElement("div",{className:"newsletter-save-container"},c.a.createElement("a",{className:"btn btn-ss-alt newsletter-save btn-block",href:"#save-news-filter"},"Subscribe"))),c.a.createElement("div",{className:"clearfix"})))),c.a.createElement("div",{className:"col-md-9"},au.instance.articles.length>0&&this.articles(),au.instance.noResultsFound&&c.a.createElement("p",{className:"no-results"},"No news for those tools :( Try picking a different set of tools."),au.instance.loadingPage&&c.a.createElement("img",{style:{display:"block",width:"70px",margin:"30px auto"},src:"https://img.stackshare.io/fe/spinner.svg"}))))),this.state.showSignInModal&&c.a.createElement(ut.b,{onDismiss:this.closeSignInModal,redirect:"/news"}))}}])&&rp(n.prototype,o),r&&rp(n,r),t}())||tp;function lp(e){return(lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function up(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mp(e,t){return!t||"object"!==lp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pp(e){return(pp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fp(e,t){return(fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}sp.childContextTypes={globalStore:ye.a.object};var dp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mp(this,pp(t).call(this,e))).linkedinShareUrl=function(){return"https://www.linkedin.com/shareArticle?url=".concat(n.props.permalink,"&title=").concat(encodeURI(n.props.title))},n.twitterShareUrl=function(){return"https://twitter.com/intent/tweet?hashtags=stacknews&via=stackshareio&text=".concat(encodeURI(n.props.title)," ").concat(n.props.permalink)},n.facebookShareUrl=function(){return"https://www.facebook.com/sharer/sharer.php?u=".concat(n.props.permalink)},n.mailtoUrl=function(){return"mailto:?subject=".concat(n.props.title,"&body=").concat(n.props.permalink)},n._renderServices=function(){var e=n.props.services.map(function(e){return c.a.createElement("a",{key:"reader-header-service-".concat(e.id),href:e.canonical_url},c.a.createElement("img",{src:e.image_url}))});return c.a.createElement("div",{className:"news-reader__header__services"},e)},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fp(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"news-reader__header"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},this._renderServices())),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"news-reader__header__main-links"},c.a.createElement("a",{href:this.props.outboundUrl,"data-track":"news.outboundUrlClick","data-track-props":JSON.stringify({outboundUrl:this.props.outboundUrl})},c.a.createElement("i",{className:"fa fa-share-square-o"}),"View Original Source"),c.a.createElement("a",{href:this.props.permalink,"data-track":"news.permalinkClick","data-track-props":JSON.stringify({permalink:this.props.permalink})},c.a.createElement("i",{className:"fa fa-link"}),"Permalink"))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"news-reader__header__actions"},c.a.createElement("a",{className:"facebook",href:this.facebookShareUrl(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fa fa-facebook"})),c.a.createElement("a",{href:this.twitterShareUrl(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fa fa-twitter"})),c.a.createElement("a",{href:this.linkedinShareUrl(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fa fa-linkedin"})),c.a.createElement("a",{href:this.mailtoUrl(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fa fa-envelope-o"})),c.a.createElement("span",null,"Share")))))}}])&&up(n.prototype,o),r&&up(n,r),t}();dp.propTypes={permalink:ye.a.string,outboundUrl:ye.a.string,title:ye.a.string};var hp,bp=dp,yp=n("/home/circleci/frontend/node_modules/react-tweet-embed/dist/tweet-embed.es.js");function vp(e){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ep(e,t){return(Ep=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kp,Sp=Object(Ye.a)(hp=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=gp(t).call(this,e),(n=!r||"object"!==vp(r)&&"function"!=typeof r?wp(o):r).loadContent=function(){var e=wp(n),t=n.props.article.id;au.instance.cachedArticleContents["".concat(t)]?e.setState({content:au.instance.cachedArticleContents["".concat(t)]}):$.ajax({url:"".concat(window.umbrellaApplication,"/api/v1/articles/").concat(n.props.article.id.split(".")[1],"/content"),type:"get",error:function(){e.setState({content:"<h1>Unable to fetch article content. Please visit the original source</h1>"})},success:function(n){e.setState({content:n}),au.instance.cachedArticleContents["".concat(t)]=n}})},n.rawContent=function(){return n.state.content&&""!==n.state.content?{__html:n.state.content}:{__html:"<h1>Unable to fetch article content. Please visit the original source</h1>"}},n.permalink=function(){var e=n.props.article,t=e.id.split(".")[1],o=ku()(e.title.replace(/\./g,"dot"));return"https://stackshare.io/news-classic/article/".concat(t,"/").concat(o)},n._articleIsTweet=function(){return n.props.article.outbound_url.includes("twitter.com")},n._renderTweet=function(){var e=n.props.article.outbound_url.split("/"),t=_.last(e);return c.a.createElement(yp.a,{id:t})},n._renderArticle=function(){return c.a.createElement("div",{className:"news-reader__content"},c.a.createElement("div",{dangerouslySetInnerHTML:n.rawContent(),className:"news-reader__content__content-text"}),c.a.createElement("div",{className:"div-center"},c.a.createElement("a",{className:"news-reader__content__visit-website-link btn btn-ss btn-block btn-lg",href:n.props.article.outbound_url,"data-track":"news.visitWebsiteButtonClick","data-track-props":JSON.stringify({id:n.props.article.id,title:n.props.article.title})},"Visit Website")))},n.state={content:""},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ep(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.loadContent()}},{key:"render",value:function(){return c.a.createElement("div",{className:"news-reader"},c.a.createElement(bp,{permalink:this.permalink(),outboundUrl:this.props.article.outbound_url,title:this.props.article.title,services:this.props.services}),this._articleIsTweet()&&this._renderTweet(),!this._articleIsTweet()&&this._renderArticle())}}])&&_p(n.prototype,o),r&&_p(n,r),t}())||hp;function Op(e){return(Op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Np(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cp(e,t){return!t||"object"!==Op(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xp(e,t){return(xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tp=Object(Ye.a)(kp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Cp(this,jp(t).call(this,e))).handleBackdropClick=function(e){"news-reader__backdrop"!==e.target.className&&"news-reader__backdrop__content__close"!==e.target.className&&"fa fa-times"!==e.target.className||n.setState({expanded:!1},function(){window.location.href.includes("/news-classic")?window.location="/news-classic":window.location="/news"})},n.state={expanded:!0},au.instance.setStandaloneArticleById(n.props.articleId),n._el=null,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xp(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(t){return e._el=t},className:"news-reader__backdrop",onClick:this.handleBackdropClick},c.a.createElement("div",{className:"news-reader__backdrop__slide_"+(this.state.expanded?"in":"out")},c.a.createElement("div",{className:"news-reader__backdrop__content"},c.a.createElement("span",{className:"news-reader__backdrop__content__close",onClick:this.handleBackdropClick},c.a.createElement("i",{className:"fa fa-times"})),au.instance.standaloneArticle&&c.a.createElement("h1",null,au.instance.standaloneArticle.title),c.a.createElement("span",{className:"news-reader__backdrop__content__url"},au.instance.standaloneArticle&&simpleDomainFromUrl(au.instance.standaloneArticle.outbound_url)),!_.isEmpty(au.instance.standaloneArticle)&&c.a.createElement(Sp,{article:au.instance.standaloneArticle,services:au.instance.standaloneArticle.services}))))}}])&&Np(n.prototype,o),r&&Np(n,r),t}())||kp;function Pp(e){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ip(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fp(e,t){return!t||"object"!==Pp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rp(e){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mp(e,t){return(Mp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Tp.propTypes={articleId:ye.a.number};var zp=function(e){return c.a.createElement("svg",e,c.a.createElement("path",{d:"M5.5 0v11M0 5.5h11",fill:"none",stroke:"#fff"}))};zp.defaultProps={width:"11",height:"11",viewBox:"0 0 11 11",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"1.5"};var Ap=function(e){return c.a.createElement("svg",e,c.a.createElement("path",{fill:"#068dfe",fillRule:"evenodd",d:"M4.203 7.493L1.191 4.476a.697.697 0 1 0-.986.988l3.488 3.495a.692.692 0 0 0 .493.205.69.69 0 0 0 .476-.187l8.27-7.767A.698.698 0 1 0 11.98.187L4.204 7.493z"}))};Ap.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10",viewBox:"0 0 14 10"};var Lp,Dp,Up,$p,Bp,qp,Wp,Vp,Hp,Jp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fp(this,Rp(t).call(this))).getFollowStatus=function(){get("/api/v1/follows/following?followee_id="+n.state.followeeId+"&followee_type="+n.state.followeeType).then(function(e){n.mounted&&(n.setState({followerCount:e.data.follower_count}),n.setState({followerCountReadable:e.data.follower_count_readable}),n.setState({following:e.data.following}))})},n.toggleFollow=function(){n.state.userId?get("/api/v1/follows/toggle?followee_id="+n.state.followeeId+"&followee_type="+n.state.followeeType).then(function(e){n.mounted&&(n.setState({followerCount:e.data.follower_count}),n.setState({followerCountReadable:e.data.follower_count_readable}),n.setState({following:e.data.following}))}):signupModal()},n.mounted=!1,n.state={userId:e.userId,following:e.defaultFollowing,followeeId:e.followeeId,followeeType:e.followeeType,followerCount:0},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mp(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.mounted=!0,$(".follow_button").remove(),this.state.userId&&this.getFollowStatus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.state,t=e.following,n=e.followerCount,o=e.followerCountReadable,r=this.props.showCount;return c.a.createElement("div",{className:"follow_button_component"},c.a.createElement(oe.a,{onClick:this.toggleFollow,active:t,width:125,className:r&&n>0?"show-count":"hide-count"},t?c.a.createElement(Ap,null):c.a.createElement(zp,null)," ",t?"Following":"Follow"),r&&n>0&&c.a.createElement("div",{className:"follow_button_component__count"},o))}}])&&Ip(n.prototype,o),r&&Ip(n,r),t}();function Gp(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Kp(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yp(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Jp.propTypes={showCount:ye.a.bool};var Zp,Xp=(Dp=Yp((Lp=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gp(this,"comments",Dp,this),Gp(this,"isLoading",Up,this),Gp(this,"signInModalVisible",$p,this),Gp(this,"newCommentFormVisible",Bp,this),Gp(this,"defaultVisibleCommentCount",qp,this),Gp(this,"viewMoreCommentsVisible",Wp,this),Gp(this,"showCommentVisibilityToggle",Vp,this),Gp(this,"showCommentsList",Hp,this),this.toggleShowCommentsList=function(){n.showCommentsList=!n.showCommentsList},this.toggleShowNewCommentForm=function(){void 0===window.app_data.current_user.id?n.showSignInModal():(n.newCommentFormVisible=!n.newCommentFormVisible,n.newCommentFormVisible&&(n.showCommentsList=!0))},this.toggleViewMoreCommentsVisible=function(){n.viewMoreCommentsVisible=!n.viewMoreCommentsVisible},this.hideSignInModal=function(){n.signInModalVisible=!1},this.commentableId=t.commentableId,this.commentableType=t.commentableType,this.showCommentVisibilityToggle=t.showCommentVisibilityToggle,this.showCommentsList=t.showCommentsList,this.markdownConverter=null,this.loadComments()}var t,o,r;return t=e,(o=[{key:"showSignInModal",value:function(){this.signInModalVisible=!0}},{key:"toggleUpvote",value:function(e){var t=this;return new Promise(function(n,o){var r="/api/v1/comments/".concat(e,"/toggle_upvote");$.post(r).done(function(e){null===e.parentId?t.comments.find(function(t){return t.id===e.id}).votes=e.votes:t.comments.find(function(t){return t.id===e.parentId}).children.find(function(t){return t.id===e.id}).votes=e.votes;n()}).fail(function(e){o(e)})})}},{key:"toggleFlagged",value:function(e){var t=this;return new Promise(function(n,o){var r="/api/v1/comments/".concat(e,"/toggle_flagged");$.post(r).done(function(e){null===e.parentId?t.comments.find(function(t){return t.id===e.id}).flagged=e.flagged:t.comments.find(function(t){return t.id===e.parentId}).children.find(function(t){return t.id===e.id}).flagged=e.flagged;n()}).fail(function(e){o(e)})})}},{key:"loadComments",value:function(){var e=this;this.isLoading=!0;var t="/api/v1/comments?commentable_id=".concat(this.commentableId,"&commentable_type=").concat(this.commentableType);get(t).then(function(t){n.e(28).then(n.t.bind(null,"/home/circleci/frontend/node_modules/showdown/dist/showdown.js",7)).then(function(n){var o=n.default;e.markdownConverter=new o.Converter,e.comments=t.data,e.isLoading=!1})})}},{key:"replyComment",value:function(e,t){var n=this;return new Promise(function(o,r){var a={comment:{parent_id:e,body:t,user_id:window.app_data.current_user.id,commentable_id:n.commentableId,commentable_type:n.commentableType}};$.post("/api/v1/comments/reply",a).done(function(t){n.comments.find(function(t){return t.id===e}).children.push(t),o()}).fail(function(e){r(e)})})}},{key:"createComment",value:function(e){var t=this;return new Promise(function(n,o){var r={comment:{body:e,user_id:window.app_data.current_user.id,commentable_id:t.commentableId,commentable_type:t.commentableType}};$.post("/api/v1/comments",r).done(function(e){t.comments.push(e),n()}).fail(function(e){o(e)})})}},{key:"updateComment",value:function(e,t){var n=this;return new Promise(function(o,r){var a={comment:{body:t}},i="/api/v1/comments/".concat(e);$.ajax({method:"PUT",url:i,data:a}).done(function(e){null===e.parentId?n.comments.find(function(t){return t.id===e.id}).body=e.body:n.comments.find(function(t){return t.id===e.parentId}).children.find(function(t){return t.id===e.id}).body=e.body;o()}).fail(function(e){r(e)})})}},{key:"deleteComment",value:function(e){var t=this;return new Promise(function(n,o){var r="/api/v1/comments/".concat(e);$.ajax({method:"DELETE",url:r}).done(function(e){if(null===e.parentId){var o=t.comments.find(function(t){return t.id===e.id});t.comments.remove(o)}else{var r=t.comments.find(function(t){return t.id===e.parentId}),a=r.children.find(function(t){return t.id===e.id});r.children.remove(a)}n()}).fail(function(e){o(e)})})}}])&&Kp(t.prototype,o),r&&Kp(t,r),e}()).prototype,"comments",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Up=Yp(Lp.prototype,"isLoading",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$p=Yp(Lp.prototype,"signInModalVisible",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bp=Yp(Lp.prototype,"newCommentFormVisible",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qp=Yp(Lp.prototype,"defaultVisibleCommentCount",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Wp=Yp(Lp.prototype,"viewMoreCommentsVisible",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vp=Yp(Lp.prototype,"showCommentVisibilityToggle",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hp=Yp(Lp.prototype,"showCommentsList",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lp);function Qp(e){return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tf(e,t){return!t||"object"!==Qp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function of(e,t){return(of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rf,af=null,cf=Object(Ye.a)(Zp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tf(this,nf(t).call(this,e))).createComment=function(){var e=n.state.value.toString("markdown");n.store.createComment(e).then(function(){n.successFn(),!1===n.store.viewMoreCommentsVisible&&(n.store.viewMoreCommentsVisible=!0),document.getElementsByClassName("react_comments__bottom_anchor")[0].scrollIntoView(!1)}).catch(function(){return null})},n.editComment=function(){var e=n.state.value.toString("markdown");n.store.updateComment(n.commentId,e).then(function(){n.successFn()}).catch(function(){return null})},n.replyComment=function(){var e=n.state.value.toString("markdown");n.store.replyComment(n.parentId,e).then(function(){n.successFn()}).catch(function(){return null})},n.onChange=function(e){n.setState({value:e})},n.store=n.props.store,n.type=n.props.type,n.value=n.props.value,n.commentId=n.props.commentId,n.parentId=n.props.parentId,n.successFn=n.props.successFn,n.cancelFn=n.props.cancelFn,n.state={rteReady:!1},n}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&of(e,t)}(t,i["Component"]),o=t,(r=[{key:"componentDidMount",value:function(){var e=this;n.e(27).then(n.t.bind(null,"/home/circleci/frontend/node_modules/react-rte/dist/react-rte.js",7)).then(function(t){af=t.default,e.setState({rteReady:!0,value:e.value?t.createValueFromString(e.value,"markdown"):t.createEmptyValue()})})}},{key:"render",value:function(){if(!this.state.rteReady)return c.a.createElement("span",{style:{fontStyle:"italic"}},"Loading comment editor...");return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"comment_form__wrapper ".concat(("reply"===this.type||"edit"===this.type&&null!=this.parentId)&&"col-md-10 col-sm-10 col-xs-10 col-md-offset-2 col-sm-offset-2 col-xs-offset-2")},c.a.createElement("div",{className:"comment_form"},c.a.createElement("div",{className:"comment_instructions"},c.a.createElement("span",{className:"comment_instructions__note"},"Parsed as Markdown"),c.a.createElement("span",{className:"comment_instructions__icon octicon octicon-markdown"})),c.a.createElement(af,{value:this.state.value,onChange:this.onChange,toolbarConfig:{display:["INLINE_STYLE_BUTTONS","BLOCK_TYPE_BUTTONS","LINK_BUTTONS","BLOCK_TYPE_DROPDOWN"],INLINE_STYLE_BUTTONS:[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"}],BLOCK_TYPE_DROPDOWN:[{label:"Normal",style:"unstyled"},{label:"Heading Large",style:"header-one"},{label:"Heading Medium",style:"header-two"},{label:"Heading Small",style:"header-three"}],BLOCK_TYPE_BUTTONS:[{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"}]}})),"create"===this.type&&c.a.createElement("button",{onClick:this.createComment,className:"btn btn-ss-alt btn-sm comment_form__action_btn"},"Comment"),"edit"===this.type&&c.a.createElement("button",{onClick:this.editComment,className:"btn btn-ss-alt btn-sm comment_form__action_btn"},"Confirm Edit"),"reply"===this.type&&c.a.createElement("button",{onClick:this.replyComment,className:"btn btn-ss-alt btn-sm comment_form__action_btn"},"Reply"),c.a.createElement("button",{onClick:this.cancelFn,className:"btn btn-sm"},"Cancel")))}}])&&ef(o.prototype,r),a&&ef(o,a),t}())||Zp;function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function uf(e,t){return!t||"object"!==sf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mf(e){return(mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pf(e,t){return(pf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ff,df=Object(Ye.a)(rf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uf(this,mf(t).call(this,e))).successFn=n.props.successFn,n.cancelFn=n.props.cancelFn,n.content=n.props.content,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pf(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"comment_action_modal"},c.a.createElement("div",{onClick:this.cancelFn,className:"comment_action_modal__overlay"}),c.a.createElement("div",{className:"comment_action_modal__dialog_wrapper modal-dialog"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("a",{onClick:this.cancelFn,className:"close"},"x")),c.a.createElement("div",{className:"modal-body"},c.a.createElement("p",null,this.content)),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("a",{onClick:this.cancelFn,className:"btn btn-ss-g"},"Cancel"),c.a.createElement("a",{onClick:this.successFn,className:"btn btn-ss-r-alt confirm"},"Confirm")))))}}])&&lf(n.prototype,o),r&&lf(n,r),t}())||rf;function hf(e){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yf(e,t){return!t||"object"!==hf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vf(e){return(vf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _f(e,t){return(_f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gf,wf=Object(Ye.a)(ff=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yf(this,vf(t).call(this,e))).toggleUpvote=function(){void 0===window.app_data.current_user.id?n.store.showSignInModal():n.store.toggleUpvote(n.props.id).catch(function(){return null})},n.toggleFlagged=function(){n.store.toggleFlagged(n.props.id).then(function(){n.toggleConfirmFlag()}).catch(function(){return null})},n.toggleConfirmFlag=function(){n.setState({confirmFlag:!n.state.confirmFlag})},n.toggleConfirmDelete=function(){n.setState({confirmDelete:!n.state.confirmDelete})},n.toggleEditing=function(){n.setState({editing:!n.state.editing})},n.toggleReplying=function(){n.setState({replying:!n.state.replying})},n.deleteComment=function(){n.store.deleteComment(n.props.id).then(function(){n.toggleConfirmDelete()}).catch(function(){return null})},n.store=n.props.store,n.state={editing:!1,replying:!1,confirmFlag:!1,confirmDelete:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_f(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.reply,o=e.body,r=e.flagged,a=e.votes,i=e.user,s=e.createdAtReadable,l=e.flaggable,u=e.authenticated,m=e.commentVisible,p=i.userId,f=i.userImage,d=i.username,h=window.app_data.current_user.id===p,b=this.store.markdownConverter.makeHtml(o);return c.a.createElement("div",{className:"react_comments__comment react_comments__comment--".concat(m?"visible":"hidden")},c.a.createElement("div",{className:"".concat(n?"written-reply":"written-comment")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-11 col-sm-11 col-xs-9",id:"comments-".concat(t)},c.a.createElement("h5",null,c.a.createElement("span",null,c.a.createElement("a",{href:"/".concat(d)},c.a.createElement("img",{className:"comment-author",src:f,alt:d}))),c.a.createElement("a",{className:"comment-author-name",href:"/".concat(d)},d)),c.a.createElement("div",{className:"comment-body"},c.a.createElement("div",{dangerouslySetInnerHTML:{__html:b}}))),c.a.createElement("div",{className:"span col-md-1 col-sm-1 col-xs-3 voting"},c.a.createElement("a",{onClick:this.toggleUpvote,className:"voting-buttons upvote-comment"},c.a.createElement("span",{className:"octicon octicon-triangle-up",style:{fontSize:"22px"}})),c.a.createElement("div",{className:"voting-result"},a))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4"},c.a.createElement("div",{className:"created"},s)),c.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8",style:{padding:"0",float:"right"}},c.a.createElement("div",{style:{float:"right"}},h&&!this.state.editing&&c.a.createElement("a",{onClick:this.toggleEditing,className:"comment-links"},"Edit"),h&&c.a.createElement("a",{onClick:this.toggleConfirmDelete,className:"delete-comment-link comment-links"},"Delete"),l&&c.a.createElement("a",{onClick:this.toggleConfirmFlag,className:"".concat(r?"flagged-comment":""," btn flag-comment-link")},"Flag"),!n&&u&&c.a.createElement("a",{onClick:this.toggleReplying,className:"btn btn-ss-g btn-xs comment-links",style:{color:"grey !important"}},"Reply"))))),this.state.editing&&c.a.createElement(cf,{type:"edit",value:o,commentId:t,parentId:this.props.parentId,cancelFn:this.toggleEditing,successFn:this.toggleEditing,store:this.store}),this.state.replying&&c.a.createElement(cf,{type:"reply",parentId:t,cancelFn:this.toggleReplying,successFn:this.toggleReplying,store:this.store}),this.state.confirmFlag&&c.a.createElement(df,{cancelFn:this.toggleConfirmFlag,successFn:this.toggleFlagged,content:"Are you sure you want to flag this comment?"}),this.state.confirmDelete&&c.a.createElement(df,{cancelFn:this.toggleConfirmDelete,successFn:this.deleteComment,content:"Are you sure you want to delete your comment?"}))}}])&&bf(n.prototype,o),r&&bf(n,r),t}())||ff;function Ef(e){return(Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kf(){return(kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Sf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Of(e,t){return!t||"object"!==Ef(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nf(e){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cf(e,t){return(Cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jf,xf=Object(Ye.a)(gf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Of(this,Nf(t).call(this,e))).scrollToLastComment=function(){document.getElementsByClassName("react_comments__bottom_anchor")[0].scrollIntoView(!1)},n.store=n.props.store,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cf(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.store.comments,n=this.store.isLoading,o=this.store.showCommentVisibilityToggle,r=this.store.showCommentsList,a=this.store.toggleShowCommentsList,i=this.store.defaultVisibleCommentCount,s=this.store.viewMoreCommentsVisible,l=this.store.newCommentFormVisible,u=this.store.toggleShowNewCommentForm,m=this.store.toggleViewMoreCommentsVisible,p=void 0!==window.app_data.current_user.id&&(window.app_data.current_user.moderator||window.app_data.current_user.is_admin),f=void 0!==window.app_data.current_user.id,d=t.length>i;return t=t.map(function(t,n){var o,r=n<i||s;return t.hasOwnProperty("children")&&(o=t.children.map(function(t){return!f&&t.flagged?void 0:c.a.createElement(wf,kf({key:t.id},t,{authenticated:f,commentVisible:r,flaggable:p,reply:!0,store:e.store}))})),!f&&t.flagged?void 0:c.a.createElement("div",{key:"parent-".concat(t.id)},c.a.createElement(wf,kf({key:t.id},t,{authenticated:f,commentVisible:r,flaggable:p,reply:!1,store:e.store})),c.a.createElement("div",{className:"comment-replies"},o))}),c.a.createElement("div",{className:"react_comments__comments_list"},n&&c.a.createElement("img",{style:{display:"block",width:"70px",margin:"30px auto"},src:"https://img.stackshare.io/fe/spinner.svg"}),!n&&o&&t.length>0&&c.a.createElement("a",{className:"btn btn-ss react_comments__comment_visibility_toggle",onClick:a},"Comments (",t.length,")"),!n&&s&&r&&t.length>5&&c.a.createElement("div",{className:"react_comments__scroll_to_bottom__wrapper"},c.a.createElement("button",{onClick:this.scrollToLastComment,className:"btn btn-ss-alt"},"Scroll to Bottom")),r&&t,!n&&!s&&d&&r&&c.a.createElement("div",{className:"react_comments__view_more__wrapper"},c.a.createElement("button",{onClick:m,className:"btn btn-ss"},"View More Comments")),!n&&!l&&(r||0===t.length)&&c.a.createElement("div",{className:"react_comments__add_new_comment"},c.a.createElement("button",{onClick:u,className:"btn btn-ss-alt"},"Add New Comment")),!n&&f&&l&&r&&c.a.createElement(cf,{type:"create",cancelFn:u,successFn:u,store:this.store}),t.length>0&&r&&c.a.createElement("div",{className:"react_comments__bottom_anchor"}))}}])&&Sf(n.prototype,o),r&&Sf(n,r),t}())||gf;function Tf(e){return(Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function If(e,t){return!t||"object"!==Tf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ff(e){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rf(e,t){return(Rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mf,zf,Af,Lf,Df,Uf,$f,Bf,qf,Wf,Vf,Hf,Jf,Gf=Object(Ye.a)(jf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=If(this,Ff(t).call(this,e))).store=new Xp({commentableId:e.commentableId,commentableType:e.commentableType,showCommentVisibilityToggle:e.showCommentVisibilityToggle,showCommentsList:e.showCommentsList}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rf(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"react_comments"},this.store.signInModalVisible&&c.a.createElement(ut.b,{onDismiss:this.store.hideSignInModal,redirect:window.location.href}),c.a.createElement(xf,{store:this.store}))}}])&&Pf(n.prototype,o),r&&Pf(n,r),t}())||jf;function Kf(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Yf(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Zf,Xf=(zf=Yf((Mf=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Kf(this,"isLoading",zf,this),Kf(this,"endOfServices",Af,this),Kf(this,"page",Lf,this),Kf(this,"perPage",Df,this),Kf(this,"currentEndpointIndex",Uf,this),Kf(this,"endpoints",$f,this),Kf(this,"services",Bf,this),Kf(this,"animatePoints",qf,this),Kf(this,"confirmDelete",Wf,this),Kf(this,"showCons",Vf,this),Kf(this,"visibleServiceCards",Hf,this),Kf(this,"trendingImagePath",Jf,this),this.toggleConfirmDelete=function(){n.confirmDelete=!n.confirmDelete},this.scrollEvent=function(){var e=$(window);$(document).height()-e.height()-$(document).height()/10-1e3<e.scrollTop()&&(!1!==n.isLoading||n.endOfServices||(n.loadServices(),trackEvent("pros_and_cons.scroll.loadMoreTools")))},this.setCurrentServiceCard=function(){n.visibleServiceCards=[],$(".service_card").each(function(e,t){var o=$(t).offset().top,r=$(t).offset().top+$(t).outerHeight(),a=$(window).scrollTop()+$(window).height(),i=$(window).scrollTop();if(a>o&&i<r){var c=$(t).attr("id");n.visibleServiceCards.push(c)}})},this.mobileScrollToNextCard=function(){n.setCurrentServiceCard();var e,t;if(1===n.visibleServiceCards.length){var o=n.visibleServiceCards[0];e=(t=$("#".concat(o))).offset().top>$(window).scrollTop()+68+20+10?$(t):$(t).next()}else if(2===n.visibleServiceCards.length){var r=n.visibleServiceCards[1];e=(t=$("#".concat(r))).offset().top>$(window).scrollTop()+68+20+10?$(t):$(t).next()}if(0!==e.length){if(void 0!==e.attr("id")){var a=$(e).attr("id");n.visibleServiceCards=[a];var i=e.offset().top;$("html, body").animate({scrollTop:i-68-20},200),trackEvent("pros_and_cons.click.nextToolMobile")}else $("html, body").animate({scrollTop:$("#reasons_service_card_list--spinner").offset().top-68-20},200),trackEvent("pros_and_cons.click.nextToolMobile")}},this.toggleVote=function(e){var t=!e.user_voted_for,o=e.id,r={vote:t};return new Promise(function(e,t){var a="/api/v1/pros-and-cons/".concat(o,"/toggle_vote");$.post(a,r).done(function(t){var o=n.services.find(function(e){return e.id===t.serviceId})["".concat(t.type,"s")].find(function(e){return e.id===t.id});o.votes=t.votes,o.user_voted_for=t.user_voted_for,e()}).fail(function(e){t(e)})})},this.createReason=function(e,t,o){var r;"pro"===t?r=!1:"con"===t&&(r=!0);var a={reason:{service_id:e.id,text:o,con:r}};return new Promise(function(e,t){$.post("/api/v1/pros-and-cons",a).done(function(t){var o=n.services.find(function(e){return e.id===t.service_id}),r=t.reason;o["".concat(r.type,"s")].push(r),n.points=t.points,e(r)}).fail(function(e){t(e)})})},this.deleteReason=function(e){return new Promise(function(t,o){var r="/api/v1/pros-and-cons/".concat(e);$.ajax({method:"DELETE",url:r}).done(function(e){var o=n.services.find(function(t){return t.id===e.service_id})["".concat(e.type,"s")],r=o.find(function(t){return t.id===e.reason_id});o.remove(r),n.points=e.points,t()}).fail(function(e){o(e)})})},this.loadServices=function(){return new Promise(function(e,t){n.isLoading=!0;var o="/api/v1/pros-and-cons/".concat(n.endpoints[n.currentEndpointIndex],"?page=").concat(n.page,"&per_page=").concat(n.perPage);$.get(o).done(function(t){n.currentEndpointIndex>=n.endpoints.length-1?(n.isLoading=!1,n.endOfServices=!0):t.length<n.perPage?(n.page=1,n.currentEndpointIndex=n.currentEndpointIndex+1,0===t.length&&n.loadServices()):n.page=n.page+1,n.isLoading=!1;var o=!0,r=!1,a=void 0;try{for(var i,c=function(){var e=i.value;void 0===n.services.find(function(t){return t.id===e.id})&&n.services.push(e)},s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0)c()}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}n.isLoading=!1,e()}).fail(function(e){t(e)})})},this.showCons=t.showCons,this.trendingImagePath=t.trending_image_path,void 0===window.app_data.current_user.id?(this.currentEndpointIndex=2,this.points=0):this.points=window.app_data.current_user.popularity,this.loadServices().then(function(){n.setCurrentServiceCard()}).catch(function(){return null}),$(window)[0].addEventListener("scroll",this.scrollEvent)}).prototype,"isLoading",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Af=Yf(Mf.prototype,"endOfServices",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lf=Yf(Mf.prototype,"page",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Df=Yf(Mf.prototype,"perPage",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Uf=Yf(Mf.prototype,"currentEndpointIndex",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$f=Yf(Mf.prototype,"endpoints",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["user_created_pros_not_cons","user_upvoted_pros_not_cons"]}}),Bf=Yf(Mf.prototype,"services",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qf=Yf(Mf.prototype,"animatePoints",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wf=Yf(Mf.prototype,"confirmDelete",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vf=Yf(Mf.prototype,"showCons",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hf=Yf(Mf.prototype,"visibleServiceCards",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jf=Yf(Mf.prototype,"trendingImagePath",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mf);function Qf(e){return(Qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function td(e,t){return!t||"object"!==Qf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nd(e){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function od(e,t){return(od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rd,ad=Object(Ye.a)(Zf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=td(this,nd(t).call(this,e))).store=n.props.store,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&od(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"reasons_header__container"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"reasons_header__details"},c.a.createElement("img",{className:"reasons_header__details__avatar",src:window.app_data.current_user.image_url}),c.a.createElement("div",{className:"reasons_header__details__username"},window.app_data.current_user.username),c.a.createElement("div",{className:"reasons_header__details__points_title"},"Points"),c.a.createElement("div",{className:"reasons_header__details__points_value animated ".concat(this.store.animatePoints?"bounceIn":"")},c.a.createElement("span",null,this.store.points)))))))}}])&&ed(n.prototype,o),r&&ed(n,r),t}())||Zf;function id(e){return(id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cd(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sd(e,t){return!t||"object"!==id(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ud(e,t){return(ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var md,pd=Object(Ye.a)(rd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sd(this,ld(t).call(this,e))).successFn=n.props.successFn,n.cancelFn=n.props.cancelFn,n.content=n.props.content,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ud(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"action_modal"},c.a.createElement("div",{onClick:this.cancelFn,className:"action_modal__overlay"}),c.a.createElement("div",{className:"action_modal__dialog_wrapper modal-dialog"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("a",{onClick:this.cancelFn,className:"close"},"x")),c.a.createElement("div",{className:"modal-body"},c.a.createElement("p",null,this.content)),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("a",{onClick:this.cancelFn,className:"btn btn-ss-g"},"Cancel"),c.a.createElement("a",{onClick:this.successFn,className:"btn btn-ss-r-alt confirm"},"Confirm")))))}}])&&cd(n.prototype,o),r&&cd(n,r),t}())||rd;function fd(e){return(fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dd(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hd(e,t){return!t||"object"!==fd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bd(e){return(bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yd(e,t){return(yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vd,_d=Object(Ye.a)(md=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hd(this,bd(t).call(this,e))).updateCharLimit=function(e,t){var o=55-e.target.value.length,r={};r["".concat(t,"CharCount")]=o,n.setState(r)},n.throttleFiltering=function(e,t){e.persist(),n.updateCharLimit(e,t),n.toggleFiltering(e,t)},n.toggleFiltering=_.debounce(function(e,t){n.filterList(e,t)},250),n.filterList=function(e,t){n.dismissError(t);var o=n.state["".concat(t,"s")].length,r="initial".concat(t.charAt(0).toUpperCase()+t.slice(1),"s"),a=n.state[r],i=(a=a.filter(function(t){return-1!==t.text.toLowerCase().search(e.target.value.toLowerCase())})).length,c={},s={};i!==o&&(c["".concat(t,"sFiltering")]=!0,n.setState(c,function(){setTimeout(function(){s["".concat(t,"s")]=a,s["".concat(t,"sFiltering")]=!1,n.setState(s)},250)}))},n.createReason=function(e,t){e.preventDefault();var o=n.props.service,r=n.refs["".concat(t,"-input")].value;if(""===r){var a=n.state;a["".concat(t,"Error")]=!0,a["".concat(t,"ErrorMsg")]="Enter some text!",n.setState(a)}else{var i={};i["".concat(t,"Submitting")]=!0,n.setState(i),n.store.createReason(o,t,r).then(function(e){i["".concat(t,"Submitting")]=!1,n.setState(i),n.refs["".concat(t,"-input")].value="";var r={};r["".concat(t,"CharCount")]=55,n.setState(r);var a="initial".concat(t.charAt(0).toUpperCase()+t.slice(1),"s"),c=n.state[a],s={};s["".concat(t,"s")]=c,n.setState(s);var l=document.getElementById("service-".concat(o.id,"-").concat(e.type,"-").concat(e.id)).offsetTop;document.getElementById("service-".concat(o.id,"-").concat(e.type,"-list")).scrollTop=l,n.store.animatePoints=!0,setTimeout(function(){n.store.animatePoints=!1},750)}).catch(function(e){if(i["".concat(t,"Submitting")]=!1,n.setState(i),"duplicate"===e.responseJSON.error_msg){var o=n.state;o["".concat(t,"Error")]=!0,o["".concat(t,"ErrorMsg")]="This ".concat(t," already exists. Got anything else?"),n.setState(o)}})}},n.scrollToNextCard=function(){var e=n.props.service,t=$("#service-".concat(e.id)).next();if(0!==t.length){var o=t.offset().top;$("html, body").animate({scrollTop:o-68-20},200),trackEvent("pros_and_cons.click.nextTool",{currentTool:e.name})}},n.toggleConfirmDelete=function(e){n.setState({confirmDelete:!n.state.confirmDelete,reasonIdToDelete:e})},n.deleteReason=function(){n.store.deleteReason(n.state.reasonIdToDelete).then(function(){n.toggleConfirmDelete(),n.store.animatePoints=!0,setTimeout(function(){n.store.animatePoints=!1},750)}).catch(function(){return null})},n.showTooltip=function(e){n.setState({tooltipVisible:!0});var t=e.target,o=$(t).next().clone(),r="#service-".concat(n.service.id,"-tooltip");$(r).html(o);var a=$(t).offset(),i=$(t).width(),c=68;$(".alert").is(":visible")&&(c+=parseInt($(".alert").css("height")));var s=parseInt($(".reasons_service_card_list").css("margin-left")),l=a.top-c-68-20,u=a.left-s+i+15;$(r).css({position:"absolute",left:"".concat(u,"px"),top:"".concat(l,"px")}),$(r).find(".reasons_service_card__tooltip__content").css("display","block")},n.hideTooltip=function(){n.setState({tooltipVisible:!1})},n.store=n.props.store,n.service=n.props.service,n.state={initialPros:n.service.pros,initialCons:n.service.cons,pros:[],cons:[],proError:!1,conError:!1,proErrorMsg:"",conErrorMsg:"",confirmDelete:!1,reasonIdToDelete:null,tooltipVisible:!1,tooltipImage:"",tooltipUsername:"",proSubmitting:!1,conSubmitting:!1,prosFiltering:!1,consFiltering:!1,proCharCount:55,conCharCount:55},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yd(e,t)}(t,i["Component"]),n=t,(o=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({pros:this.state.initialPros,cons:this.state.initialCons})}},{key:"toggleVote",value:function(e){this.store.toggleVote(e).then(function(){}).catch(function(){return null})}},{key:"dismissError",value:function(e){var t=this.state;t["".concat(e,"Error")]=!1,this.setState(t)}},{key:"render",value:function(){var e=this,t=this.props.service,n=this.state.pros.map(function(n){return c.a.createElement("li",{id:"service-".concat(t.id,"-pro-").concat(n.id),className:"service_card__body__reason",key:"reason-".concat(n.id)},c.a.createElement("div",{className:"service_card__body__reason__votes_container service_card__body__reason__votes_container--".concat(n.user_voted_for?"user_voted_for":""),onClick:function(){return e.toggleVote(n)}},c.a.createElement("div",{className:"service_card__body__reason__votes_arrow"}),c.a.createElement("div",{className:"service_card__body__reason__votes_count"},n.votes)),c.a.createElement("div",{className:"service_card__body__reason__description"},c.a.createElement("span",{onMouseEnter:function(t){return e.showTooltip(t,n)},onMouseLeave:e.hideTooltip},n.text),c.a.createElement("div",{className:"reasons_service_card__tooltip__content"},c.a.createElement("div",{className:"reasons_service_card__tooltip__submitted_by"},"Submitted By"),c.a.createElement("div",{className:"reasons_service_card__tooltip__inner_content"},c.a.createElement("img",{className:"reasons_service_card__tooltip__avatar",src:n.user_avatar}),c.a.createElement("div",{className:"reasons_service_card__tooltip__username"},n.username)),c.a.createElement("div",{className:"reasons_service_card__tooltip__triangle"}))),window.app_data.current_user.id===n.user_id&&n.votes<=1&&c.a.createElement("a",{className:"service_card__body__reason__delete",onClick:function(){return e.toggleConfirmDelete(n.id)}},"Delete"))}),o=this.state.cons.map(function(n){return c.a.createElement("li",{id:"service-".concat(t.id,"-con-").concat(n.id),className:"service_card__body__reason",key:"reason-".concat(n.id)},c.a.createElement("div",{className:"service_card__body__reason__votes_container service_card__body__reason__votes_container--".concat(n.user_voted_for?"user_voted_for":""),onClick:function(){return e.toggleVote(n)}},c.a.createElement("div",{className:"service_card__body__reason__votes_arrow"}),c.a.createElement("div",{className:"service_card__body__reason__votes_count"},n.votes)),c.a.createElement("div",{className:"service_card__body__reason__description"},c.a.createElement("span",{onMouseEnter:function(t){return e.showTooltip(t,n)},onMouseLeave:e.hideTooltip},n.text),c.a.createElement("div",{className:"reasons_service_card__tooltip__content"},c.a.createElement("div",{className:"reasons_service_card__tooltip__submitted_by"},"Submitted By"),c.a.createElement("div",{className:"reasons_service_card__tooltip__inner_content"},c.a.createElement("img",{className:"reasons_service_card__tooltip__avatar",src:n.user_avatar}),c.a.createElement("div",{className:"reasons_service_card__tooltip__username"},n.username)),c.a.createElement("div",{className:"reasons_service_card__tooltip__triangle"}))),window.app_data.current_user.id===n.user_id&&n.votes<=1&&c.a.createElement("a",{className:"service_card__body__reason__delete",onClick:function(){return e.toggleConfirmDelete(n.id)}},"Delete"))});return c.a.createElement("div",{id:"service-".concat(t.id),className:"service_card"},c.a.createElement("div",{className:"service_card__header row"},c.a.createElement("div",{className:"service_card__header__container col-md-12"},c.a.createElement("img",{className:"service_card__header__logo",src:t.image_url}),c.a.createElement("div",{className:"service_card__header__details"},c.a.createElement("a",{className:"service_card__header__name",href:t.canonical_url},t.name),c.a.createElement("div",{className:"service_card__header__title"},t.title)),c.a.createElement("div",{className:"service_card__header__next_tool_link btn-ss",onClick:this.scrollToNextCard},c.a.createElement("div",{className:"service_card__header__next_tool_link_text"},"Next Tool"),c.a.createElement("div",{className:"service_card__header__next_tool_link_icon"},c.a.createElement("span",{className:"octicon octicon-chevron-down"}))))),c.a.createElement("div",{className:"service_card__body row"},c.a.createElement("div",{className:"service_card__body__column ".concat(this.store.showCons?"col-lg-6 col-md-6 col-sm-6":"col-lg-12 col-md-12 col-sm-12")},c.a.createElement("div",{className:"service_card__body__column_header"},"Pros"," ",c.a.createElement("span",{className:"service_card__body__column_header_description"}," ","Why do you enjoy using ",t.name,"?")),c.a.createElement("div",{className:"service_card__body__column_divider"}),c.a.createElement("div",{className:"service_card__body__column_body"},this.state.pros.length>0&&!this.state.prosFiltering&&c.a.createElement("ul",{id:"service-".concat(t.id,"-pro-list"),className:"service_card__body__reasons_list service_card__body__reasons_list--pros"},n),this.state.pros.length>0&&this.state.prosFiltering&&c.a.createElement("div",{className:"service_card__body__empty_list"},c.a.createElement("img",{className:"service_card__body__filtering",src:"https://img.stackshare.io/fe/spinner.svg"})),0===this.state.initialPros.length&&c.a.createElement("div",{className:"service_card__body__empty_list"},c.a.createElement("span",null,"First! 🏆")),0===this.state.pros.length&&0!==this.state.initialPros.length&&c.a.createElement("div",{className:"service_card__body__empty_list"})),c.a.createElement("div",{className:"service_card__footer service_card__footer--pro"},c.a.createElement("div",{className:"service_card__footer__column_divider"}),c.a.createElement("form",{className:"service_card__footer__form",onSubmit:function(t){return e.createReason(t,"pro")}},c.a.createElement("div",{className:"service_card__footer__error_wrapper service_card__footer__error_wrapper--".concat(this.state.proError?"visible":"hidden")},c.a.createElement("div",{className:"service_card__footer__error_box"},c.a.createElement("i",{className:"service_card__footer__error_close octicon octicon-x",onClick:function(){return e.dismissError("pro")}}),this.state.proErrorMsg),c.a.createElement("div",{className:"service_card__footer__error_triangle"})),c.a.createElement("input",{ref:"pro-input",maxLength:"55",className:"service_card__footer__input ".concat(this.store.showCons?"col-lg-8 col-md-8 col-sm-8 col-xs-7":"col-lg-10 col-md-10 col-sm-10 col-xs-10"),type:"text",onChange:function(t){return e.throttleFiltering(t,"pro")}}),c.a.createElement("div",{className:"service_card__footer__char_limit"},this.state.proCharCount),c.a.createElement("button",{disabled:this.state.proSubmitting,className:"service_card__footer__btn btn btn-ss-alt col-lg-2 col-md-2 col-sm-2 col-xs-2",type:"submit"},"Submit")))),this.store.showCons&&c.a.createElement("div",{className:"service_card__body__column col-lg-6 col-md-6 col-sm-6"},c.a.createElement("div",{className:"service_card__body__column_header"},"Cons"," ",c.a.createElement("span",{className:"service_card__body__column_header_description"}," ","What are the downsides of using ",t.name,"?")),c.a.createElement("div",{className:"service_card__body__column_divider"}),c.a.createElement("div",{className:"service_card__body__column_body"},this.state.cons.length>0&&!this.state.consFiltering&&c.a.createElement("ul",{id:"service-".concat(t.id,"-con-list"),className:"service_card__body__reasons_list service_card__body__reasons_list--cons"},o),this.state.cons.length>0&&this.state.consFiltering&&c.a.createElement("div",{className:"service_card__body__empty_list"},c.a.createElement("img",{className:"service_card__body__filtering",src:"https://img.stackshare.io/fe/spinner.svg"})),0===this.state.initialCons.length&&c.a.createElement("div",{className:"service_card__body__empty_list"},c.a.createElement("span",null,"First! 🏆")),0===this.state.cons.length&&0!==this.state.initialCons.length&&c.a.createElement("div",{className:"service_card__body__empty_list"})),c.a.createElement("div",{className:"service_card__footer service_card__footer--con"},c.a.createElement("div",{className:"service_card__footer__column_divider"}),c.a.createElement("form",{className:"service_card__footer__form",onSubmit:function(t){return e.createReason(t,"con")}},c.a.createElement("div",{className:"service_card__footer__error_wrapper service_card__footer__error_wrapper--".concat(this.state.conError?"visible":"hidden")},c.a.createElement("div",{className:"service_card__footer__error_box"},c.a.createElement("i",{className:"service_card__footer__error_close octicon octicon-x",onClick:function(){return e.dismissError("con")}}),this.state.conErrorMsg),c.a.createElement("div",{className:"service_card__footer__error_triangle"})),c.a.createElement("input",{ref:"con-input",maxLength:"55",className:"service_card__footer__input col-lg-8 col-md-8 col-sm-8 col-xs-7",type:"text",onChange:function(t){return e.throttleFiltering(t,"con")}}),c.a.createElement("div",{className:"service_card__footer__char_limit"},this.state.conCharCount),c.a.createElement("button",{disabled:this.state.conSubmitting,className:"service_card__footer__btn btn btn-ss-alt col-lg-2 col-md-2 col-sm-2 col-xs-2",type:"submit"},"Submit"))))),this.state.confirmDelete&&c.a.createElement(pd,{cancelFn:function(){return e.toggleConfirmDelete(null)},successFn:this.deleteReason,content:"Are you sure you want to delete this?"}),c.a.createElement("div",{id:"service-".concat(t.id,"-tooltip"),className:"reasons_service_card__tooltip reasons_service_card__tooltip--".concat(this.state.tooltipVisible?"visible":"hidden")}))}}])&&dd(n.prototype,o),r&&dd(n,r),t}())||md;function gd(e){return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wd(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ed(e,t){return!t||"object"!==gd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kd(e){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sd(e,t){return(Sd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Od,Nd=Object(Ye.a)(vd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ed(this,kd(t).call(this,e))).store=n.props.store,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sd(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.store.services.map(function(t){return c.a.createElement(_d,{service:t,store:e.store,key:"service-".concat(t.id)})});return c.a.createElement("div",{className:"reasons_service_card_list container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"reasons_service_card_list__explainer__wrapper"},c.a.createElement("div",{className:"reasons_service_card_list__explainer__title"},"Pros & Cons"),c.a.createElement("img",{src:this.store.trendingImagePath,className:"reasons_service_card_list__explainer__illustration"}),c.a.createElement("div",{className:"reasons_service_card_list__explainer__body"},"Help other developers pick the right tools for the job, and ",c.a.createElement("b",null,"earn points")," while doing it")))),t,c.a.createElement("div",{className:"reasons_service_card_list__mobile_next_tool_link",onClick:this.store.mobileScrollToNextCard},c.a.createElement("div",{className:"reasons_service_card_list__mobile_next_tool_link__icon"},c.a.createElement("span",{className:"octicon octicon-chevron-down"}))))}}])&&wd(n.prototype,o),r&&wd(n,r),t}())||vd;function Cd(e){return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jd(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xd(e,t){return!t||"object"!==Cd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pd(e,t){return(Pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Id,Fd,Rd,Md,zd,Ad,Ld,Dd,Ud,$d,Bd,qd,Wd,Vd,Hd,Jd,Gd,Kd,Yd,Zd,Xd,Qd,eh,th,nh,oh,rh,ah,ih,ch,sh,lh=Object(Ye.a)(Od=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xd(this,Td(t).call(this,e))).store=new Xf(e),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pd(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(ad,{store:this.store}),c.a.createElement(Nd,{store:this.store}),this.store.isLoading&&c.a.createElement("img",{id:"reasons_service_card_list--spinner",style:{display:"block",width:"70px",margin:"30px auto"},src:"https://img.stackshare.io/fe/spinner.svg"}),this.store.endOfServices&&c.a.createElement("div",{className:"reasons_service_card_list__explainer__body reasons_service_card_list__explainer__body--footer"},c.a.createElement("span",null,"Good work!")," Those are all the tools you're a fan of."))}}])&&jd(n.prototype,o),r&&jd(n,r),t}())||Od;function uh(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function mh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ph(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var fh,dh,hh=(Fd=ph((Id=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uh(this,"notifications",Fd,this),uh(this,"stepsCompleted",Rd,this),uh(this,"currentStep",Md,this),uh(this,"ajaxInProgress",zd,this),uh(this,"userImg",Ad,this),uh(this,"firstName",Ld,this),uh(this,"lastName",Dd,this),uh(this,"companyName",Ud,this),uh(this,"jobTitle",$d,this),uh(this,"weeklyDigestSubscribed",Bd,this),uh(this,"emailFeedWeekly",qd,this),uh(this,"companySuggestions",Wd,this),uh(this,"isCompaniesRequestLoading",Vd,this),uh(this,"services",Hd,this),uh(this,"selectedTools",Jd,this),uh(this,"savingState",Gd,this),this.setupExperiment=function(){n.stepOrder=["welcome","basic-information","build-your-stack"]},this.setupNavigation=function(){n.goToStepSlug(n.getSlugFromLocation(window.location)),n.unlistenToHistory=ve.e.listen(function(e){"POP"===e.action&&n.setCurrentStep(n.getSlugFromLocation(e))})},this.rescue=function(e){n.ajaxInProgress=!1,n.showNotification({type:"error",message:e.data.message||"An error occurred while saving your stack."})},this.populateToolsFromServices=function(){n.services.forEach(function(e){n.addSelectedTool(e,"github")})},this.setupTools=function(){n.stackId=null,get("/api/v1/stacks/name_is_available_with_id?owner=personal&name=My%20Stack",{headers:{"Cache-Control":"no-cache"}}).then(function(e){200===e.status?e.data.available?n.populateToolsFromServices():(n.stackId=e.data.stack_id,get("/api/v1/stacks/show?stack[id]=".concat(n.stackId,"&stack[owner][type]=User")).then(function(e){200===e.status?(n.services=e.data.services,n.populateToolsFromServices()):n.rescue(e)})):n.rescue(e)})},uh(this,"loadSuggestions",Kd,this),uh(this,"clearCompanySuggestions",Yd,this),this.addSelectedTool=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search_box";_.find(n.selectedTools,{id:e.id})||(n.selectedTools.push(e),trackEvent("onboarding.added_tool",{source:t,tool:e})),n.checkOverflowed()},this.removeSelectedTool=function(e){var t=n.selectedTools.findIndex(function(t){return t.id===e.id});-1!==t&&(n.selectedTools.splice(t,1),trackEvent("onboarding.removed_tool",{tool:e})),n.checkOverflowed()},uh(this,"clearSelectedTools",Zd,this),this.createStack=function(e){n.ajaxInProgress=!0,post("/api/v1/stacks/create",{body:{onboarding:!0,stack:{name:"My Stack",services:e,owner:{type:"User",id:n.userId}}}}).then(function(e){200===e.status?n.unmount():n.rescue(e)})},this.updateStack=function(e,t){n.ajaxInProgress=!0,post("/api/v1/stacks/update",{body:{stack:{id:e,services:t,owner:{type:"User",id:n.userId}}}}).then(function(e){200===e.status?n.unmount():n.rescue(e)})},uh(this,"saveSelectedTools",Xd,this),uh(this,"toggleFeedDigest",Qd,this),uh(this,"submitFeedDigest",eh,this),this.checkOverflowed=function(){$(".builder-wrap__slider-wrap").innerWidth()<$(".builder-wrap__builder").outerWidth()?$(".builder-wrap__slider-wrap").addClass("overflowed"):$(".builder-wrap__slider-wrap").removeClass("overflowed")},this.allowedSourcesMap={github:"showGithub",hacker_news:"showHackerNews",reddit:"showReddit",lobsters:"showLobsters",rss:"showRSS"},this.saveNewsStack=function(){var e=n.selectedTools.map(function(e){return e.id});"Saving..."!==n.savingState&&(n.savingState="Saving...",post("/api/v1/news/follow_services",{body:{service_ids:e}}).then(function(){n.savingState="Save"}))},uh(this,"showNotification",th,this),uh(this,"clearNotifications",nh,this),uh(this,"getSlugFromLocation",oh,this),uh(this,"setCurrentStep",rh,this),uh(this,"goToStepSlug",ah,this),uh(this,"goToNextStep",ih,this),uh(this,"goToStepNumber",ch,this),uh(this,"unmount",sh,this);var o=t.user_info,r=t.redirect,a=t.oauth,i=t.tracking,c=t.image_assets;this.icons=c,this.redirectPath=r,this.tracking=i,this.userId=o.userId,this.userImg=o.userImg||"",this.firstName=o.firstName||"",this.lastName=o.lastName||"",this.companyName=o.companyName||"",this.jobTitle=o.jobTitle||"",this.services=o.services,this.oauth=a,this.steps=[{slug:"welcome"},{slug:"build-your-stack",iconPath:this.icons.onboardingWrenchIconPath,sidebarTitle:"Tools in your stack",sidebarText:"Tools you use, are familiar with, or want to keep up with. You can always edit this later on."},{slug:"basic-information",iconPath:this.icons.onboardingBasicInformationIconPath,sidebarTitle:"Personal Info",sidebarText:"Fill out the information on the left. You can always edit the data under settings in your profile."},{slug:"areas-of-interest",iconPath:this.icons.magnifierIconPath,sidebarTitle:"Interests",sidebarText:"Let us know what you're interested in. We'll use this information to customize your StackShare experience."}],this.setupExperiment(),this.setupNavigation(),this.setupTools()}var t,n,o;return t=e,(n=[{key:"selectedToolsLength",get:function(){return this.selectedTools.length}},{key:"hasNotification",get:function(){return this.notifications.size>0}},{key:"hasError",get:function(){return this.hasNotification&&"error"===this.notifications.get("type")}}])&&mh(t.prototype,n),o&&mh(t,o),e}()).prototype,"notifications",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Rd=ph(Id.prototype,"stepsCompleted",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Md=ph(Id.prototype,"currentStep",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),zd=ph(Id.prototype,"ajaxInProgress",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ad=ph(Id.prototype,"userImg",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ld=ph(Id.prototype,"firstName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Dd=ph(Id.prototype,"lastName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ud=ph(Id.prototype,"companyName",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$d=ph(Id.prototype,"jobTitle",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bd=ph(Id.prototype,"weeklyDigestSubscribed",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qd=ph(Id.prototype,"emailFeedWeekly",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wd=ph(Id.prototype,"companySuggestions",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Vd=ph(Id.prototype,"isCompaniesRequestLoading",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hd=ph(Id.prototype,"services",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jd=ph(Id.prototype,"selectedTools",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gd=ph(Id.prototype,"savingState",[_e.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Save"}}),Kd=ph(Id.prototype,"loadSuggestions",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isCompaniesRequestLoading=!0,get("/api/v1/companies/search?q=".concat(t)).then(function(t){e.isCompaniesRequestLoading=!1,e.companySuggestions=t.data})}}}),Yd=ph(Id.prototype,"clearCompanySuggestions",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.companySuggestions=[]}}}),ph(Id.prototype,"selectedToolsLength",[_e.d],Object.getOwnPropertyDescriptor(Id.prototype,"selectedToolsLength"),Id.prototype),Zd=ph(Id.prototype,"clearSelectedTools",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.selectedTools=[],trackEvent("onboarding.clicked_clear_tools",{})}}}),Xd=ph(Id.prototype,"saveSelectedTools",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.selectedTools.map(function(e){return e.id});e.stackId?e.updateStack(e.stackId,t):e.createStack(t)}}}),Qd=ph(Id.prototype,"toggleFeedDigest",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.emailFeedWeekly=!e.emailFeedWeekly}}}),eh=ph(Id.prototype,"submitFeedDigest",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(!e.ajaxInProgress)return e.ajaxInProgress=!0,e.clearNotifications(),new Promise(function(t,n){post("/api/v1/onboarding/toggle_email_feed_weekly",{body:{user:{email_feed_weekly:e.emailFeedWeekly}}}).then(function(o){e.ajaxInProgress=!1,200===o.status?(trackEvent("onboarding.click_toggle_feed_digest",{emailFeedWeekly:e.emailFeedWeekly}),t()):(e.showNotification({type:"serverError",message:o.data.errors}),n())})})}}}),th=ph(Id.prototype,"showNotification",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t.type,o=t.message,r=t.icon;n&&o&&e.notifications.set("type",n).set("message",o).set("icon",r)}}}),nh=ph(Id.prototype,"clearNotifications",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.notifications.clear()}}}),ph(Id.prototype,"hasNotification",[_e.d],Object.getOwnPropertyDescriptor(Id.prototype,"hasNotification"),Id.prototype),ph(Id.prototype,"hasError",[_e.d],Object.getOwnPropertyDescriptor(Id.prototype,"hasError"),Id.prototype),oh=ph(Id.prototype,"getSlugFromLocation",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){return _.last(e.pathname.split("/"))}}}),rh=ph(Id.prototype,"setCurrentStep",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=_.find(e.steps,{slug:t});return n&&(e.currentStep=n),n}}}),ah=ph(Id.prototype,"goToStepSlug",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(!e.setCurrentStep(t))throw"".concat(t," is not a valid step to navigate to.");ve.e.push("/onboarding/".concat(t))}}}),ih=ph(Id.prototype,"goToNextStep",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.currentStep.slug,n=e.stepOrder.findIndex(function(e){return e===t})+1;e.goToStepNumber(n)}}}),ch=ph(Id.prototype,"goToStepNumber",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(t){var n=e.stepOrder[t];e.goToStepSlug(n)}else e.unmount()}}}),sh=ph(Id.prototype,"unmount",[_e.c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.clearNotifications(),e.unlistenToHistory(),window.location=e.redirectPath}}}),Id),bh={get instance(){return fh},set instance(e){fh=new hh(e)}},yh=n("/home/circleci/frontend/node_modules/classnames/index.js"),vh=n.n(yh);function _h(e){return(_h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wh(e,t){return!t||"object"!==_h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eh(e){return(Eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kh(e,t){return(kh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sh,Oh=Object(Ye.a)(dh=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wh(this,Eh(t).call(this,e)))._renderStepButton=function(e,t){var n=vh()("onboarding-wizard__step-picker__step-button",{completed:bh.instance.stepsCompleted.includes(e)});return c.a.createElement(ve.a,{onClick:function(e){e.preventDefault()},key:"step-picker-".concat(e),className:n,activeClassName:"active",to:"/onboarding/".concat(e)},t+1)},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kh(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"onboarding-wizard__step-picker"},c.a.createElement("span",{className:"hidden"},bh.instance.currentStep.slug),bh.instance.steps.map(function(t,n){return e._renderStepButton(t.slug,n)}))}}])&&gh(n.prototype,o),r&&gh(n,r),t}())||dh;function Nh(e){return(Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ch(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jh(e,t){return!t||"object"!==Nh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xh(e){return(xh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Th(e,t){return(Th=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ph,Ih,Fh,Rh=Object(Ye.a)(Sh=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jh(this,xh(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Th(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.iconPath,n=e.sidebarTitle,o=e.sidebarText;return c.a.createElement("div",{className:"onboarding-wizard-layout-container__sidebar-wrap"},c.a.createElement("img",{className:"onboarding-wizard-layout-container__sidebar-icon",src:t}),c.a.createElement("h2",{className:"onboarding-wizard-layout-container__sidebar-title"},n),c.a.createElement("p",{className:"onboarding-wizard-layout-container__sidebar-text"},o))}}])&&Ch(n.prototype,o),r&&Ch(n,r),t}())||Sh;function Mh(e){return(Mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ah(e,t){return!t||"object"!==Mh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dh(e,t){return(Dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uh,$h=Object(Ye.a)((Fh=Ih=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ah(this,Lh(t).call(this,e)))._renderMobileStepPicker=function(){return c.a.createElement("div",{className:"visible-xs"},c.a.createElement(Oh,null))},n._renderDesktopStepPicker=function(){return c.a.createElement("div",{className:"hidden-xs"},c.a.createElement(Oh,null))},n._renderMobileSidebar=function(){return c.a.createElement("p",null,"Sidebar here!")},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dh(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){var e=bh.instance.notifications;return c.a.createElement("div",null,bh.instance.hasNotification&&c.a.createElement(np,{type:e.get("type"),message:e.get("message"),icon:e.get("icon"),dismiss:bh.instance.clearNotifications.bind(bh.instance)}),c.a.createElement("div",{className:"onboarding-wizard-layout-container"},c.a.createElement("div",{className:"onboarding-wizard-layout-container__content"},this._renderMobileStepPicker(),this.props.children),c.a.createElement("div",{className:"onboarding-wizard-layout-container__sidebar visible-lg"},this._renderDesktopStepPicker(),c.a.createElement("div",{className:"onboarding-wizard__step-separator hidden-xs"}),c.a.createElement(Rh,{iconPath:bh.instance.currentStep.iconPath,sidebarTitle:bh.instance.currentStep.sidebarTitle,sidebarText:bh.instance.currentStep.sidebarText}))))}}])&&zh(n.prototype,o),r&&zh(n,r),t}(),Ih.propTypes={children:ye.a.element},Ph=Fh))||Ph;function Bh(e){return(Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wh(e,t){return!t||"object"!==Bh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vh(e){return(Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hh(e,t){return(Hh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jh=Object(Ye.a)(Uh=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wh(this,Vh(t).call(this,e))).continueButtonClassName=function(){return n.props.disableButton?"".concat("btn btn-ss-alt btn-action"," ").concat("disabled"):"btn btn-ss-alt btn-action"},n.renderAltLink=function(){return c.a.createElement("span",{className:"span-link link-action",onClick:n.props.onAltLinkClick},n.props.altLink)},n.renderContinueButton=function(){return c.a.createElement("button",{className:n.continueButtonClassName(),disabled:n.props.disableButton||n.props.ajaxInProgress,onClick:n.props.onContinueClick},n.props.ajaxInProgress&&c.a.createElement("img",{className:"button-spinner",src:"//img.stackshare.io/fe/spinner.svg"}),!n.props.ajaxInProgress&&n.props.continueText)},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hh(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{className:"onboarding-wizard__footer-bar"},c.a.createElement("div",{className:"btn-action-wrap ".concat(this.props.centerContent&&"btn-action-wrap--center")},this.props.altLink&&this.renderAltLink(),this.renderContinueButton()))}}])&&qh(n.prototype,o),r&&qh(n,r),t}())||Uh;Jh.propTypes={onContinueClick:ye.a.func.isRequired,continueText:ye.a.string,disableButton:ye.a.bool,ajaxInProgress:ye.a.bool,altLink:ye.a.string,onAltLinkClick:ye.a.func},Jh.defaultProps={continueText:"Continue"};var Gh=Jh;function Kh(e){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zh(e,t){return!t||"object"!==Kh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xh(e){return(Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qh(e,t){return(Qh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zh(this,Xh(t).call(this,e))).handleButtonClick=function(){trackEvent("onboarding.clicked_create_stack",{}),bh.instance.goToNextStep()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qh(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=bh.instance.tracking,t=e.page_name,n=e.page_properties,o=e.path,r=e.referrer,a=e.url;trackEvent("Viewed onboarding.intro Page",{contentGroupAuthenticationStatus:n.contentGroupAuthenticationStatus,contentGroupPage:n.contentGroupPage,name:t,path:o,referrer:r,url:a,title:document.title})}},{key:"render",value:function(){return c.a.createElement("div",{className:"onboarding_wizard--welcome"},c.a.createElement("div",{className:"onboarding_wizard--welcome__content"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row onboarding-wizard__header"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h1",{className:"heading"},"Welcome To StackShare"),c.a.createElement("p",{className:"subtext"},"Why share your stack?")))),c.a.createElement("div",{className:"graphic-wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row content-wrapper"},c.a.createElement("div",{className:"col-md-4 col-sm-4 item"},c.a.createElement("img",{src:bh.instance.icons.resumeIconPath}),c.a.createElement("h2",null,c.a.createElement("b",null,"Use your stack profile as your tech resume")),c.a.createElement("p",null,"Easily list out the technologies you know and share the link on your resume and personal site")),c.a.createElement("div",{className:"col-md-4 col-sm-4 item"},c.a.createElement("img",{src:bh.instance.icons.bullhornIconPath}),c.a.createElement("h2",null,c.a.createElement("b",null,"Stay up to date with your favorite tools")),c.a.createElement("p",null,"Get a curated feed and alerts for all the latest updates for the technology you care about")),c.a.createElement("div",{className:"col-md-4 col-sm-4 item"},c.a.createElement("img",{src:bh.instance.icons.communityIconPath}),c.a.createElement("h2",null,c.a.createElement("b",null,"Share & contribute to the community")),c.a.createElement("p",null,"Help other engineers pick the right tools and learn from your experience")))))),c.a.createElement(Gh,{onContinueClick:this.handleButtonClick,centerContent:!0}))}}])&&Yh(n.prototype,o),r&&Yh(n,r),t}();function tb(e){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ob(e,t){return!t||"object"!==tb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rb(e){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ab(e,t){return(ab=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ib=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ob(this,rb(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ab(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("p",null,"tools voting")}}])&&nb(n.prototype,o),r&&nb(n,r),t}(),cb=n("/home/circleci/frontend/node_modules/react-autosuggest/dist/index.js"),sb=n.n(cb),lb=n("/home/circleci/frontend/node_modules/glamorous/dist/glamorous.esm.js");function ub(e){return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pb(e,t){return!t||"object"!==ub(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fb(e){return(fb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function db(e,t){return(db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hb=function(e){return c.a.createElement("svg",e,c.a.createElement("path",{fill:"none",className:"bk",d:"M0 0h100v100H0z"}),c.a.createElement("circle",{cx:"50",cy:"50",r:"40",stroke:"#f1f1f1",fill:"none",strokeWidth:"10",strokeLinecap:"round"}),c.a.createElement("circle",{cx:"50",cy:"50",r:"40",stroke:"#0690fa",fill:"none",strokeWidth:"6",strokeLinecap:"round"},c.a.createElement("animate",{attributeName:"stroke-dashoffset",dur:"2s",repeatCount:"indefinite",from:"0",to:"502"}),c.a.createElement("animate",{attributeName:"stroke-dasharray",dur:"2s",repeatCount:"indefinite",values:"125.5 125.5;1 250;125.5 125.5"})))};hb.defaultProps={width:"120",height:"120",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"uil-ring-alt"};var bb,yb=lb.a.div({position:"relative"}),vb=lb.a.div({position:"absolute",right:12,top:14,zIndex:1}),_b=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=pb(this,(e=fb(t)).call.apply(e,[this].concat(r)))).state={value:n.props.initialValue||""},n.lastRequestId=null,n.onChange=function(e,t){var o=t.newValue;n.setState({value:o}),n.props.onChange&&n.props.onChange(o)},n.onSuggestionsFetchRequested=function(e){var t=e.value;n.loadSuggestions(t)},n.onSuggestionsClearRequested=function(){n.props.clearSuggestions()},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&db(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){clearTimeout(this.lastRequestId)}},{key:"loadSuggestions",value:function(e){var t=this;null!==this.lastRequestId&&clearTimeout(this.lastRequestId),""!==e?this.lastRequestId=setTimeout(function(){t.props.loadSuggestions(e)},1e3):this.onSuggestionsClearRequested()}},{key:"getSuggestionValue",value:function(e){return e}},{key:"renderSuggestion",value:function(e){return c.a.createElement("span",null,e)}},{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.className,o=t.name,r=t.maxLength,a=t.placeholder,i=t.suggestions,s=t.isLoading,l={className:n,name:o,maxLength:r,placeholder:a,value:e,onChange:this.onChange},u=Object(_e.g)(i)?i.toJS():i;return c.a.createElement(yb,null,c.a.createElement(vb,null,s&&c.a.createElement(hb,{className:"button-spinner"})),c.a.createElement(sb.a,{suggestions:u,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:l}))}}])&&mb(n.prototype,o),r&&mb(n,r),t}();function gb(e){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Eb(e,t){return!t||"object"!==gb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kb(e){return(kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sb(e,t){return(Sb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_b.defaultProps={placeholder:"Type to load suggestions",maxLength:60},_b.propTypes={suggestions:ye.a.oneOfType([ye.a.object,ye.a.array]),loadSuggestions:ye.a.func.isRequired,clearSuggestions:ye.a.func.isRequired,isLoading:ye.a.bool.isRequired,className:ye.a.string,name:ye.a.string,initialValue:ye.a.string,placeholder:ye.a.string,maxLength:ye.a.number,onChange:ye.a.func};var Ob,Nb=Object(Ye.a)(bb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Eb(this,kb(t).call(this,e))).handleContinueClick=function(){var e=bh.instance,t=e.firstName,n=e.lastName,o=e.companyName,r=e.jobTitle,a=e.userImg,i=e.weeklyDigestSubscribed,c={user:{first_name:t,last_name:n,company_name:o,title:r,picture:a,weekly_digest_subscribed:i}};bh.instance.ajaxInProgress=!0,bh.instance.clearNotifications(),post("/api/v1/onboarding/submit_basic_information",{body:c}).then(function(e){200===e.status?(trackEvent("onboarding.click_continue_basic_info",{firstName:t,lastName:n,companyName:o,jobTitle:r,weeklyDigestSubscribed:i}),bh.instance.ajaxInProgress=!1,bh.instance.goToNextStep()):(bh.instance.showNotification({type:"serverError",message:e.data.errors}),bh.instance.ajaxInProgress=!1)})},n.handleSkip=function(){bh.instance.clearNotifications(),trackEvent("onboarding.click_skip",{}),bh.instance.goToNextStep()},n.handleInputChange=function(e){bh.instance[e.target.name]=e.target.value},n.handleCompanyChange=function(e){bh.instance.companyName=e},n.renderImageUpload=function(){return bh.instance.userImg?c.a.createElement("div",{className:"onboarding__basic-information__profile-picture"},c.a.createElement("img",{className:"onboarding__basic-information__profile-picture__preview",src:bh.instance.userImg}),c.a.createElement("div",{className:"uploadcare-light"},c.a.createElement("input",{type:"hidden",role:"uploadcare-uploader",name:"profile_picture_url","data-crop":"1:1","data-images-only":!0,"data-file-types":"png jpeg jpg","data-input-accept-types":"image/png image/jpeg"}))):c.a.createElement("div",{className:"onboarding__basic-information__profile-picture"},c.a.createElement("div",{className:"uploadcare-light uploadcare--placeholder"},c.a.createElement("input",{type:"hidden",role:"uploadcare-uploader",name:"profile_picture_url","data-crop":"1:1","data-images-only":!0,"data-file-types":"png jpeg jpg","data-input-accept-types":"image/png image/jpeg"})),c.a.createElement("div",{className:"uploadcare-note"},"Add your selfie"))},n.state={uploadText:"Choose a file"},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sb(e,t)}(t,i["Component"]),n=t,(o=[{key:"UNSAFE_componentWillMount",value:function(){var e=bh.instance.userImg?"Change photo":"Choose a file";this.setState({uploadText:e})}},{key:"componentDidMount",value:function(){var e=uploadcare.SingleWidget("[role=uploadcare-uploader]");e.onDialogOpen(function(){trackEvent("onboarding.click_selfie_upload",{})}),e.onUploadComplete(function(e){bh.instance.userImg=e.cdnUrl,trackEvent("onboarding.selfie_uploaded",{})});var t=document.getElementsByClassName("uploadcare-widget-button-open")[0];t&&(t.innerHTML=this.state.uploadText)}},{key:"render",value:function(){var e=bh.instance,t=e.companyName,n=e.companySuggestions,o=e.loadSuggestions,r=e.clearCompanySuggestions,a=e.isCompaniesRequestLoading;return c.a.createElement("div",{className:"onboarding__step-content-wrap onboarding__basic-information"},c.a.createElement("div",{className:"onboarding__step-content onboarding__basic-information__form"},c.a.createElement("div",{className:"row onboarding-wizard__header"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h1",{className:"onboarding__step-heading"},"Your Basic Information"),c.a.createElement("p",{className:"onboarding__step-subtext"},"You can update this information later"))),c.a.createElement("div",{className:"onboarding-wizard__content"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},this.renderImageUpload())),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6 form-group"},c.a.createElement("label",{className:"form-label",htmlFor:"firstName"},"First name"),c.a.createElement("input",{name:"firstName",type:"text",className:"form-input form-control",maxLength:"30",value:bh.instance.firstName,onChange:this.handleInputChange})),c.a.createElement("div",{className:"col-sm-6 form-group"},c.a.createElement("label",{className:"form-label",htmlFor:"lastName"},"Last name"),c.a.createElement("input",{name:"lastName",type:"text",className:"form-input form-control",maxLength:"30",value:bh.instance.lastName,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6 form-group"},c.a.createElement("label",{className:"form-label",htmlFor:"companyName"},"Company"),c.a.createElement(_b,{className:"form-input form-control",name:"companyName",initialValue:t,suggestions:n,loadSuggestions:o,clearSuggestions:r,isLoading:a,onChange:this.handleCompanyChange})),c.a.createElement("div",{className:"col-sm-6 form-group"},c.a.createElement("label",{className:"form-label",htmlFor:"jobTitle"},"Job title"),c.a.createElement("input",{name:"jobTitle",type:"text",className:"form-input form-control",maxLength:"30",value:bh.instance.jobTitle,onChange:this.handleInputChange}))),c.a.createElement("div",{className:"col-md-12 onboarding__basic-information__weekly-digest"},c.a.createElement("img",{className:"onboarding__basic-information__weekly-digest__envelope-icon",src:bh.instance.icons.envelopeIconPath}),c.a.createElement("div",{className:"onboarding__basic-information__weekly-digest__subscription-text"},c.a.createElement("div",{className:"subscription-header"},"The weekly digest"),c.a.createElement("div",{className:"form-note"},"Never miss out on the latest tech trends")),c.a.createElement("div",{onClick:function(){bh.instance.weeklyDigestSubscribed=!bh.instance.weeklyDigestSubscribed},className:bh.instance.weeklyDigestSubscribed?"onboarding__basic-information__weekly-digest__subscription-checkbox checked":"onboarding__basic-information__weekly-digest__subscription-checkbox"},c.a.createElement("span",{className:"form-note"},"Yup, Subscribe me"))))),c.a.createElement(Gh,{onContinueClick:this.handleContinueClick,disableButton:bh.instance.hasError,ajaxInProgress:bh.instance.ajaxInProgress,altLink:"Skip",onAltLinkClick:this.handleSkip}))}}])&&wb(n.prototype,o),r&&wb(n,r),t}())||bb,Cb=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/library/tiles/service.jsx"),jb=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/style/colors.js"),xb=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/style/typography.js");function Tb(e){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ib(e,t){return!t||"object"!==Tb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fb(e){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rb(e,t){return(Rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zb=lb.a.div({display:"flex",flexDirection:"row",flexWrap:"wrap","> *":{marginRight:15,marginBottom:15}}),Ab=lb.a.div({display:"flex",flexDirection:"column",maxWidth:57,alignItems:"center",cursor:"pointer","& a":{cursor:"pointer"}},function(e){return{opacity:e.isSelected?.2:1}}),Lb=lb.a.div(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Mb(e,t,n[t])})}return e}({},xb.a,{fontSize:10,color:jb.C,marginTop:6,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:57})),Db=Object(Ye.a)(Ob=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Ib(this,(e=Fb(t)).call.apply(e,[this].concat(r)))).state={popularTools:[]},n.renderSelectedTools=function(){var e=n.state.popularTools;return e.length?e.map(function(e){var t=-1!==bh.instance.selectedTools.findIndex(function(t){return t.id===e.id}),o=t?function(){return n.removeTool(e)}:function(){return n.addTool(e)};return c.a.createElement(Ab,{key:"toolselection-tool-".concat(e.id),isSelected:t},c.a.createElement(Cb.d,{name:e.name,imageUrl:e.image_url,onClick:o,preventDefault:!0}),c.a.createElement(Lb,null,e.name))}):c.a.createElement("img",{src:ke,className:"onboarding__tool-selection__loading"})},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rb(e,t)}(t,i["Component"]),n=t,(o=[{key:"getGithubNotification",value:function(e){var t=bh.instance.oauth;return c.a.createElement("span",null,"Yay! We found"," ",c.a.createElement("strong",null,e," ",wu()("tool",e))," ","that you may be using based on your public ",t.provider," profile.")}},{key:"componentDidMount",value:function(){var e=this,t=bh.instance,n=t.selectedToolsLength,o=t.oauth,r=t.tracking,a=r.page_name,i=r.page_properties;$.get("/api/v1/services/popular_services",function(t){e.setState({popularTools:t})}),n&&bh.instance.showNotification({type:"info",message:this.getGithubNotification(n),icon:o.icon}),trackEvent("Viewed onboarding.create_stack page",{contentGroupAuthenticationStatus:i.contentGroupAuthenticationStatus,contentGroupPage:i.contentGroupPage,name:a,path:window.location.pathname,title:document.title})}},{key:"addTool",value:function(e){bh.instance.addSelectedTool(e,"list")}},{key:"removeTool",value:function(e){bh.instance.removeSelectedTool(e)}},{key:"handleContinueClick",value:function(){trackEvent("onboarding.clicked_continue",{services:_.map(bh.instance.selectedTools,"slug"),feedWeeklySubscribed:bh.instance.emailFeedWeekly}),bh.instance.submitFeedDigest().then(bh.instance.saveSelectedTools)}},{key:"getChildContext",value:function(){return{globalStore:bh.instance}}},{key:"render",value:function(){var e=bh.instance,t=e.selectedToolsLength,n=e.hasError,o=e.ajaxInProgress,r=e.clearSelectedTools;return c.a.createElement("div",{className:"onboarding__step-content-wrap onboarding__build-your-stack"},c.a.createElement("div",{className:"onboarding__step-content onboarding__build-your-stack__form"},c.a.createElement("div",{className:"row onboarding-wizard__header"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h1",{className:"onboarding__step-heading"},"Add tools to your stack"),c.a.createElement("p",{className:"onboarding__step-subtext"},"Search for or select tools & services you use in this stack"),c.a.createElement(_n,{multiline:!0,placeholder:"Search & add tools",removeUnapproved:!0,baseClassName:"onboarding-tool-builder"}),c.a.createElement("div",{onClick:bh.instance.toggleFeedDigest,className:bh.instance.emailFeedWeekly?"onboarding__build-your-stack__subscription-checkbox checked":"onboarding__build-your-stack__subscription-checkbox",style:{marginLeft:0}},c.a.createElement("span",{className:"form-note"},"Send me weekly updates on these tools")))),c.a.createElement("div",{className:"row onboarding-wizard__content"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h3",{className:"onboarding__step-subheading"},"Popular Tools"),c.a.createElement("div",{className:"onboarding__build-your-stack__form__tools-container"},c.a.createElement(zb,null,this.renderSelectedTools()))))),c.a.createElement(Gh,{onContinueClick:this.handleContinueClick,disableButton:!t||n,ajaxInProgress:o,altLink:"Clear tools",onAltLinkClick:r}))}}])&&Pb(n.prototype,o),r&&Pb(n,r),t}())||Ob;Db.childContextTypes={globalStore:ye.a.object},Db.propTypes={};var Ub,$b,Bb,qb=Db;function Wb(e){return(Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Hb(e,t,n[t])})}return e}function Hb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Gb(e,t){return!t||"object"!==Wb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kb(e){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yb(e,t){return(Yb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zb=Object(Ye.a)((Bb=$b=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Gb(this,(e=Kb(t)).call.apply(e,[this].concat(r)))).state={isChecked:{news:!0,tools:!1,comparisons:!0,deep_dives:!1,companies:!0,jobs:!1}},n.handleContinueClick=function(){bh.instance.ajaxInProgress=!0,post("/api/v1/onboarding/interests",{body:{interests:n.state.isChecked}}).then(function(e){if(200===e.status){var t=Object.keys(n.state.isChecked).filter(function(e){return n.state.isChecked[e]});trackEvent("onboarding.click_continue_areas_of_interest",{interests:t}),bh.instance.goToNextStep(),bh.instance.ajaxInProgress=!1}else bh.instance.showNotification({type:"serverError",message:e.data.errors}),bh.instance.ajaxInProgress=!1})},n.handleSkip=function(){trackEvent("onboarding.click_skip",{}),bh.instance.goToNextStep()},n.handleCheckboxClick=function(e){var t=n.refs[e.currentTarget.htmlFor];n.setState({isChecked:Vb({},n.state.isChecked,Hb({},t.name,!t.checked))})},n.renderBoxes=function(){var e=[];return n.props.boxes.forEach(function(t){e.push(c.a.createElement("div",{key:t.className,className:"col-sm-6"},c.a.createElement("div",{className:"interest-box"},c.a.createElement("input",{ref:t.className,type:"checkbox",className:"fancy-checkbox ".concat(t.className),name:t.className,checked:n.state.isChecked[t.className]}),c.a.createElement("label",{htmlFor:t.className,onClick:n.handleCheckboxClick},c.a.createElement("span",null)),c.a.createElement("div",{className:"interest-content"},c.a.createElement("div",{className:"interest-title"},t.title),c.a.createElement("div",{className:"interest-description"},t.description)))))}),e},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yb(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=bh.instance.tracking,n=t.page_name,o=t.page_properties,r=t.path,a=t.referrer,i=t.url;get("/api/v1/onboarding/current_interests").then(function(t){e.setState({isChecked:t.data})}),trackEvent("Viewed onboarding.areas_of_interest Page",{contentGroupAuthenticationStatus:o.contentGroupAuthenticationStatus,contentGroupPage:o.contentGroupPage,name:n,path:r,referrer:a,url:i,title:document.title})}},{key:"render",value:function(){return c.a.createElement("div",{className:"onboarding__step-content-wrap onboarding__areas-of-interest"},c.a.createElement("div",{className:"onboarding__step-content onboarding__areas-of-interest__form"},c.a.createElement("div",{className:"row onboarding-wizard__header"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h1",{className:"onboarding__step-heading"},"What are you interested in?"))),c.a.createElement("div",{className:"onboarding-wizard__content"},c.a.createElement("div",{className:"row"},this.renderBoxes()))),c.a.createElement(Gh,{onContinueClick:this.handleContinueClick,disableButton:bh.instance.hasError,ajaxInProgress:bh.instance.ajaxInProgress,altLink:"Skip",onAltLinkClick:this.handleSkip}))}}])&&Jb(n.prototype,o),r&&Jb(n,r),t}(),$b.defaultProps={boxes:[{className:"news",title:"News",description:"Keep up with the latest updates about the tools you use"},{className:"tools",title:"Tools",description:"Find 3000+ of the best and latest tools with details about each"},{className:"comparisons",title:"Comparisons",description:"Check out side-by-side comparisons of similar tools"},{className:"deep_dives",title:"Deep dives",description:"Learn how companies like Medium, Opendoor, Dubsmash, and others have scaled their tech stacks to hundreds of millions of users"},{className:"companies",title:"Companies",description:"Uncover the tech stacks behind 10,000+ of the world's most successful startups"},{className:"jobs",title:"Jobs",description:"See 30,000+ jobs from companies that use the same tools as you"}]},$b.propTypes={boxes:ye.a.arrayOf(ye.a.object)},Ub=Bb))||Ub;function Xb(e){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qb(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ey(e,t){return!t||"object"!==Xb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ny(e,t){return(ny=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oy=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ey(this,ty(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ny(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("p",null,"Stack news")}}])&&Qb(n.prototype,o),r&&Qb(n,r),t}();function ry(e){return(ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ay(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function iy(e,t){return!t||"object"!==ry(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cy(e){return(cy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sy(e,t){return(sy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ly,uy=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iy(this,cy(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sy(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("p",null,"Next steps...")}}])&&ay(n.prototype,o),r&&ay(n,r),t}();function my(e){return(my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function py(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fy(e,t){return!t||"object"!==my(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dy(e){return(dy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hy(e,t){return(hy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var by=Object(Ye.a)(ly=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=fy(this,dy(t).call(this,e)),bh.instance=e,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hy(e,t)}(t,i["Component"]),n=t,(o=[{key:"render",value:function(){return c.a.createElement("div",{id:"onboarding-wizard-container",className:"onboarding-wizard-container onboarding-wizard-container--flow-short ".concat(bh.instance.hasNotification&&"onboarding-wizard-container--has-notification")},c.a.createElement(ve.d,{history:ve.e},c.a.createElement(ve.c,{path:"/onboarding/welcome",component:eb}),c.a.createElement(ve.c,{path:"/onboarding",component:$h},c.a.createElement(ve.c,{path:"tools-voting",component:ib}),c.a.createElement(ve.c,{path:"basic-information",component:Nb}),c.a.createElement(ve.c,{path:"build-your-stack",component:qb}),c.a.createElement(ve.c,{path:"areas-of-interest",component:Zb}),c.a.createElement(ve.c,{path:"stack-news",component:oy}),c.a.createElement(ve.c,{path:"next-steps",component:uy}))))}}])&&py(n.prototype,o),r&&py(n,r),t}())||ly,yy=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/shared/utils/grid.js");function vy(e){return(vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gy(e,t){return!t||"object"!==vy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wy(e){return(wy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ey(e,t){return(Ey=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ky=function(e){return c.a.createElement("svg",e,c.a.createElement("path",{fill:"none",className:"bk",d:"M0 0h100v100H0z"}),c.a.createElement("circle",{cx:"50",cy:"50",r:"40",stroke:"#f1f1f1",fill:"none",strokeWidth:"10",strokeLinecap:"round"}),c.a.createElement("circle",{cx:"50",cy:"50",r:"40",stroke:"#0690fa",fill:"none",strokeWidth:"6",strokeLinecap:"round"},c.a.createElement("animate",{attributeName:"stroke-dashoffset",dur:"2s",repeatCount:"indefinite",from:"0",to:"502"}),c.a.createElement("animate",{attributeName:"stroke-dasharray",dur:"2s",repeatCount:"indefinite",values:"125.5 125.5;1 250;125.5 125.5"})))};ky.defaultProps={width:"120",height:"120",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"uil-ring-alt"};var Sy=function(e){return c.a.createElement("svg",e,c.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},c.a.createElement("rect",{width:"61",height:"61",x:"-.5",y:"-.5",fill:"#F5F5F5",stroke:"#E2E2E2",rx:"1"}),c.a.createElement("path",{fill:"#E1E1E1",d:"M38.83 41.92a4.165 4.165 0 0 1-3.997-3H31.05l-.02.012-4.511-7.76h-2.757a4.165 4.165 0 1 1 0-2.33h2.83l-.1-.058 4.537-7.807.039.023h3.746a4.165 4.165 0 1 1 0 2.33l-2.457-.001-3.848 6.62-.001.006.001.006 3.854 6.63h2.469a4.166 4.166 0 0 1 8.162 1.164c0 2.3-1.864 4.165-4.164 4.165zm-.017-17.568a2.19 2.19 0 0 0 2.188-2.188 2.19 2.19 0 0 0-2.188-2.188c-1.06 0-1.947.76-2.145 1.763v.85a2.192 2.192 0 0 0 2.145 1.763zM19.764 27.82a2.19 2.19 0 0 0-2.188 2.188 2.19 2.19 0 0 0 2.188 2.188 2.19 2.19 0 0 0 2.188-2.188 2.19 2.19 0 0 0-2.188-2.188zm19.067 7.747c-1.061 0-1.948.76-2.146 1.764v.85a2.191 2.191 0 0 0 2.146 1.762 2.19 2.19 0 0 0 2.188-2.188 2.19 2.19 0 0 0-2.188-2.188z",opacity:".567"})))};Sy.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 62 62"};var Oy=lb.a.div({position:"relative",display:"flex",justifyContent:"center"},function(e){return{width:e.width}}),Ny=lb.a.div({position:"absolute",right:12,top:14,zIndex:1}),Cy=lb.a.img({width:Object(yy.a)(4),height:Object(yy.a)(4),marginRight:Object(yy.a)(1)}),jy=Object(lb.a)(Sy)({width:Object(yy.a)(4),height:Object(yy.a)(4),marginRight:Object(yy.a)(1)}),xy=lb.a.span({textAlign:"left",borderBottom:"1px solid ".concat(jb.b),display:"flex",alignItems:"center",margin:"-10px -20px",padding:"10px 20px"}),Ty=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=gy(this,(e=wy(t)).call.apply(e,[this].concat(r)))).state={value:"",suggestions:[],isLoading:!1},n.lastRequestId=null,n.handleChange=function(e,t){var o=t.newValue;n.setState({value:o})},n.buildCustomParams=function(){var e=n.props.customParams;return e?"&"+Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&"):""},n.handleSuggestionsFetchRequested=function(e){var t=e.value;null!==n.lastRequestId&&clearTimeout(n.lastRequestId),""!==t?n.lastRequestId=setTimeout(function(){n.setState({isLoading:!0});var e=n.buildCustomParams();fetch("".concat(n.props.apiURL,"?q=").concat(t).concat(e)).then(function(e){return e.json()}).then(function(e){n.setState({isLoading:!1,suggestions:e})})},1e3):n.handleSuggestionsClearRequested()},n.handleSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ey(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){clearTimeout(this.lastRequestId)}},{key:"getSuggestionValue",value:function(e){return e.name}},{key:"renderSuggestion",value:function(e){var t=e.image_url,n=e.name;return c.a.createElement(xy,null,t?c.a.createElement(Cy,{src:"".concat(t)}):c.a.createElement(jy,null),n)}},{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.className,o=t.name,r=t.maxLength,a=t.placeholder,i=t.inputStyle,s=t.width,l=this.state,u=l.suggestions,m=l.isLoading,p={className:n,name:o,maxLength:r,placeholder:a,value:e,onChange:this.handleChange,style:i};return c.a.createElement(Oy,{width:s},c.a.createElement(Ny,null,m&&c.a.createElement(ky,{className:"button-spinner"})),c.a.createElement(sb.a,{suggestions:u,onSuggestionsFetchRequested:this.handleSuggestionsFetchRequested,onSuggestionsClearRequested:this.handleSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:p}))}}])&&_y(n.prototype,o),r&&_y(n,r),t}();Ty.propTypes={apiURL:ye.a.string.isRequired,customParams:ye.a.object,className:ye.a.string,name:ye.a.string,placeholder:ye.a.string,maxLength:ye.a.number,inputStyle:ye.a.object,width:ye.a.number},Ty.defaultProps={placeholder:"Type to load suggestions",maxLength:60},Object(a.default)({Notifications:al,NavbarAvatar:Zl,Typeahead:Ty}),r.a.register({ListCompanyCustomers:W,DeleteCompanyModal:ne,IUseThis:le,DeleteUserModal:he,StandaloneReader:Tp,OnboardingRouter:eo,StackEditRouter:zr,CompanyMembership:Na,MatchRouter:Uc,Percentage:Qc,SoftApprovalContainer:ws,StackShareNews:sp,Follow:Jp,Comments:Gf,Reasons:lh,OnboardingWizardContainer:by})},"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/fetch-polyfill.js":function(e,t){function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="",a=document.querySelector("meta[name=csrf-token]");a&&(r=a.getAttribute("content")),window.CSRFFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.body=JSON.stringify(t.body),fetch(e,n({},t,{headers:n({},t.headers,{"X-CSRF-Token":r,"X-Requested-With":"XMLHttpRequest"}),credentials:"same-origin"}))},window.jCSRFFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(o){window.CSRFFetch(e,n({},t,{headers:n({},t.headers,{"Content-Type":"application/json",Accept:"application/json"})})).then(function(e){return e.text().then(function(t){try{o({status:e.status,data:JSON.parse(t)})}catch(t){o({status:e.status,data:{}})}})})})},window.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.jCSRFFetch(e,n({},t,{method:"GET"}))},window.post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.jCSRFFetch(e,n({},t,{method:"POST"}))},window.patch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.jCSRFFetch(e,n({},t,{method:"PATCH"}))},window.httpDelete=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.jCSRFFetch(e,n({},t,{method:"DELETE"}))}},"/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/react_on_rails-polyfill.js":function(e,t,n){"use strict";n.r(t);var o=n("/home/circleci/frontend/node_modules/react-on-rails/node_package/lib/ReactOnRails.js"),r=n.n(o);void 0===window.ReactOnRails&&(window.ReactOnRails=r.a)},'external "jQuery"':function(e,t){e.exports=jQuery},"multi ./app/polyfills.js ./app/bundles/legacy/startup/fetch-polyfill.js ./app/bundles/legacy/startup/react_on_rails-polyfill.js ./app/bundles/legacy/components/track/track.js ./app/bundles/legacy/components/shared/util/util.js ./app/bundles/legacy/components/notifications/notifications.js ./app/bundles/legacy/startup/clientRegister.jsx":function(e,t,n){n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/polyfills.js"),n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/fetch-polyfill.js"),n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/react_on_rails-polyfill.js"),n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/track/track.js"),n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/shared/util/util.js"),n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/components/notifications/notifications.js"),e.exports=n("/home/circleci/frontend/node_modules/babel-loader/lib/index.js!/home/circleci/frontend/app/bundles/legacy/startup/clientRegister.jsx 2eb462433a16a245a5b6a5cd9eba1f5f")}},[["multi ./app/polyfills.js ./app/bundles/legacy/startup/fetch-polyfill.js ./app/bundles/legacy/startup/react_on_rails-polyfill.js ./app/bundles/legacy/components/track/track.js ./app/bundles/legacy/components/shared/util/util.js ./app/bundles/legacy/components/notifications/notifications.js ./app/bundles/legacy/startup/clientRegister.jsx",2,0,1]]]);
//# sourceMappingURL=legacy.da61b57b5f5f7e39468f.js.map